<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>Seb&#39;s blog</title>
<link>https://sbloggel.netlify.app/</link>
<atom:link href="https://sbloggel.netlify.app/index.xml" rel="self" type="application/rss+xml"/>
<description>Seb&#39;s private blog about statistics and other topics</description>
<generator>quarto-1.4.553</generator>
<lastBuildDate>Tue, 22 Oct 2024 22:00:00 GMT</lastBuildDate>
<item>
  <title>Ventilation</title>
  <link>https://sbloggel.netlify.app/posts/2024-10-23-ventilation/2024-10-23-ventilation.html</link>
  <description><![CDATA[ 




<p>How much water in cubic meters is removed from a flat with a volume if the air in the flat is changed?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># devtools::install_github("sebastian-gerdes/smisc")</span></span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'smisc'</span>)</span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">diff_water</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">temperature_out =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>, </span>
<span id="cb1-4">           <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">relative_humidity_outside =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">80</span>, </span>
<span id="cb1-5">           <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">temperature_inside =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>, </span>
<span id="cb1-6">           <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">relative_humidity_inside =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">70</span>, </span>
<span id="cb1-7">           <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">volume =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">300</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -1.644616</code></pre>
</div>
</div>



 ]]></description>
  <category>R</category>
  <guid>https://sbloggel.netlify.app/posts/2024-10-23-ventilation/2024-10-23-ventilation.html</guid>
  <pubDate>Tue, 22 Oct 2024 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Energie Haus</title>
  <link>https://sbloggel.netlify.app/posts/2024-10-23-energie-haus/2024-10-23-energie-haus.html</link>
  <description><![CDATA[ 




<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'tidyverse'</span>)</span></code></pre></div>
</div>
<ul>
<li>ChatGPT sagt, dass ich ca. 1e3 Watt benötige, um 1 kg Stein um 1 Grad zu erwärmen (<a href="https://chatgpt.com/share/6718a0a2-68cc-8013-a9b6-aa25947e9b54">Quelle</a>)</li>
<li>Ein Haus hat eine Masse von ca. 100 Tonnen (1e5 kg)</li>
<li>ChatGPT sagt, dass ich ca. 1e3 Watt benötige, um 1 Kubikmeter Luft um 1 Grad zu erwärmen</li>
<li>Ein Haus hat ein Volumen von ca. 500 Kubikmeter (<img src="https://latex.codecogs.com/png.latex?5e2%20m%5E3">)</li>
</ul>
<p>Der Quotient aus beiden:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1e5</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">5e2</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 200</code></pre>
</div>
</div>
<p>Ergo 200 mal so viel Energie um die Masse des Hauses um 1 Grad zu erwärmen im Vergleich zur Energie um die Masse der Luft um 1 Grad zu erwärmen!</p>



 ]]></description>
  <category>R</category>
  <guid>https://sbloggel.netlify.app/posts/2024-10-23-energie-haus/2024-10-23-energie-haus.html</guid>
  <pubDate>Tue, 22 Oct 2024 22:00:00 GMT</pubDate>
</item>
<item>
  <title>gglimpse or tibblet, tlimpse or dfsum</title>
  <link>https://sbloggel.netlify.app/posts/2024-09-30-gglimpse/2024-09-30-gglimpse.html</link>
  <description><![CDATA[ 




<p>All in all, I like the summarytools package – however – I don’t like its heavy dependencies. Here, I want to create a lightweight alternative!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'tidyverse'</span>)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'summarytools'</span>)</span></code></pre></div>
</div>
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1">mm <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> mtcars <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb2-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">model_name =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">row.names</span>(mtcars), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.before =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb2-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dfSummary</span>(mm, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">style =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'grid'</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">plain.ascii =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">tmp.img.dir =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'plots'</span>)</span></code></pre></div>
<pre><code>temporary images written to '/Users/seb/Documents/Projects/00_websites/sbloggel/posts/2024-09-30-gglimpse/plots'</code></pre>
<section id="data-frame-summary" class="level3">
<h3 class="anchored" data-anchor-id="data-frame-summary">Data Frame Summary</h3>
<section id="mm" class="level4">
<h4 class="anchored" data-anchor-id="mm">mm</h4>
<p><strong>Dimensions:</strong> 32 x 12<br>
<strong>Duplicates:</strong> 0</p>
<table class="table">
<colgroup>
<col style="width: 4%">
<col style="width: 11%">
<col style="width: 24%">
<col style="width: 17%">
<col style="width: 20%">
<col style="width: 9%">
<col style="width: 8%">
</colgroup>
<thead>
<tr class="header">
<th>No</th>
<th>Variable</th>
<th>Stats / Values</th>
<th>Freqs (% of Valid)</th>
<th>Graph</th>
<th>Valid</th>
<th>Missing</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>model_name<br>
[character]</td>
<td>1. AMC Javelin<br>
2. Cadillac Fleetwood<br>
3. Camaro Z28<br>
4. Chrysler Imperial<br>
5. Datsun 710<br>
6. Dodge Challenger<br>
7. Duster 360<br>
8. Ferrari Dino<br>
9. Fiat 128<br>
10. Fiat X1-9<br>
[ 22 others ]</td>
<td>1 ( 3.1%)<br>
1 ( 3.1%)<br>
1 ( 3.1%)<br>
1 ( 3.1%)<br>
1 ( 3.1%)<br>
1 ( 3.1%)<br>
1 ( 3.1%)<br>
1 ( 3.1%)<br>
1 ( 3.1%)<br>
1 ( 3.1%)<br>
22 (68.8%)</td>
<td><img src="https://sbloggel.netlify.app/posts/2024-09-30-gglimpse/plots/ds0114.png" class="img-fluid"></td>
<td>32<br>
(100.0%)</td>
<td>0<br>
(0.0%)</td>
</tr>
<tr class="even">
<td>2</td>
<td>mpg<br>
[numeric]</td>
<td>Mean (sd) : 20.1 (6)<br>
min &lt; med &lt; max:<br>
10.4 &lt; 19.2 &lt; 33.9<br>
IQR (CV) : 7.4 (0.3)</td>
<td>25 distinct values</td>
<td><img src="https://sbloggel.netlify.app/posts/2024-09-30-gglimpse/plots/ds0115.png" class="img-fluid"></td>
<td>32<br>
(100.0%)</td>
<td>0<br>
(0.0%)</td>
</tr>
<tr class="odd">
<td>3</td>
<td>cyl<br>
[numeric]</td>
<td>Mean (sd) : 6.2 (1.8)<br>
min &lt; med &lt; max:<br>
4 &lt; 6 &lt; 8<br>
IQR (CV) : 4 (0.3)</td>
<td>4 : 11 (34.4%)<br>
6 : 7 (21.9%)<br>
8 : 14 (43.8%)</td>
<td><img src="https://sbloggel.netlify.app/posts/2024-09-30-gglimpse/plots/ds0116.png" class="img-fluid"></td>
<td>32<br>
(100.0%)</td>
<td>0<br>
(0.0%)</td>
</tr>
<tr class="even">
<td>4</td>
<td>disp<br>
[numeric]</td>
<td>Mean (sd) : 230.7 (123.9)<br>
min &lt; med &lt; max:<br>
71.1 &lt; 196.3 &lt; 472<br>
IQR (CV) : 205.2 (0.5)</td>
<td>27 distinct values</td>
<td><img src="https://sbloggel.netlify.app/posts/2024-09-30-gglimpse/plots/ds0117.png" class="img-fluid"></td>
<td>32<br>
(100.0%)</td>
<td>0<br>
(0.0%)</td>
</tr>
<tr class="odd">
<td>5</td>
<td>hp<br>
[numeric]</td>
<td>Mean (sd) : 146.7 (68.6)<br>
min &lt; med &lt; max:<br>
52 &lt; 123 &lt; 335<br>
IQR (CV) : 83.5 (0.5)</td>
<td>22 distinct values</td>
<td><img src="https://sbloggel.netlify.app/posts/2024-09-30-gglimpse/plots/ds0118.png" class="img-fluid"></td>
<td>32<br>
(100.0%)</td>
<td>0<br>
(0.0%)</td>
</tr>
<tr class="even">
<td>6</td>
<td>drat<br>
[numeric]</td>
<td>Mean (sd) : 3.6 (0.5)<br>
min &lt; med &lt; max:<br>
2.8 &lt; 3.7 &lt; 4.9<br>
IQR (CV) : 0.8 (0.1)</td>
<td>22 distinct values</td>
<td><img src="https://sbloggel.netlify.app/posts/2024-09-30-gglimpse/plots/ds0119.png" class="img-fluid"></td>
<td>32<br>
(100.0%)</td>
<td>0<br>
(0.0%)</td>
</tr>
<tr class="odd">
<td>7</td>
<td>wt<br>
[numeric]</td>
<td>Mean (sd) : 3.2 (1)<br>
min &lt; med &lt; max:<br>
1.5 &lt; 3.3 &lt; 5.4<br>
IQR (CV) : 1 (0.3)</td>
<td>29 distinct values</td>
<td><img src="https://sbloggel.netlify.app/posts/2024-09-30-gglimpse/plots/ds0120.png" class="img-fluid"></td>
<td>32<br>
(100.0%)</td>
<td>0<br>
(0.0%)</td>
</tr>
<tr class="even">
<td>8</td>
<td>qsec<br>
[numeric]</td>
<td>Mean (sd) : 17.8 (1.8)<br>
min &lt; med &lt; max:<br>
14.5 &lt; 17.7 &lt; 22.9<br>
IQR (CV) : 2 (0.1)</td>
<td>30 distinct values</td>
<td><img src="https://sbloggel.netlify.app/posts/2024-09-30-gglimpse/plots/ds0121.png" class="img-fluid"></td>
<td>32<br>
(100.0%)</td>
<td>0<br>
(0.0%)</td>
</tr>
<tr class="odd">
<td>9</td>
<td>vs<br>
[numeric]</td>
<td>Min : 0<br>
Mean : 0.4<br>
Max : 1</td>
<td>0 : 18 (56.2%)<br>
1 : 14 (43.8%)</td>
<td><img src="https://sbloggel.netlify.app/posts/2024-09-30-gglimpse/plots/ds0122.png" class="img-fluid"></td>
<td>32<br>
(100.0%)</td>
<td>0<br>
(0.0%)</td>
</tr>
<tr class="even">
<td>10</td>
<td>am<br>
[numeric]</td>
<td>Min : 0<br>
Mean : 0.4<br>
Max : 1</td>
<td>0 : 19 (59.4%)<br>
1 : 13 (40.6%)</td>
<td><img src="https://sbloggel.netlify.app/posts/2024-09-30-gglimpse/plots/ds0123.png" class="img-fluid"></td>
<td>32<br>
(100.0%)</td>
<td>0<br>
(0.0%)</td>
</tr>
<tr class="odd">
<td>11</td>
<td>gear<br>
[numeric]</td>
<td>Mean (sd) : 3.7 (0.7)<br>
min &lt; med &lt; max:<br>
3 &lt; 4 &lt; 5<br>
IQR (CV) : 1 (0.2)</td>
<td>3 : 15 (46.9%)<br>
4 : 12 (37.5%)<br>
5 : 5 (15.6%)</td>
<td><img src="https://sbloggel.netlify.app/posts/2024-09-30-gglimpse/plots/ds0124.png" class="img-fluid"></td>
<td>32<br>
(100.0%)</td>
<td>0<br>
(0.0%)</td>
</tr>
<tr class="even">
<td>12</td>
<td>carb<br>
[numeric]</td>
<td>Mean (sd) : 2.8 (1.6)<br>
min &lt; med &lt; max:<br>
1 &lt; 2 &lt; 8<br>
IQR (CV) : 2 (0.6)</td>
<td>1 : 7 (21.9%)<br>
2 : 10 (31.2%)<br>
3 : 3 ( 9.4%)<br>
4 : 10 (31.2%)<br>
6 : 1 ( 3.1%)<br>
8 : 1 ( 3.1%)</td>
<td><img src="https://sbloggel.netlify.app/posts/2024-09-30-gglimpse/plots/ds0125.png" class="img-fluid"></td>
<td>32<br>
(100.0%)</td>
<td>0<br>
(0.0%)</td>
</tr>
</tbody>
</table>


</section>
</section>

 ]]></description>
  <category>R</category>
  <guid>https://sbloggel.netlify.app/posts/2024-09-30-gglimpse/2024-09-30-gglimpse.html</guid>
  <pubDate>Sun, 29 Sep 2024 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Hypothesis testing in mixed linear models with a factorial design</title>
  <link>https://sbloggel.netlify.app/posts/2024-09-30-hypothesis-testing-in-mixed-linear-models-with-a-factorial-design/2024-09-30-hypothesis-testing-in-mixed-linear-models-with-a-factorial-design.html</link>
  <description><![CDATA[ 




<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1">dat <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expand_grid</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">time =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">group =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ID =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb1-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">hh =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'time'</span>, time, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'group'</span>, group, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sep =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'_'</span>))</span>
<span id="cb1-3"></span>
<span id="cb1-4">X <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">model.matrix</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> hh <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(ID), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> dat)</span>
<span id="cb1-5"></span>
<span id="cb1-6">dat <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> dat <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb1-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> X <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%*%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rnorm</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rnorm</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span>))</span>
<span id="cb1-8"></span>
<span id="cb1-9"></span>
<span id="cb1-10">fm_1 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lmer</span>(y <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> time <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> group <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|</span> ID), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> dat)</span>
<span id="cb1-11">fm_2 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lmer</span>(y <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> hh <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|</span> ID), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> dat)</span>
<span id="cb1-12"></span>
<span id="cb1-13">fm_1</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Linear mixed model fit by REML ['lmerMod']
Formula: y ~ time * group + (1 | ID)
   Data: dat
REML criterion at convergence: 92.9467
Random effects:
 Groups   Name        Std.Dev.
 ID       (Intercept) 0.9389  
 Residual             1.2076  
Number of obs: 30, groups:  ID, 5
Fixed Effects:
 (Intercept)         time2         time3        group2  time2:group2  
    -0.08427       2.12602      -0.21546      -0.15532      -3.74877  
time3:group2  
    -0.65262  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1">fm_2</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Linear mixed model fit by REML ['lmerMod']
Formula: y ~ hh - 1 + (1 | ID)
   Data: dat
REML criterion at convergence: 92.9467
Random effects:
 Groups   Name        Std.Dev.
 ID       (Intercept) 0.9389  
 Residual             1.2076  
Number of obs: 30, groups:  ID, 5
Fixed Effects:
hhtime_1_group_1  hhtime_1_group_2  hhtime_2_group_1  hhtime_2_group_2  
        -0.08427          -0.23959           2.04174          -1.86234  
hhtime_3_group_1  hhtime_3_group_2  
        -0.29973          -1.10767  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">AIC</span>(fm_1)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 108.9467</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">AIC</span>(fm_2)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 108.9467</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summary</span>(fm_1)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Linear mixed model fit by REML ['lmerMod']
Formula: y ~ time * group + (1 | ID)
   Data: dat

REML criterion at convergence: 92.9

Scaled residuals: 
    Min      1Q  Median      3Q     Max 
-1.7375 -0.5930  0.2371  0.6309  1.1804 

Random effects:
 Groups   Name        Variance Std.Dev.
 ID       (Intercept) 0.8816   0.9389  
 Residual             1.4582   1.2076  
Number of obs: 30, groups:  ID, 5

Fixed effects:
             Estimate Std. Error t value
(Intercept)  -0.08427    0.68408  -0.123
time2         2.12602    0.76373   2.784
time3        -0.21546    0.76373  -0.282
group2       -0.15532    0.76373  -0.203
time2:group2 -3.74877    1.08007  -3.471
time3:group2 -0.65262    1.08007  -0.604

Correlation of Fixed Effects:
            (Intr) time2  time3  group2 tm2:g2
time2       -0.558                            
time3       -0.558  0.500                     
group2      -0.558  0.500  0.500              
time2:grop2  0.395 -0.707 -0.354 -0.707       
time3:grop2  0.395 -0.354 -0.707 -0.707  0.500</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summary</span>(fm_2)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Linear mixed model fit by REML ['lmerMod']
Formula: y ~ hh - 1 + (1 | ID)
   Data: dat

REML criterion at convergence: 92.9

Scaled residuals: 
    Min      1Q  Median      3Q     Max 
-1.7375 -0.5930  0.2371  0.6309  1.1804 

Random effects:
 Groups   Name        Variance Std.Dev.
 ID       (Intercept) 0.8816   0.9389  
 Residual             1.4582   1.2076  
Number of obs: 30, groups:  ID, 5

Fixed effects:
                 Estimate Std. Error t value
hhtime_1_group_1 -0.08427    0.68408  -0.123
hhtime_1_group_2 -0.23959    0.68408  -0.350
hhtime_2_group_1  2.04174    0.68408   2.985
hhtime_2_group_2 -1.86234    0.68408  -2.722
hhtime_3_group_1 -0.29973    0.68408  -0.438
hhtime_3_group_2 -1.10767    0.68408  -1.619

Correlation of Fixed Effects:
            h_1__1 h_1__2 h_2__1 h_2__2 h_3__1
hhtm_1_gr_2 0.377                             
hhtm_2_gr_1 0.377  0.377                      
hhtm_2_gr_2 0.377  0.377  0.377               
hhtm_3_gr_1 0.377  0.377  0.377  0.377        
hhtm_3_gr_2 0.377  0.377  0.377  0.377  0.377 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fixef</span>(fm_1)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> (Intercept)        time2        time3       group2 time2:group2 time3:group2 
 -0.08427219   2.12601590  -0.21545931  -0.15531723  -3.74876543  -0.65261665 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fixef</span>(fm_2)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>hhtime_1_group_1 hhtime_1_group_2 hhtime_2_group_1 hhtime_2_group_2 
     -0.08427219      -0.23958942       2.04174371      -1.86233895 
hhtime_3_group_1 hhtime_3_group_2 
     -0.29973150      -1.10766538 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">glht</span>(fm_1, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'time2 == 0'</span>,</span>
<span id="cb17-2">             <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'time3 == 0'</span>,</span>
<span id="cb17-3">             <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'time2 + group2 + time2:group2 == 0'</span>,</span>
<span id="cb17-4">             <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'time3 + group2 + time3:group2 == 0'</span>))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
     General Linear Hypotheses

Linear Hypotheses:
                                   Estimate
time2 == 0                           2.1260
time3 == 0                          -0.2155
time2 + group2 + time2:group2 == 0  -1.7781
time3 + group2 + time3:group2 == 0  -1.0234</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">glht</span>(fm_2, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'hhtime_2_group_1 - hhtime_1_group_1 == 0'</span>,</span>
<span id="cb19-2">             <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'hhtime_3_group_1 - hhtime_1_group_1 == 0'</span>,</span>
<span id="cb19-3">             <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'hhtime_2_group_2 - hhtime_1_group_2 == 0'</span>,</span>
<span id="cb19-4">             <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'hhtime_3_group_2 - hhtime_1_group_2 == 0'</span>))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
     General Linear Hypotheses

Linear Hypotheses:
                                         Estimate
hhtime_2_group_1 - hhtime_1_group_1 == 0   2.1260
hhtime_3_group_1 - hhtime_1_group_1 == 0  -0.2155
hhtime_2_group_2 - hhtime_1_group_2 == 0  -1.6227
hhtime_3_group_2 - hhtime_1_group_2 == 0  -0.8681</code></pre>
</div>
</div>



 ]]></description>
  <category>R</category>
  <guid>https://sbloggel.netlify.app/posts/2024-09-30-hypothesis-testing-in-mixed-linear-models-with-a-factorial-design/2024-09-30-hypothesis-testing-in-mixed-linear-models-with-a-factorial-design.html</guid>
  <pubDate>Sun, 29 Sep 2024 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Pi mal Daumen - Elektromobilität</title>
  <link>https://sbloggel.netlify.app/posts/2024-09-30-pi-mal-daumen---elektromobilität/2024-09-30-pi-mal-daumen---elektromobilität.html</link>
  <description><![CDATA[ 




<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1">(J_per_kWh <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1e3</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3.6e3</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3600000</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1">(J_per_liter <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3e7</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3e+07</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1">(kWh_per_liter <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> J_per_liter <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> J_per_kWh)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 8.333333</code></pre>
</div>
</div>
<ul>
<li>1 Liter Benzin hat ungefähr 8.3 kWh!</li>
<li>Opel Corsa Elektor verbraucht ca. 20 kWh pro 100 Kilometer</li>
<li>Opel Corsa Verbrenner verbraucht ca. 5 Liter pro 100 Kilometer</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1">(verbrenner_fold_consumption <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> J_per_liter) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> J_per_kWh))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.083333</code></pre>
</div>
</div>
<ul>
<li>Primärenergieverbrauch eines Opel Benziner vs.&nbsp;Elektro ganz grob doppelt so groß!</li>
<li>Unser Gesamtstromverbrauch entspricht ca. 7.000 km mit einem Opel Corsa Elektro</li>
<li>Unsere Gesamtheizenergie enspricht ca. 40.000 km mit einem Opel Corsa Elektro</li>
</ul>



 ]]></description>
  <category>R</category>
  <category>Sustainibility</category>
  <guid>https://sbloggel.netlify.app/posts/2024-09-30-pi-mal-daumen---elektromobilität/2024-09-30-pi-mal-daumen---elektromobilität.html</guid>
  <pubDate>Sun, 29 Sep 2024 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Energie</title>
  <link>https://sbloggel.netlify.app/posts/2024-09-24-energie/2024-09-24-energie.html</link>
  <description><![CDATA[ 




<section id="pi-mal-daumen-berechnungen" class="level2">
<h2 class="anchored" data-anchor-id="pi-mal-daumen-berechnungen">Pi-mal-Daumen-Berechnungen</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'tidyverse'</span>)</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Schätzwert für Leistung des menschlichen Körpers</span></span>
<span id="cb2-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># entspricht 2160 kcal pro Tag</span></span>
<span id="cb2-3">p_human_W <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span></span>
<span id="cb2-4"></span>
<span id="cb2-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ca. 10.000 kWh pro Person Heizenergie pro Jahr</span></span>
<span id="cb2-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># (https://www.thermondo.de/info/rat/heizen/energieverbrauch-durchschnittsfamilie/) </span></span>
<span id="cb2-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># das ist wahrscheinlich ein recht hoher Wert</span></span>
<span id="cb2-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># entspricht einer Leistung von:</span></span>
<span id="cb2-9">(p_heating_W <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1e4</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3.6e6</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">365</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">24</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3600</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1141.553</code></pre>
</div>
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Wir als vierköpfige Familie haben in 2023 ca. 1.400 kWh Strom verbraucht</span></span>
<span id="cb4-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Das entspricht einer pro-Kopf-Leistung von:</span></span>
<span id="cb4-3">(p_electricity_W <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.3e3</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3.6e6</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">365</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">24</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3600</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 37.10046</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Wieviel Fernwärme wir in den letzten Jahrne ca. pro Jahr  bezogen haben:</span></span>
<span id="cb6-2">(W_kWh <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">8e3</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 8000</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1">(p_heating_BoGe_W <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">8e3</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3.6e6</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">365</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">24</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3600</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 913.242</code></pre>
</div>
</div>
<ul>
<li>Nach diesen Schätzwerten verbrauchen wir als gesamte Familie weniger Heizenergie als ein Durchschnittsdeutscher!</li>
<li>Kosten pro kWh Fernwärme in DD ca. 20 ct – <a href="https://www.drewag.de/wps/portal/drewag/cms/menu_main/privatkunden/waerme/tarife/fernwaerme">Link</a></li>
<li>Wirkungsgrad von Fernwärme: Laut ChatGPT 75%-90% – <a href="https://chatgpt.com/share/66f4fff0-d55c-8013-9544-dadcf72a8270">Link</a></li>
</ul>
</section>
<section id="typischer-co2-fußabdruck-einer-in-deutschland-lebenden-person" class="level2">
<h2 class="anchored" data-anchor-id="typischer-co2-fußabdruck-einer-in-deutschland-lebenden-person">Typischer CO2-Fußabdruck einer in Deutschland lebenden Person</h2>
<ul>
<li><a href="https://chatgpt.com/share/66f26e23-4188-8013-af74-26280eb12039">Recherche von ChatGPT</a>
<ul>
<li>Insgesamt ca. 20.000 kWh (16500 - 22500 kWh) pro Person pro Jahr
<ul>
<li>Strom: 1500 bis 2000 kWh</li>
<li>Heizenergie: 8000 bis 10000 kWh</li>
<li>Transportenergie: 3000 bis 4000 kWh</li>
<li>Energie für Nahrung: 2000 bis 3000 kWh</li>
<li>Energie für andere Produkte: 2000 bis 3500 kWh</li>
</ul></li>
<li>–&gt; Großteil (fast die Hälfte) des Energieverbrauchs der Privatpersonen für Heizung</li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1500</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8000</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3000</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2000</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2000</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 16500</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2000</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10000</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4000</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3000</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3500</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 22500</code></pre>
</div>
</div>
</section>
<section id="primärenergieverbrauch-in-deutschland" class="level2">
<h2 class="anchored" data-anchor-id="primärenergieverbrauch-in-deutschland">Primärenergieverbrauch in Deutschland</h2>
<ul>
<li><a href="https://www.cleanenergywire.org/factsheets/germanys-energy-consumption-and-power-mix-charts">Infos von cleanenergywire.org</a></li>
<li>Hier ein heruntergeladenes, interessantes Diagramm von cleanenergywire.org: <img src="https://sbloggel.netlify.app/posts/2024-09-24-energie/fig11-final-energy-consumption-consumer-group-1990-2022.png" class="img-fluid"></li>
<li>Gesamtprimärenergieverbrach ca. 10.000 PJ = 1e19 Joules</li>
<li>Pro Person (etwas mehr als das von ChatGPT pro Person angegebene – aber dort auch ohne Industrie)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1">(primaerenergie_pro_person_cleanenergywire_kWh <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1e19</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3.6e6</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">8e7</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 34722.22</code></pre>
</div>
</div>
<ul>
<li>Leistung Primärenergie pro Person:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1">(p_primaerenergie_pro_person_W <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1e4</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1e15</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">8e7</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">365</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">24</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3600</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3963.724</code></pre>
</div>
</div>
</section>
<section id="wie-viel-kann-photovoltaik-pv-leisten" class="level2">
<h2 class="anchored" data-anchor-id="wie-viel-kann-photovoltaik-pv-leisten">Wie viel kann Photovoltaik (PV) leisten?</h2>
<ul>
<li>ca. 200 kWh Ertrag pro qm PV pro Jahr (<a href="https://www.iwb.ch/klimadreh/ratgeber/solaranlage/wie-viel-flaeche-benoetigt-meine-solaranlage">Quelle</a>)
<ul>
<li>entspricht ca. 20 W im Jahresmittel:</li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1">(p_pv_pro_qm_W <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">200</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3.6e6</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">365</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">24</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3600</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 22.83105</code></pre>
</div>
</div>
<p>Also PV-Fläche pro Person benötigt:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1">(A_PV_pro_person_qm <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> p_primaerenergie_pro_person_W <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> p_pv_pro_qm_W)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 173.6111</code></pre>
</div>
</div>
<p>Fläche pro Person in Deutschland vorhanden:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1">(A_pro_person_qm <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3.6e11</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">8e7</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4500</code></pre>
</div>
</div>
<p>Also müsste ein Anteil von 0.0385802 in Deutschland mit PV belegt werden um den PV-Bedarf komplett zu decken. Könnte gehen, oder?</p>


</section>

 ]]></description>
  <category>Sustainibility</category>
  <guid>https://sbloggel.netlify.app/posts/2024-09-24-energie/2024-09-24-energie.html</guid>
  <pubDate>Mon, 23 Sep 2024 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Testing the package summarytools</title>
  <link>https://sbloggel.netlify.app/posts/2024-09-17-testing-the-package-summarytools/2024-09-17-testing-the-package-summarytools.html</link>
  <description><![CDATA[ 




<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'summarytools'</span>)</span></code></pre></div>
</div>
<section id="standard-settings" class="level2">
<h2 class="anchored" data-anchor-id="standard-settings">Standard settings</h2>
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dfSummary</span>(iris)</span></code></pre></div>
<p>Data Frame Summary<br>
iris<br>
Dimensions: 150 x 5<br>
Duplicates: 1</p>
<table class="table">
<colgroup>
<col style="width: 4%">
<col style="width: 13%">
<col style="width: 22%">
<col style="width: 19%">
<col style="width: 20%">
<col style="width: 10%">
<col style="width: 10%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">No</th>
<th style="text-align: left;">Variable</th>
<th style="text-align: left;">Stats / Values</th>
<th style="text-align: left;">Freqs (% of Valid)</th>
<th style="text-align: left;">Graph</th>
<th style="text-align: left;">Valid</th>
<th style="text-align: left;">Missing</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: left;">Sepal.Length [numeric]</td>
<td style="text-align: left;">Mean (sd) : 5.8 (0.8) min &lt; med &lt; max: 4.3 &lt; 5.8 &lt; 7.9 IQR (CV) : 1.3 (0.1)</td>
<td style="text-align: left;">35 distinct values</td>
<td style="text-align: left;">. . : : : : : : : : : : : : : : : : : : : : : : : :</td>
<td style="text-align: left;">150 (100.0%)</td>
<td style="text-align: left;">0 (0.0%)</td>
</tr>
<tr class="even">
<td style="text-align: left;">2</td>
<td style="text-align: left;">Sepal.Width [numeric]</td>
<td style="text-align: left;">Mean (sd) : 3.1 (0.4) min &lt; med &lt; max: 2 &lt; 3 &lt; 4.4 IQR (CV) : 0.5 (0.1)</td>
<td style="text-align: left;">23 distinct values</td>
<td style="text-align: left;">: : . : : : : : . . : : : : : :</td>
<td style="text-align: left;">150 (100.0%)</td>
<td style="text-align: left;">0 (0.0%)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3</td>
<td style="text-align: left;">Petal.Length [numeric]</td>
<td style="text-align: left;">Mean (sd) : 3.8 (1.8) min &lt; med &lt; max: 1 &lt; 4.3 &lt; 6.9 IQR (CV) : 3.5 (0.5)</td>
<td style="text-align: left;">43 distinct values</td>
<td style="text-align: left;">: : . : : : : . : : : : : . : : . : : : : : .</td>
<td style="text-align: left;">150 (100.0%)</td>
<td style="text-align: left;">0 (0.0%)</td>
</tr>
<tr class="even">
<td style="text-align: left;">4</td>
<td style="text-align: left;">Petal.Width [numeric]</td>
<td style="text-align: left;">Mean (sd) : 1.2 (0.8) min &lt; med &lt; max: 0.1 &lt; 1.3 &lt; 2.5 IQR (CV) : 1.5 (0.6)</td>
<td style="text-align: left;">22 distinct values</td>
<td style="text-align: left;">: : : . . : : : : : . : : : : : . : : :</td>
<td style="text-align: left;">150 (100.0%)</td>
<td style="text-align: left;">0 (0.0%)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">5</td>
<td style="text-align: left;">Species [factor]</td>
<td style="text-align: left;">1. setosa 2. versicolor 3. virginica</td>
<td style="text-align: left;">50 (33.3%) 50 (33.3%) 50 (33.3%)</td>
<td style="text-align: left;">IIIIII IIIIII IIIIII</td>
<td style="text-align: left;">150 (100.0%)</td>
<td style="text-align: left;">0 (0.0%)</td>
</tr>
</tbody>
</table>
</section>
<section id="with-images" class="level2">
<h2 class="anchored" data-anchor-id="with-images">With images</h2>
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dfSummary</span>(iris,</span>
<span id="cb3-2">          <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">plain.ascii  =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>, </span>
<span id="cb3-3">          <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">style        =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"grid"</span>, </span>
<span id="cb3-4">          <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">graph.magnif =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.75</span>, </span>
<span id="cb3-5">          <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">valid.col    =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>,</span>
<span id="cb3-6">          <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">tmp.img.dir  =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"plots"</span>)</span></code></pre></div>
<pre><code>temporary images written to '/Users/seb/Documents/Projects/00_websites/sbloggel/posts/2024-09-17-testing-the-package-summarytools/plots'</code></pre>
<section id="data-frame-summary" class="level3">
<h3 class="anchored" data-anchor-id="data-frame-summary">Data Frame Summary</h3>
<section id="iris" class="level4">
<h4 class="anchored" data-anchor-id="iris">iris</h4>
<p><strong>Dimensions:</strong> 150 x 5<br>
<strong>Duplicates:</strong> 1</p>
<table class="table">
<colgroup>
<col style="width: 4%">
<col style="width: 15%">
<col style="width: 23%">
<col style="width: 20%">
<col style="width: 22%">
<col style="width: 9%">
</colgroup>
<thead>
<tr class="header">
<th>No</th>
<th>Variable</th>
<th>Stats / Values</th>
<th>Freqs (% of Valid)</th>
<th>Graph</th>
<th>Missing</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Sepal.Length<br>
[numeric]</td>
<td>Mean (sd) : 5.8 (0.8)<br>
min &lt; med &lt; max:<br>
4.3 &lt; 5.8 &lt; 7.9<br>
IQR (CV) : 1.3 (0.1)</td>
<td>35 distinct values</td>
<td><img src="https://sbloggel.netlify.app/posts/2024-09-17-testing-the-package-summarytools/plots/ds0006.png" class="img-fluid"></td>
<td>0<br>
(0.0%)</td>
</tr>
<tr class="even">
<td>2</td>
<td>Sepal.Width<br>
[numeric]</td>
<td>Mean (sd) : 3.1 (0.4)<br>
min &lt; med &lt; max:<br>
2 &lt; 3 &lt; 4.4<br>
IQR (CV) : 0.5 (0.1)</td>
<td>23 distinct values</td>
<td><img src="https://sbloggel.netlify.app/posts/2024-09-17-testing-the-package-summarytools/plots/ds0007.png" class="img-fluid"></td>
<td>0<br>
(0.0%)</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Petal.Length<br>
[numeric]</td>
<td>Mean (sd) : 3.8 (1.8)<br>
min &lt; med &lt; max:<br>
1 &lt; 4.3 &lt; 6.9<br>
IQR (CV) : 3.5 (0.5)</td>
<td>43 distinct values</td>
<td><img src="https://sbloggel.netlify.app/posts/2024-09-17-testing-the-package-summarytools/plots/ds0008.png" class="img-fluid"></td>
<td>0<br>
(0.0%)</td>
</tr>
<tr class="even">
<td>4</td>
<td>Petal.Width<br>
[numeric]</td>
<td>Mean (sd) : 1.2 (0.8)<br>
min &lt; med &lt; max:<br>
0.1 &lt; 1.3 &lt; 2.5<br>
IQR (CV) : 1.5 (0.6)</td>
<td>22 distinct values</td>
<td><img src="https://sbloggel.netlify.app/posts/2024-09-17-testing-the-package-summarytools/plots/ds0009.png" class="img-fluid"></td>
<td>0<br>
(0.0%)</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Species<br>
[factor]</td>
<td>1. setosa<br>
2. versicolor<br>
3. virginica</td>
<td>50 (33.3%)<br>
50 (33.3%)<br>
50 (33.3%)</td>
<td><img src="https://sbloggel.netlify.app/posts/2024-09-17-testing-the-package-summarytools/plots/ds0010.png" class="img-fluid"></td>
<td>0<br>
(0.0%)</td>
</tr>
</tbody>
</table>


</section>
</section>
</section>

 ]]></description>
  <category>R</category>
  <guid>https://sbloggel.netlify.app/posts/2024-09-17-testing-the-package-summarytools/2024-09-17-testing-the-package-summarytools.html</guid>
  <pubDate>Mon, 16 Sep 2024 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Power analysis</title>
  <link>https://sbloggel.netlify.app/posts/2024-08-05-power-analysis/2024-08-05-power-analysis.html</link>
  <description><![CDATA[ 




<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1">draw_sample <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(x, n) {</span>
<span id="cb1-2">  ii <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sample</span>(x, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> n, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">replace =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span>
<span id="cb1-3">  x[ii]</span>
<span id="cb1-4">}</span>
<span id="cb1-5"></span>
<span id="cb1-6"></span>
<span id="cb1-7">calc_p_value <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(effect_size, n) {</span>
<span id="cb1-8">  dd <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tibble</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rnorm</span>(n), </span>
<span id="cb1-9">               <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rnorm</span>(n, effect_size)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb1-10">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pivot_longer</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">everything</span>())</span>
<span id="cb1-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">t.test</span>(value <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> name, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> dd)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>p.value</span>
<span id="cb1-12">}</span>
<span id="cb1-13"></span>
<span id="cb1-14">calc_power <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Vectorize</span>(</span>
<span id="cb1-15">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(effect_size, n, nr_of_trials) {</span>
<span id="cb1-16">    p_values <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">replicate</span>(nr_of_trials, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">calc_p_value</span>(effect_size, n))</span>
<span id="cb1-17">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">return</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(p_values <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.05</span>))</span>
<span id="cb1-18">  }</span>
<span id="cb1-19">)</span>
<span id="cb1-20"></span>
<span id="cb1-21"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">calc_power</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.25</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1e3</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.053</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1">get_n_needed <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Vectorize</span>(</span>
<span id="cb3-2">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(my_delta, my_power) {</span>
<span id="cb3-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">power.t.test</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">delta =</span> my_delta, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sig.level =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.05</span>,</span>
<span id="cb3-4">                 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">power =</span> my_power)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>n</span>
<span id="cb3-5">  }</span>
<span id="cb3-6">)</span>
<span id="cb3-7"></span>
<span id="cb3-8">dat <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> </span>
<span id="cb3-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expand_grid</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">power =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plogis</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>),</span>
<span id="cb3-10">              <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">effect_size =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">^</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>))) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb3-11">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># slice(1:5) |&gt; </span></span>
<span id="cb3-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n_needed_exact =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">get_n_needed</span>(effect_size, power),</span>
<span id="cb3-13">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n_needed =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ceiling</span>(n_needed_exact),</span>
<span id="cb3-14">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">power_simulated =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">calc_power</span>(effect_size, n_needed, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1e3</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb3-15">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pivot_longer</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cols =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(power, power_simulated))</span>
<span id="cb3-16"></span>
<span id="cb3-17">dat <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb3-18">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(n_needed_exact, value, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> name)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb3-19">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">facet_grid</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cols =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">vars</span>(effect_size), </span>
<span id="cb3-20">             <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">scales =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'free'</span>, </span>
<span id="cb3-21">             <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">labeller =</span> label_both) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb3-22">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_hline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">yintercept =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.8</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">lty =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'dashed'</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb3-23">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_line</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb3-24">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_x_continuous</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">trans =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'log10'</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb3-25">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ylim</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb3-26">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Effect size'</span>)</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://sbloggel.netlify.app/posts/2024-08-05-power-analysis/2024-08-05-power-analysis_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>



 ]]></description>
  <category>R</category>
  <guid>https://sbloggel.netlify.app/posts/2024-08-05-power-analysis/2024-08-05-power-analysis.html</guid>
  <pubDate>Sun, 04 Aug 2024 22:00:00 GMT</pubDate>
</item>
<item>
  <title>VS Code and Jupyter shortcuts</title>
  <link>https://sbloggel.netlify.app/posts/2024-07-23-vs-code-and-jupyter-shortcuts/2024-07-23-vs-code-and-jupyter-shortcuts.html</link>
  <description><![CDATA[ 







 ]]></description>
  <category>R</category>
  <guid>https://sbloggel.netlify.app/posts/2024-07-23-vs-code-and-jupyter-shortcuts/2024-07-23-vs-code-and-jupyter-shortcuts.html</guid>
  <pubDate>Mon, 22 Jul 2024 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Elena’s paper</title>
  <link>https://sbloggel.netlify.app/posts/2024-07-23-paper-elena/cml_python.html</link>
  <description><![CDATA[ 




<section id="elenas-paper" class="level1">
<h1>Elena’s paper</h1>
<p>Started to play with Elena’s paper: <a href="https://www.frontiersin.org/journals/oncology/articles/10.3389/fonc.2022.1028871/full">Link to the paper</a></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://sbloggel.netlify.app/posts/2024-07-23-paper-elena/cml_python_files/figure-html/cell-2-1-image.png" class="img-fluid figure-img"></p>
<figcaption>image.png</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://sbloggel.netlify.app/posts/2024-07-23-paper-elena/cml_python_files/figure-html/cell-3-1-image.png" class="img-fluid figure-img"></p>
<figcaption>image.png</figcaption>
</figure>
</div>
<div id="cell-4" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> pandas <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> pd</span>
<span id="cb1-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> plotnine <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> p9</span>
<span id="cb1-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> numpy <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> np</span>
<span id="cb1-4"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> scipy.integrate <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> odeint</span>
<span id="cb1-5"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> plotnine <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> ggplot, aes, geom_point, geom_line, facet_wrap</span>
<span id="cb1-6">p9.theme_set(p9.theme_bw())</span>
<span id="cb1-7"></span>
<span id="cb1-8"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> dict_to_tuple(x):</span>
<span id="cb1-9">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">tuple</span>(x.values())</span></code></pre></div>
</div>
<div id="cell-5" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> get_p_and_y0(df, d <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, i <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>):</span>
<span id="cb2-2">    pp <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df.iloc[i].to_dict()</span>
<span id="cb2-3">    p <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> {key: pp[key] <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> key <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Pz'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Pyx'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Pxy'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'TKI'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Kz'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Ky'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Py'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'m'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'rz'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'a'</span>]}</span>
<span id="cb2-4">    p[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'d'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> d</span>
<span id="cb2-5">    y_0 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> {key: pp[key] <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> key <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'X(0)'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Y(0)'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Z(0)'</span>]}</span>
<span id="cb2-6">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> p, y_0</span>
<span id="cb2-7"></span>
<span id="cb2-8"></span>
<span id="cb2-9">params_df <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.read_csv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'ParameterSets.csv'</span>)</span>
<span id="cb2-10"></span>
<span id="cb2-11">p, y0 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> get_p_and_y0(params_df, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb2-12">params_df</span></code></pre></div>
<div class="cell-output cell-output-error">
<pre><code>FileNotFoundError: [Errno 2] No such file or directory: 'ParameterSets.csv'</code></pre>
</div>
</div>
<div id="cell-6" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> cml_model(y, t, Pz, Pyx, Pxy, TKI, Kz, Ky, Py, m, rz, a, d):</span>
<span id="cb4-2">    X, Y, Z <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> y</span>
<span id="cb4-3">    dX <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> Pyx <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> Y <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> Pxy <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> X</span>
<span id="cb4-4">    dY <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> Pxy <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> X <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> Pyx <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> Y <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> Py <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> Y <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> Ky) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> Y <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> m <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> Z <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> Y <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> d <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> TKI <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> Y</span>
<span id="cb4-5">    dZ <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> rz <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> Z <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> Pz <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> (Y <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> (Kz <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">**</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> Y <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">**</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> a <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> Z</span>
<span id="cb4-6">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> (dX, dY, dZ)</span></code></pre></div>
</div>
<div id="cell-7" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1">ii <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">tuple</span>(<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">range</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">len</span>(params_df) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>))</span>
<span id="cb5-2">ii <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">tuple</span>(<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">range</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">9</span>))</span></code></pre></div>
</div>
<div id="cell-8" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"></span>
<span id="cb6-2">t <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> np.arange(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.01</span>)</span>
<span id="cb6-3">result_list <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> []</span>
<span id="cb6-4"></span>
<span id="cb6-5"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> i <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> ii:</span>
<span id="cb6-6">    p, y0 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> get_p_and_y0(params_df, i <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> i)</span>
<span id="cb6-7">    result <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> odeint(cml_model, </span>
<span id="cb6-8">                    dict_to_tuple(y0), </span>
<span id="cb6-9">                    t,</span>
<span id="cb6-10">                    args<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>dict_to_tuple(p))</span>
<span id="cb6-11">    df <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.DataFrame(result, columns <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'X'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Y'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Z'</span>])</span>
<span id="cb6-12">    df <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df.assign(t <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> t)</span>
<span id="cb6-13">    df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'PatID'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> i</span>
<span id="cb6-14">    result_list.append(df)</span>
<span id="cb6-15"></span>
<span id="cb6-16">result <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.concat(result_list, ignore_index<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb6-17">result[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'PatID'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> result[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'PatID'</span>].astype(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'category'</span>)</span></code></pre></div>
</div>
<div id="cell-9" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1">result_long <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.melt(result, </span>
<span id="cb7-2">                      id_vars <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'t'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'PatID'</span>], </span>
<span id="cb7-3">                      value_vars <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'X'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Y'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Z'</span>],</span>
<span id="cb7-4">                      value_name <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'cell_count'</span>)</span>
<span id="cb7-5">(</span>
<span id="cb7-6">    ggplot(result_long, aes(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'t'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'cell_count'</span>, color <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'variable'</span>)) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb7-7">    geom_line() <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb7-8">    facet_wrap(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'PatID'</span>)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> p9.scale_y_continuous(trans<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'log10'</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-9">    p9.theme(figure_size<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">9</span>)) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-10">    p9.labs(y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Cell count'</span>, color <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Compartment'</span>)</span>
<span id="cb7-11">)</span>
<span id="cb7-12"></span></code></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://sbloggel.netlify.app/posts/2024-07-23-paper-elena/cml_python_files/figure-html/cell-7-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="cell-10" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1">(</span>
<span id="cb8-2">    ggplot(result, aes(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'t'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Y'</span>, color <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'PatID'</span>)) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb8-3">    geom_line() <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> p9.scale_y_continuous(trans<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'log10'</span>)</span>
<span id="cb8-4">)</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://sbloggel.netlify.app/posts/2024-07-23-paper-elena/cml_python_files/figure-html/cell-8-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://sbloggel.netlify.app/posts/2024-07-23-paper-elena/cml_python_files/figure-html/cell-11-1-image.png" class="img-fluid figure-img"></p>
<figcaption>image.png</figcaption>
</figure>
</div>
<div id="cell-12" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> LRATIO(Y, KY<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1e6</span>):</span>
<span id="cb9-2">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> Y <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> (Y <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> (KY <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> Y))</span>
<span id="cb9-3"></span>
<span id="cb9-4">result[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'LRATIO'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> LRATIO(result[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Y"</span>])</span>
<span id="cb9-5"></span>
<span id="cb9-6">(</span>
<span id="cb9-7">    ggplot(result, aes(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'t'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'LRATIO'</span>, color<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'PatID'</span>)) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb9-8">    geom_line() <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> p9.scale_y_continuous(trans<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'log10'</span>, </span>
<span id="cb9-9">                                        breaks<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1e-1</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1e-2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1e-3</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1e-4</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1e-5</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1e-6</span>), </span>
<span id="cb9-10">                                        labels<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'MR0 (100%)'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'MR1 (10%)'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'MR2 (1%)'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'MR3 (0.1%)'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'MR4 (0.01%)'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'MR5 (0.001%)'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'MR6 (0.0001)'</span>)) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-11">    p9.theme(figure_size<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>))</span>
<span id="cb9-12">)</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://sbloggel.netlify.app/posts/2024-07-23-paper-elena/cml_python_files/figure-html/cell-9-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>


</section>

 ]]></description>
  <category>Python</category>
  <guid>https://sbloggel.netlify.app/posts/2024-07-23-paper-elena/cml_python.html</guid>
  <pubDate>Mon, 22 Jul 2024 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Eisen</title>
  <link>https://sbloggel.netlify.app/posts/2024-07-09-eisen/2024-07-09-eisen.html</link>
  <description><![CDATA[ 




<section id="wieviel-eisen-brauchen-wir-am-tag" class="level2">

<ul>
<li>Kinder 8-10 mg pro Tag</li>
<li>Erwachsene 10-15 mg pro Tag</li>
<li><a href="https://www.bfr.bund.de/cd/28366">Quelle</a></li>
</ul>
</section>
<section id="floradix" class="level2">
<h2 class="anchored" data-anchor-id="floradix">Floradix</h2>
<ul>
<li>100 ml enthalten 80 mg Eisen</li>
<li>2 * 20 ml (großes Schapsglas) ldecken ganz grob etwa die Hälfte des wöchentlichen Eisenbedarfs
<ul>
<li>Samstag und Sonntag zum Frühstück für jeden ein Schnapsglas
<ul>
<li>-&gt; 160 ml pro Woche -&gt; Kosten von ca. 260 Euro pro Jahr</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="ferrosanol" class="level2">
<h2 class="anchored" data-anchor-id="ferrosanol">Ferrosanol</h2>
<ul>
<li><a href="https://www.shop-apotheke.com/arzneimittel/2799421/ferro-sanol-duodenal.htm">Quelle</a></li>
<li>Menge pro Kapsel: ca. 100 mg, 1 - 3 Kapseln pro Tag empfohlen</li>
</ul>


</section>

 ]]></description>
  <category>R</category>
  <guid>https://sbloggel.netlify.app/posts/2024-07-09-eisen/2024-07-09-eisen.html</guid>
  <pubDate>Mon, 08 Jul 2024 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Video test</title>
  <link>https://sbloggel.netlify.app/posts/2024-07-08-video-test/2024-07-08-video-test.html</link>
  <description><![CDATA[ 




<p>Videos are about 300 kB per second -&gt; 20 MB per minute</p>
<p>I don’t know if there is a limit on github for videos?</p>
<div class="quarto-video"><video id="video_shortcode_videojs_video1" class="video-js vjs-default-skin vjs-fluid" controls="" preload="auto" data-setup="{}" title=""><source src="test_video_3.mp4"></video></div>



 ]]></description>
  <category>Mishmash</category>
  <guid>https://sbloggel.netlify.app/posts/2024-07-08-video-test/2024-07-08-video-test.html</guid>
  <pubDate>Sun, 07 Jul 2024 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Fitting nonlinear models with stats::nls and nlme::nlme</title>
  <link>https://sbloggel.netlify.app/posts/2024-06-22-nonlinear-least-squares/2024-06-22-nonlinear-least-squares.html</link>
  <description><![CDATA[ 




<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">set.seed</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'tidyverse'</span>)</span></code></pre></div>
</div>
<section id="nonlinear-model" class="level2">
<h2 class="anchored" data-anchor-id="nonlinear-model">Nonlinear model</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1">n <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span></span>
<span id="cb2-2"></span>
<span id="cb2-3">pp <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb2-4">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">a =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span>,</span>
<span id="cb2-5">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">b =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>,</span>
<span id="cb2-6">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">c =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>,</span>
<span id="cb2-7">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">d =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span></span>
<span id="cb2-8">)</span>
<span id="cb2-9"></span>
<span id="cb2-10">dat <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tibble</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">length.out =</span> n), </span>
<span id="cb2-11">              <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> pp<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>a <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">exp</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>pp<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>b <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> x) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> pp<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>c <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> x <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> pp<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>d <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rnorm</span>(n))</span>
<span id="cb2-12"></span>
<span id="cb2-13">dat <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb2-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(x, y)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb2-15">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>()</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://sbloggel.netlify.app/posts/2024-06-22-nonlinear-least-squares/2024-06-22-nonlinear-least-squares_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1">(fm <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nls</span>(y <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> a <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">exp</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>b <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> x) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> c <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> x <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> d, </span>
<span id="cb3-2">           <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> dat, </span>
<span id="cb3-3">           <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">start =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">a =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">b =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">c =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">d =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Nonlinear regression model
  model: y ~ a * exp(-b * x) + c * x + d
   data: dat
     a      b      c      d 
26.203  2.234  1.257  8.979 
 residual sum-of-squares: 79.7

Number of iterations to convergence: 11 
Achieved convergence tolerance: 2.134e-06</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">confint</span>(fm)</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Waiting for profiling to be done...</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>        2.5%     97.5%
a  17.289488 71.226314
b   1.050279  3.484257
c  -6.478915 25.108991
d -36.529815 18.234934</code></pre>
</div>
</div>
</section>
<section id="nonlinear-model-with-mixed-effects" class="level2">
<h2 class="anchored" data-anchor-id="nonlinear-model-with-mixed-effects">Nonlinear model with mixed effects</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'nlme'</span>)</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'nlme'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:dplyr':

    collapse</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1">pp <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb11-2">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">a =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span>,</span>
<span id="cb11-3">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">b =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>,</span>
<span id="cb11-4">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">c =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>,</span>
<span id="cb11-5">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">d =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span></span>
<span id="cb11-6">)</span>
<span id="cb11-7"></span>
<span id="cb11-8"></span>
<span id="cb11-9">nr_of_time_points <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">101</span></span>
<span id="cb11-10">nr_of_individuals <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span></span>
<span id="cb11-11"></span>
<span id="cb11-12">dat <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tibble</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ID =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>nr_of_individuals,</span>
<span id="cb11-13">              <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">a =</span> pp<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>a <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rnorm</span>(nr_of_individuals, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>),</span>
<span id="cb11-14">              <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">b =</span> pp<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>b,</span>
<span id="cb11-15">              <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">c =</span> pp<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>c,</span>
<span id="cb11-16">              <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">d =</span> pp<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>d) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb11-17">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expand_grid</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">length.out =</span> nr_of_time_points)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb11-18">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb11-19">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ID_F =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'ID'</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">format</span>(ID, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">justify =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'right'</span>))),</span>
<span id="cb11-20">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> a <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">exp</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>b <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> x) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> c <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> x <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> d <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rnorm</span>(nr_of_individuals <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> nr_of_time_points))</span>
<span id="cb11-21"></span>
<span id="cb11-22"></span>
<span id="cb11-23">dat <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb11-24">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(ID <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb11-25">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(x, y, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> ID_F)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb11-26">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>()</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://sbloggel.netlify.app/posts/2024-06-22-nonlinear-least-squares/2024-06-22-nonlinear-least-squares_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nlme</span>(y <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> a <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">exp</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>b <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> x) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> c <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> x <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> d,</span>
<span id="cb12-2">     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fixed =</span> a <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> b <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> c <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> d <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,</span>
<span id="cb12-3">     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">random =</span> a <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|</span> ID,</span>
<span id="cb12-4">     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> dat,</span>
<span id="cb12-5">     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">start =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">a =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">b =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">c =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">d =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Nonlinear mixed-effects model fit by maximum likelihood
  Model: y ~ a * exp(-b * x) + c * x + d 
  Data: dat 
  Log-likelihood: -14904.82
  Fixed: a + b + c + d ~ 1 
        a         b         c         d 
29.458550  1.998029  4.149341  4.816751 

Random effects:
 Formula: a ~ 1 | ID
               a Residual
StdDev: 19.04709 1.011844

Number of Observations: 10100
Number of Groups: 100 </code></pre>
</div>
</div>


</section>

 ]]></description>
  <category>R</category>
  <guid>https://sbloggel.netlify.app/posts/2024-06-22-nonlinear-least-squares/2024-06-22-nonlinear-least-squares.html</guid>
  <pubDate>Fri, 21 Jun 2024 22:00:00 GMT</pubDate>
</item>
<item>
  <title>WebAssembly experiment</title>
  <link>https://sbloggel.netlify.app/posts/2024-05-03-webassembly-experiment/2024-05-03-webassembly-experiment.html</link>
  <description><![CDATA[ 
<script src="https://cdn.jsdelivr.net/npm/monaco-editor@0.47.0/min/vs/loader.js"></script>
<script type="module" id="qwebr-monaco-editor-init">

  // Configure the Monaco Editor's loader
  require.config({
    paths: {
      'vs': 'https://cdn.jsdelivr.net/npm/monaco-editor@0.47.0/min/vs'
    }
  });
</script>
<script type="module">
// Function to update Monaco Editors when body class changes
function updateMonacoEditorsOnBodyClassChange() {
    // Select the body element
    const body = document.querySelector('body');

    // Options for the observer (which mutations to observe)
    const observerOptions = {
        attributes: true,  // Observe changes to attributes
        attributeFilter: ['class'] // Only observe changes to the 'class' attribute
    };

    // Callback function to execute when mutations are observed
    const bodyClassChangeCallback = function(mutationsList, observer) {
        for(let mutation of mutationsList) {
            if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
                // Class attribute has changed
                // Update all Monaco Editors on the page
                updateMonacoEditorTheme();
            }
        }
    };

    // Create an observer instance linked to the callback function
    const observer = new MutationObserver(bodyClassChangeCallback);

    // Start observing the target node for configured mutations
    observer.observe(body, observerOptions);
}

// Function to update all instances of Monaco Editors on the page
function updateMonacoEditorTheme() {
    // Determine what VS Theme to use
    const vsThemeToUse = document.body.classList.contains("quarto-dark") ? 'vs-dark' : 'vs' ;

    // Iterate through all initialized Monaco Editors
    qwebrEditorInstances.forEach( function(editorInstance) { 
        editorInstance.updateOptions({ theme: vsThemeToUse }); 
    });
}

// Call the function to start observing changes to body class
updateMonacoEditorsOnBodyClassChange();
</script>
<script type="module">
// Global array to store Monaco Editor instances
globalThis.qwebrEditorInstances = [];

// Function that builds and registers a Monaco Editor instance    
globalThis.qwebrCreateMonacoEditorInstance = function (cellData) {

  const initialCode = cellData.code;
  const qwebrCounter = cellData.id;
  const qwebrOptions = cellData.options;

  // Retrieve the previously created document elements
  let runButton = document.getElementById(`qwebr-button-run-${qwebrCounter}`);
  let resetButton = document.getElementById(`qwebr-button-reset-${qwebrCounter}`);
  let copyButton = document.getElementById(`qwebr-button-copy-${qwebrCounter}`);
  let editorDiv = document.getElementById(`qwebr-editor-${qwebrCounter}`);

  // Load the Monaco Editor and create an instance
  let editor;
  require(['vs/editor/editor.main'], function () {
    editor = monaco.editor.create(editorDiv, {
      value: initialCode,
      language: 'r',
      theme: 'vs-light',
      automaticLayout: true,           // Works wonderfully with RevealJS
      scrollBeyondLastLine: false,
      minimap: {
        enabled: false
      },
      fontSize: qwebrScaledFontSize(editorDiv, qwebrOptions),         
      renderLineHighlight: "none",      // Disable current line highlighting
      hideCursorInOverviewRuler: true,  // Remove cursor indictor in right hand side scroll bar
      readOnly: qwebrOptions['read-only'] ?? false,
      quickSuggestions: qwebrOptions['editor-quick-suggestions'] ?? false
    });

    // Store the official counter ID to be used in keyboard shortcuts
    editor.__qwebrCounter = qwebrCounter;

    // Store the official div container ID
    editor.__qwebrEditorId = `qwebr-editor-${qwebrCounter}`;

    // Store the initial code value and options
    editor.__qwebrinitialCode = initialCode;
    editor.__qwebrOptions = qwebrOptions;

    // Set at the model level the preferred end of line (EOL) character to LF.
    // This prevent `\r\n` from being given to the webR engine if the user is on Windows.
    // See details in: https://github.com/coatless/quarto-webr/issues/94
    // Associated error text: 
    // Error: <text>:1:7 unexpected input

    // Retrieve the underlying model
    const model = editor.getModel();
    // Set EOL for the model
    model.setEOL(monaco.editor.EndOfLineSequence.LF);

    // Dynamically modify the height of the editor window if new lines are added.
    let ignoreEvent = false;
    const updateHeight = () => {
      // Increment editor height by 2 to prevent vertical scroll bar from appearing
      const contentHeight = editor.getContentHeight() + 2;

      // Retrieve editor-max-height option
      const maxEditorHeight = qwebrOptions['editor-max-height'];

      // If editor-max-height is missing, allow infinite growth. Otherwise, threshold.
      const editorHeight = !maxEditorHeight ?  contentHeight : Math.min(contentHeight, maxEditorHeight);

      // We're avoiding a width change
      //editorDiv.style.width = `${width}px`;
      editorDiv.style.height = `${editorHeight}px`;
      try {
        ignoreEvent = true;

        // The key to resizing is this call
        editor.layout();
      } finally {
        ignoreEvent = false;
      }
    };

    // Helper function to check if selected text is empty
    function isEmptyCodeText(selectedCodeText) {
      return (selectedCodeText === null || selectedCodeText === undefined || selectedCodeText === "");
    }

    // Registry of keyboard shortcuts that should be re-added to each editor window
    // when focus changes.
    const addWebRKeyboardShortCutCommands = () => {
      // Add a keydown event listener for Shift+Enter to run all code in cell
      editor.addCommand(monaco.KeyMod.Shift | monaco.KeyCode.Enter, () => {

        // Retrieve all text inside the editor
        qwebrExecuteCode(editor.getValue(), editor.__qwebrCounter, editor.__qwebrOptions);
      });

      // Add a keydown event listener for CMD/Ctrl+Enter to run selected code
      editor.addCommand(monaco.KeyMod.CtrlCmd | monaco.KeyCode.Enter, () => {

        // Get the selected text from the editor
        const selectedText = editor.getModel().getValueInRange(editor.getSelection());
        // Check if no code is selected
        if (isEmptyCodeText(selectedText)) {
          // Obtain the current cursor position
          let currentPosition = editor.getPosition();
          // Retrieve the current line content
          let currentLine = editor.getModel().getLineContent(currentPosition.lineNumber);

          // Propose a new position to move the cursor to
          let newPosition = new monaco.Position(currentPosition.lineNumber + 1, 1);

          // Check if the new position is beyond the last line of the editor
          if (newPosition.lineNumber > editor.getModel().getLineCount()) {
            // Add a new line at the end of the editor
            editor.executeEdits("addNewLine", [{
            range: new monaco.Range(newPosition.lineNumber, 1, newPosition.lineNumber, 1),
            text: "\n", 
            forceMoveMarkers: true,
            }]);
          }
          
          // Run the entire line of code.
          qwebrExecuteCode(currentLine, editor.__qwebrCounter, editor.__qwebrOptions);

          // Move cursor to new position
          editor.setPosition(newPosition);
        } else {
          // Code to run when Ctrl+Enter is pressed with selected code
          qwebrExecuteCode(selectedText, editor.__qwebrCounter, editor.__qwebrOptions);
        }
      });
    }

    // Register an on focus event handler for when a code cell is selected to update
    // what keyboard shortcut commands should work.
    // This is a workaround to fix a regression that happened with multiple
    // editor windows since Monaco 0.32.0 
    // https://github.com/microsoft/monaco-editor/issues/2947
    editor.onDidFocusEditorText(addWebRKeyboardShortCutCommands);

    // Register an on change event for when new code is added to the editor window
    editor.onDidContentSizeChange(updateHeight);

    // Manually re-update height to account for the content we inserted into the call
    updateHeight();

    // Store the editor instance in the global dictionary
    qwebrEditorInstances[editor.__qwebrCounter] = editor;

  });

  // Add a click event listener to the run button
  runButton.onclick = function () {
    qwebrExecuteCode(editor.getValue(), editor.__qwebrCounter, editor.__qwebrOptions);
  };

  // Add a click event listener to the reset button
  copyButton.onclick = function () {
    // Retrieve current code data
    const data = editor.getValue();
    
    // Write code data onto the clipboard.
    navigator.clipboard.writeText(data || "");
  };
  
  // Add a click event listener to the copy button
  resetButton.onclick = function () {
    editor.setValue(editor.__qwebrinitialCode);
  };
  
}
</script>




<ul>
<li>Link to source code: <a href="https://github.com/jperkel/jperkel.github.io/blob/main/webr-demo.qmd">Link</a></li>
<li>Link to Nature article: <a href="https://www.nature.com/articles/d41586-024-00725-1">Link</a></li>
</ul>
<div id="qwebr-insertion-location-1"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>



 ]]></description>
  <category>R</category>
  <guid>https://sbloggel.netlify.app/posts/2024-05-03-webassembly-experiment/2024-05-03-webassembly-experiment.html</guid>
  <pubDate>Thu, 02 May 2024 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Legends in ggplot2</title>
  <link>https://sbloggel.netlify.app/posts/2024-05-03-legends-in-ggplot2/2024-05-03-legends-in-ggplot2.html</link>
  <description><![CDATA[ 




<p><a href="https://www.data03.online/2024/04/guide-to-remove-legends-in-ggplot2-in-r.html">Blog post</a></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Change order of multiple guides:</span></span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(diamonds, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> carat, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> price, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> cut, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">shape =</span> clarity)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb1-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb1-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Quality"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">shape =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Clarity Grade"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb1-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">guides</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">shape =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">guide_legend</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">order =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>),</span>
<span id="cb1-6">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">guide_legend</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">order =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>))</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Using shapes for an ordinal variable is not advised</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The shape palette can deal with a maximum of 6 discrete values because more
than 6 becomes difficult to discriminate
ℹ you have requested 8 values. Consider specifying shapes manually if you need
  that many have them.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 5445 rows containing missing values (`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://sbloggel.netlify.app/posts/2024-05-03-legends-in-ggplot2/2024-05-03-legends-in-ggplot2_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Remove a legend:</span></span>
<span id="cb5-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(mtcars, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> disp, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> mpg, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(gear))) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb5-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>()<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb5-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.position =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"none"</span>)</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://sbloggel.netlify.app/posts/2024-05-03-legends-in-ggplot2/2024-05-03-legends-in-ggplot2_files/figure-html/unnamed-chunk-2-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Removing the Legend for a Specific Aesthetic</span></span>
<span id="cb6-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(mtcars, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> disp, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> mpg, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(am), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">shape =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(cyl))) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb6-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">guides</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">shape =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"none"</span>) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Target the shape legend for removal</span></span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://sbloggel.netlify.app/posts/2024-05-03-legends-in-ggplot2/2024-05-03-legends-in-ggplot2_files/figure-html/unnamed-chunk-2-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Change legend position:</span></span>
<span id="cb7-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(diamonds, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> carat, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> price, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> cut)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.position =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"right"</span>) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Legend on the right</span></span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://sbloggel.netlify.app/posts/2024-05-03-legends-in-ggplot2/2024-05-03-legends-in-ggplot2_files/figure-html/unnamed-chunk-2-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(diamonds, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> carat, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> price, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> cut)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.position =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.9</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.2</span>)) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Custom coordinates</span></span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://sbloggel.netlify.app/posts/2024-05-03-legends-in-ggplot2/2024-05-03-legends-in-ggplot2_files/figure-html/unnamed-chunk-2-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Modifying Legend Title and Text</span></span>
<span id="cb9-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(diamonds, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> carat, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> price, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> cut)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Diamond Quality"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Change title</span></span>
<span id="cb9-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_color_discrete</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">labels =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Good"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Very Good"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Premium"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Ideal"</span>)) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Update labels</span></span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://sbloggel.netlify.app/posts/2024-05-03-legends-in-ggplot2/2024-05-03-legends-in-ggplot2_files/figure-html/unnamed-chunk-2-6.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>



 ]]></description>
  <category>R</category>
  <guid>https://sbloggel.netlify.app/posts/2024-05-03-legends-in-ggplot2/2024-05-03-legends-in-ggplot2.html</guid>
  <pubDate>Thu, 02 May 2024 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Type I and type II errors</title>
  <link>https://sbloggel.netlify.app/posts/2024-04-22-type-i-and-type-ii-errors/2024-04-22-type-i-and-type-ii-errors.html</link>
  <description><![CDATA[ 




<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1">nr_of_trials <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span></span>
<span id="cb1-2"></span>
<span id="cb1-3">calc_p <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Vectorize</span>(</span>
<span id="cb1-4">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(effect_size, n) {</span>
<span id="cb1-5">    y1 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rnorm</span>(n)</span>
<span id="cb1-6">    y2 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rnorm</span>(n, effect_size)</span>
<span id="cb1-7">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">t.test</span>(y1, y2)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>p.value</span>
<span id="cb1-8">  }</span>
<span id="cb1-9">)</span>
<span id="cb1-10"></span>
<span id="cb1-11"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">calc_p</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.01657786</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1">dat <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tibble</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">effect_size =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rep</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, nr_of_trials), <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rexp</span>(nr_of_trials)),</span>
<span id="cb3-2">              <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">effect_present =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rep</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'No'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Yes'</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">each =</span> nr_of_trials),</span>
<span id="cb3-3">              <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>,</span>
<span id="cb3-4">              <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">p =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">calc_p</span>(effect_size, nr_of_trials))</span>
<span id="cb3-5"></span>
<span id="cb3-6"></span>
<span id="cb3-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sort</span>(dat<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>p))</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://sbloggel.netlify.app/posts/2024-04-22-type-i-and-type-ii-errors/2024-04-22-type-i-and-type-ii-errors_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1">dat <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb4-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(effect_size, p, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> effect_present)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb4-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_smooth</span>()</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using method = 'loess' and formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://sbloggel.netlify.app/posts/2024-04-22-type-i-and-type-ii-errors/2024-04-22-type-i-and-type-ii-errors_files/figure-html/unnamed-chunk-2-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>



 ]]></description>
  <category>R</category>
  <guid>https://sbloggel.netlify.app/posts/2024-04-22-type-i-and-type-ii-errors/2024-04-22-type-i-and-type-ii-errors.html</guid>
  <pubDate>Sun, 21 Apr 2024 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Clone size distributions</title>
  <link>https://sbloggel.netlify.app/posts/2024-03-27-clone-size-distributions/2024-03-27-clone-size-distributions.html</link>
  <description><![CDATA[ 




<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> numpy <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> np</span>
<span id="cb1-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> pandas <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> pd</span>
<span id="cb1-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> random</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1">n <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span></span>
<span id="cb2-2">nr_of_steps <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000000</span></span>
<span id="cb2-3">cell_ids <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> np.zeros((nr_of_steps <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, n))</span>
<span id="cb2-4">cell_ids[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, ] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">range</span>(n)</span>
<span id="cb2-5"></span>
<span id="cb2-6"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> i <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">range</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, nr_of_steps <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>):</span>
<span id="cb2-7">  cell_ids[i, ] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> cell_ids[i <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, ]</span>
<span id="cb2-8">  ii_death <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> random.randint(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, n <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb2-9">  ii_birth <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> random.randint(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, n <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb2-10">  cell_ids[i, ii_death] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> cell_ids[i <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, ii_birth]</span>
<span id="cb2-11"></span>
<span id="cb2-12">np.column_stack(np.unique(cell_ids[nr_of_steps], return_counts<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>array([[ 857., 1000.]])</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1">n <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span></span>
<span id="cb4-2">nr_of_steps <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span></span>
<span id="cb4-3">cell_ids <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> np.arange(n)</span>
<span id="cb4-4"></span>
<span id="cb4-5"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> i <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">range</span>(nr_of_steps):</span>
<span id="cb4-6">  ii_death <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> random.randint(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, n <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb4-7">  ii_birth <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> random.randint(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, n <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb4-8">  cell_ids[ii_death] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> cell_ids[ii_birth]</span>
<span id="cb4-9"></span>
<span id="cb4-10">np.column_stack(np.unique(cell_ids, return_counts<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>array([[ 0,  7],
       [ 4,  6],
       [ 5,  3],
       [18,  4]])</code></pre>
</div>
</div>



 ]]></description>
  <category>R</category>
  <guid>https://sbloggel.netlify.app/posts/2024-03-27-clone-size-distributions/2024-03-27-clone-size-distributions.html</guid>
  <pubDate>Tue, 26 Mar 2024 23:00:00 GMT</pubDate>
</item>
<item>
  <title>Simulating data in Python</title>
  <link>https://sbloggel.netlify.app/posts/2024-01-22-simulating-data-in-python/2024-01-22-simulating-data-in-python.html</link>
  <description><![CDATA[ 




<section id="which-environment" class="level2">
<h2 class="anchored" data-anchor-id="which-environment">Which environment?</h2>
<div id="014a79f2" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> sys</span>
<span id="cb1-2"></span>
<span id="cb1-3"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> get_env():</span>
<span id="cb1-4">    sp <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> sys.path[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>].split(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/"</span>)</span>
<span id="cb1-5">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"envs"</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> sp:</span>
<span id="cb1-6">        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> sp[sp.index(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"envs"</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]</span>
<span id="cb1-7">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span>:</span>
<span id="cb1-8">        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span></span>
<span id="cb1-9"></span>
<span id="cb1-10">get_env()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>'fast_ai_course_2022'</code></pre>
</div>
</div>
</section>
<section id="importing-the-required-libraries" class="level2">
<h2 class="anchored" data-anchor-id="importing-the-required-libraries">Importing the required libraries</h2>
<div id="09e06fd5" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> numpy <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> np</span>
<span id="cb3-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> pandas <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> pd</span>
<span id="cb3-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> seaborn <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> sns</span>
<span id="cb3-4"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> matplotlib.pyplot <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> plt</span>
<span id="cb3-5"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> patsy <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> dmatrices, dmatrix</span></code></pre></div>
</div>
</section>
<section id="simulating-the-data" class="level2">
<h2 class="anchored" data-anchor-id="simulating-the-data">Simulating the data</h2>
<div id="290a0ab0" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1">n <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span></span>
<span id="cb4-2">sd <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span></span>
<span id="cb4-3"></span>
<span id="cb4-4">dat <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.DataFrame()</span>
<span id="cb4-5">dat[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"x1"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> np.random.normal(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>, n)</span>
<span id="cb4-6">dat[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"x2"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> np.random.normal(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>, n)</span>
<span id="cb4-7">dat[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"x3"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> np.random.choice([<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"A"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"B"</span>], size<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>n, replace<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb4-8">dat[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"epsilon"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> np.random.normal(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, sd, n)</span>
<span id="cb4-9">X <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> dmatrix(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">" ~ x1 + x2 + x3"</span>, dat)</span>
<span id="cb4-10">X.design_info.column_names</span>
<span id="cb4-11">beta <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">14</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">50</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>]</span></code></pre></div>
</div>
<div id="b14053ae" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1">dat[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"y"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> np.matmul(X, beta) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> dat[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"epsilon"</span>]</span>
<span id="cb5-2">dat</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">x1</th>
<th data-quarto-table-cell-role="th">x2</th>
<th data-quarto-table-cell-role="th">x3</th>
<th data-quarto-table-cell-role="th">epsilon</th>
<th data-quarto-table-cell-role="th">y</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>-7.579337</td>
<td>-1.600375</td>
<td>B</td>
<td>1.394259</td>
<td>61.015673</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>1.827419</td>
<td>1.912467</td>
<td>B</td>
<td>-2.066038</td>
<td>59.936446</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>0.916864</td>
<td>3.079072</td>
<td>B</td>
<td>-2.647573</td>
<td>56.111148</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>-8.580745</td>
<td>11.137583</td>
<td>B</td>
<td>-0.409475</td>
<td>32.734615</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>11.100234</td>
<td>4.150596</td>
<td>B</td>
<td>0.588830</td>
<td>67.387871</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">95</td>
<td>-5.862918</td>
<td>-7.058553</td>
<td>B</td>
<td>-1.026161</td>
<td>71.228028</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">96</td>
<td>3.791414</td>
<td>2.979757</td>
<td>A</td>
<td>-2.858461</td>
<td>8.973439</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">97</td>
<td>4.200092</td>
<td>3.668948</td>
<td>B</td>
<td>-1.505371</td>
<td>59.356825</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">98</td>
<td>-0.381726</td>
<td>-1.413223</td>
<td>B</td>
<td>2.492208</td>
<td>68.936928</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">99</td>
<td>-6.374441</td>
<td>-0.552026</td>
<td>A</td>
<td>3.637649</td>
<td>12.367261</td>
</tr>
</tbody>
</table>

<p>100 rows × 5 columns</p>
</div>
</div>
</div>
</div>
</section>
<section id="showing-the-data" class="level2">
<h2 class="anchored" data-anchor-id="showing-the-data">Showing the data</h2>
<div id="e51e59d8" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1">sns.scatterplot(data<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>dat, x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"x1"</span>, y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"y"</span>)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span></code></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://sbloggel.netlify.app/posts/2024-01-22-simulating-data-in-python/2024-01-22-simulating-data-in-python_files/figure-html/cell-6-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="a9065859" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1">sns.scatterplot(data<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>dat, x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"x2"</span>, y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"y"</span>)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span></code></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://sbloggel.netlify.app/posts/2024-01-22-simulating-data-in-python/2024-01-22-simulating-data-in-python_files/figure-html/cell-7-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="f94f8fd3" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1">sns.scatterplot(data<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>dat, x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"x2"</span>, y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"y"</span>, hue<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"x3"</span>)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span></code></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://sbloggel.netlify.app/posts/2024-01-22-simulating-data-in-python/2024-01-22-simulating-data-in-python_files/figure-html/cell-8-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>


</section>

 ]]></description>
  <category>Python</category>
  <guid>https://sbloggel.netlify.app/posts/2024-01-22-simulating-data-in-python/2024-01-22-simulating-data-in-python.html</guid>
  <pubDate>Sun, 21 Jan 2024 23:00:00 GMT</pubDate>
</item>
<item>
  <title>Plotnine and sample data sets from statsmodels</title>
  <link>https://sbloggel.netlify.app/posts/2024-01-15-plotnine-and-sample-data-sets-from-statsmodels/2024-01-15-plotnine-and-sample-data-sets-from-statsmodels.html</link>
  <description><![CDATA[ 




<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> statsmodels.api <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> sm</span>
<span id="cb1-2">cars <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> sm.datasets.get_rdataset(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"cars"</span>)[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data"</span>]</span>
<span id="cb1-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> plotnine <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> ggplot, aes, geom_point</span>
<span id="cb1-4">p <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> ggplot(cars, aes(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"speed"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dist"</span>)) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> geom_point()</span>
<span id="cb1-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># p.save("test.pdf", width = 24, height = 24)</span></span>
<span id="cb1-6">p</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;Figure Size: (640 x 480)&gt;</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://sbloggel.netlify.app/posts/2024-01-15-plotnine-and-sample-data-sets-from-statsmodels/2024-01-15-plotnine-and-sample-data-sets-from-statsmodels_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid figure-img" width="614"></p>
</figure>
</div>
</div>
</div>



 ]]></description>
  <category>Python</category>
  <guid>https://sbloggel.netlify.app/posts/2024-01-15-plotnine-and-sample-data-sets-from-statsmodels/2024-01-15-plotnine-and-sample-data-sets-from-statsmodels.html</guid>
  <pubDate>Sun, 14 Jan 2024 23:00:00 GMT</pubDate>
</item>
<item>
  <title>Understanding competing risks</title>
  <link>https://sbloggel.netlify.app/posts/2023-11-19-understanding-competing-risks/2023-11-19-understanding-competing-risks.html</link>
  <description><![CDATA[ 




<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">set.seed</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse)</span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(survival)</span></code></pre></div>
</div>
<ul>
<li>Kaplan-Meier-Estimator:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1">n <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span></span>
<span id="cb2-2">dat <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> </span>
<span id="cb2-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tibble</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">t_event_1 =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rexp</span>(n), </span>
<span id="cb2-4">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">t_event_2 =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rexp</span>(n), </span>
<span id="cb2-5">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">t_observed =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pmin</span>(t_event_1, t_event_2), </span>
<span id="cb2-6">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">event =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(t_event_1 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span> t_event_2, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>),</span>
<span id="cb2-7">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">status_event_1 =</span> t_event_1 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span> t_event_2, </span>
<span id="cb2-8">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">status_event_2 =</span> t_event_2 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span> t_event_1) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb2-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(t_observed)</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1">s_event_1 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">with</span>(dat, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">survfit</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Surv</span>(dat<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>t_event_1, status_event_1) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>))</span>
<span id="cb3-2">s_event_2 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">with</span>(dat, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">survfit</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Surv</span>(dat<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>t_event_2, status_event_2) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>))</span>
<span id="cb3-3">                                    </span>
<span id="cb3-4">inc_event_1 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">stepfun</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(s_event_1<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>time), <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> s_event_1<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>surv))</span>
<span id="cb3-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot</span>(inc_event_1)</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://sbloggel.netlify.app/posts/2023-11-19-understanding-competing-risks/2023-11-19-understanding-competing-risks_files/figure-html/competing_risks_km-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1">inc_event_2 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">stepfun</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(s_event_2<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>time), <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> s_event_2<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>surv))</span>
<span id="cb4-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot</span>(inc_event_2)</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://sbloggel.netlify.app/posts/2023-11-19-understanding-competing-risks/2023-11-19-understanding-competing-risks_files/figure-html/competing_risks_km-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot</span>(<span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(x) <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">inc_event_1</span>(x) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">inc_event_2</span>(x), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">from =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">to =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>)</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://sbloggel.netlify.app/posts/2023-11-19-understanding-competing-risks/2023-11-19-understanding-competing-risks_files/figure-html/competing_risks_km-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1">s_event_1 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">with</span>(dat, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">survfit</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Surv</span>(dat<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>t_event_1) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>))</span>
<span id="cb6-2">s_event_2 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">with</span>(dat, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">survfit</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Surv</span>(dat<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>t_event_2) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>))</span>
<span id="cb6-3"></span>
<span id="cb6-4">inc_event_1 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">stepfun</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(s_event_1<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>time), <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> s_event_1<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>surv))</span>
<span id="cb6-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot</span>(inc_event_1)</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://sbloggel.netlify.app/posts/2023-11-19-understanding-competing-risks/2023-11-19-understanding-competing-risks_files/figure-html/without_censoring-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1">inc_event_2 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">stepfun</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(s_event_2<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>time), <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> s_event_2<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>surv))</span>
<span id="cb7-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot</span>(inc_event_2)</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://sbloggel.netlify.app/posts/2023-11-19-understanding-competing-risks/2023-11-19-understanding-competing-risks_files/figure-html/without_censoring-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot</span>(<span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(x) <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">inc_event_1</span>(x) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">inc_event_2</span>(x), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">from =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">to =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>)</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://sbloggel.netlify.app/posts/2023-11-19-understanding-competing-risks/2023-11-19-understanding-competing-risks_files/figure-html/without_censoring-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1">dd <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tibble</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">event_id =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>n, </span>
<span id="cb9-2">             <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">no_event =</span> n<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,</span>
<span id="cb9-3">             <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">event_1 =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,</span>
<span id="cb9-4">             <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">event_2 =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,</span>
<span id="cb9-5">             <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">time =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, dat<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>t_observed))</span>
<span id="cb9-6"></span>
<span id="cb9-7"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> (i <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>n) {</span>
<span id="cb9-8">  dd<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>event_1[i <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> dd<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>event_1[i] <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(dat<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>event[i] <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)</span>
<span id="cb9-9">  dd<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>event_2[i <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> dd<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>event_2[i] <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(dat<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>event[i] <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)</span>
<span id="cb9-10">}</span>
<span id="cb9-11"></span>
<span id="cb9-12">dd <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb9-13">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pivot_longer</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(no_event, event_1, event_2)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb9-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(time, value, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> name)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_area</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-15">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Time'</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Individuals'</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">''</span>)</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://sbloggel.netlify.app/posts/2023-11-19-understanding-competing-risks/2023-11-19-understanding-competing-risks_files/figure-html/area_plot-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>



 ]]></description>
  <category>R</category>
  <category>Self-study</category>
  <guid>https://sbloggel.netlify.app/posts/2023-11-19-understanding-competing-risks/2023-11-19-understanding-competing-risks.html</guid>
  <pubDate>Sat, 18 Nov 2023 23:00:00 GMT</pubDate>
</item>
</channel>
</rss>
