<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>Seb&#39;s blog</title>
<link>https://sbloggel.netlify.app/index.html</link>
<atom:link href="https://sbloggel.netlify.app/index.xml" rel="self" type="application/rss+xml"/>
<description>Seb&#39;s private blog about statistics and other topics</description>
<generator>quarto-1.3.433</generator>
<lastBuildDate>Mon, 07 Aug 2023 22:00:00 GMT</lastBuildDate>
<item>
  <title>Cars dataset and tidymodels</title>
  <dc:creator>Sebastian Gerdes</dc:creator>
  <link>https://sbloggel.netlify.app/posts/2023-08-08-cars-dataset-and-tidymodels/2023-08-08-cars-dataset-and-tidymodels.html</link>
  <description><![CDATA[ 



<section id="init" class="level2">
<h2 class="anchored" data-anchor-id="init">Init</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">set.seed</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'tidymodels'</span>)</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching packages ────────────────────────────────────── tidymodels 1.1.0 ──</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✔ broom        1.0.4     ✔ recipes      1.0.6
✔ dials        1.2.0     ✔ rsample      1.1.1
✔ dplyr        1.1.2     ✔ tibble       3.2.1
✔ ggplot2      3.4.2     ✔ tidyr        1.3.0
✔ infer        1.0.4     ✔ tune         1.1.1
✔ modeldata    1.1.0     ✔ workflows    1.1.3
✔ parsnip      1.1.0     ✔ workflowsets 1.0.1
✔ purrr        1.0.1     ✔ yardstick    1.2.0</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Conflicts ───────────────────────────────────────── tidymodels_conflicts() ──
✖ purrr::discard() masks scales::discard()
✖ dplyr::filter()  masks stats::filter()
✖ dplyr::lag()     masks stats::lag()
✖ recipes::step()  masks stats::step()
• Search for functions across packages at https://www.tidymodels.org/find/</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'knitr'</span>)</span></code></pre></div>
</div>
</section>
<section id="do-vfold-cross-validation-on-the-cars-dataset-using-a-linear-model-a-random-forest-model-and-a-neural-net" class="level2">
<h2 class="anchored" data-anchor-id="do-vfold-cross-validation-on-the-cars-dataset-using-a-linear-model-a-random-forest-model-and-a-neural-net">Do vfold cross-validation on the cars dataset using a linear model, a random forest model and a neural net</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create data for resampling:</span></span>
<span id="cb6-2">cars_folds <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">vfold_cv</span>(cars, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">v =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">repeats =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb6-3"></span>
<span id="cb6-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create model specifications:</span></span>
<span id="cb6-5">lm_spec <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">linear_reg</span>()</span>
<span id="cb6-6">rf_spec <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rand_forest</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">set_mode</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'regression'</span>)</span>
<span id="cb6-7">nn_spec <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mlp</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">epochs =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">500</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">hidden_units =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">penalty =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.01</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb6-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">set_mode</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'regression'</span>)</span>
<span id="cb6-9"></span>
<span id="cb6-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create workflows:</span></span>
<span id="cb6-11">all_workflows <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> </span>
<span id="cb6-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">workflow_set</span>(</span>
<span id="cb6-13">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">preproc =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"formula"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> speed <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> dist),</span>
<span id="cb6-14">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">models =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">lm =</span> lm_spec, </span>
<span id="cb6-15">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">rf =</span> rf_spec,</span>
<span id="cb6-16">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">nn =</span> nn_spec)</span>
<span id="cb6-17">  )</span>
<span id="cb6-18"></span>
<span id="cb6-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Run the workflows:</span></span>
<span id="cb6-20">result <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> all_workflows <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb6-21">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">workflow_map</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">resamples =</span> cars_folds,</span>
<span id="cb6-22">               <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">control =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">control_resamples</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">save_pred =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>))</span>
<span id="cb6-23"></span>
<span id="cb6-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Display summary statistics for all model types:</span></span>
<span id="cb6-25">(metrics <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">collect_metrics</span>(result))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 9
  wflow_id   .config        preproc model .metric .estimator  mean     n std_err
  &lt;chr&gt;      &lt;chr&gt;          &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt;
1 formula_lm Preprocessor1… formula line… rmse    standard   3.18     10  0.288 
2 formula_lm Preprocessor1… formula line… rsq     standard   0.656    10  0.0885
3 formula_rf Preprocessor1… formula rand… rmse    standard   3.14     10  0.340 
4 formula_rf Preprocessor1… formula rand… rsq     standard   0.621    10  0.0901
5 formula_nn Preprocessor1… formula mlp   rmse    standard   2.99     10  0.253 
6 formula_nn Preprocessor1… formula mlp   rsq     standard   0.643    10  0.0834</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1">metrics <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pivot_wider</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">names_from =</span> .metric, </span>
<span id="cb8-2">                       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values_from =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(mean, std_err), </span>
<span id="cb8-3">                       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">id_cols =</span> wflow_id) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb8-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">align =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'c'</span>)</span></code></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: center;">wflow_id</th>
<th style="text-align: center;">mean_rmse</th>
<th style="text-align: center;">mean_rsq</th>
<th style="text-align: center;">std_err_rmse</th>
<th style="text-align: center;">std_err_rsq</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">formula_lm</td>
<td style="text-align: center;">3.180583</td>
<td style="text-align: center;">0.6561715</td>
<td style="text-align: center;">0.2883717</td>
<td style="text-align: center;">0.0885333</td>
</tr>
<tr class="even">
<td style="text-align: center;">formula_rf</td>
<td style="text-align: center;">3.142965</td>
<td style="text-align: center;">0.6212505</td>
<td style="text-align: center;">0.3399041</td>
<td style="text-align: center;">0.0901077</td>
</tr>
<tr class="odd">
<td style="text-align: center;">formula_nn</td>
<td style="text-align: center;">2.994578</td>
<td style="text-align: center;">0.6426283</td>
<td style="text-align: center;">0.2528375</td>
<td style="text-align: center;">0.0833891</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Plot predictions against actual values for all predictions:</span></span>
<span id="cb9-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">collect_predictions</span>(result) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb9-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pivot_longer</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cols =</span> model) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb9-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(speed, .pred, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> value)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb9-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb9-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_abline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">slope =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">intercept =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Real value of speed'</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Prediction'</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Model'</span>)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://sbloggel.netlify.app/posts/2023-08-08-cars-dataset-and-tidymodels/2023-08-08-cars-dataset-and-tidymodels_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="open-questions" class="level2">
<h2 class="anchored" data-anchor-id="open-questions">Open Questions</h2>
<ul>
<li>I don’t exactly understand how tidymodels performs cross-validation, how the metrics are calculated etc. Documentation of the tidymodels package has not been informative to me so far (probably I have to read more into it).</li>
<li>How to collect other metrics, e.g.&nbsp;mean absolute error?</li>
<li>How to conventiently join the predictors to the prediction tibble?</li>
<li>How do I extract honest coefficients from the linear model?</li>
</ul>


</section>

 ]]></description>
  <category>R</category>
  <guid>https://sbloggel.netlify.app/posts/2023-08-08-cars-dataset-and-tidymodels/2023-08-08-cars-dataset-and-tidymodels.html</guid>
  <pubDate>Mon, 07 Aug 2023 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Leave-one-out cross-validation in R</title>
  <dc:creator>Sebastian Gerdes</dc:creator>
  <link>https://sbloggel.netlify.app/posts/2023-08-08-leave-one-out-cross-validation-in-r/2023-08-08-leave-one-out-cross-validation-in-r.html</link>
  <description><![CDATA[ 



<section id="strategy" class="level2">
<h2 class="anchored" data-anchor-id="strategy">Strategy</h2>
<ul>
<li>Fit “straight” models: linear model, neural net with 2 layers with 3 perceptrons each</li>
<li>Perform “Leave-one-out-cross-validation”</li>
<li>Calculate mean absolute prediction error of the different methods
<ul>
<li>In cross-validation case for the left-out data point</li>
</ul></li>
</ul>
</section>
<section id="implementation" class="level2">
<h2 class="anchored" data-anchor-id="implementation">Implementation</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">set.seed</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">123</span>)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'tidyverse'</span>)</span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'knitr'</span>)</span>
<span id="cb1-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'neuralnet'</span>)</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1">leave_one_out <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Vectorize</span>(</span>
<span id="cb2-2">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(i, type) {</span>
<span id="cb2-3">    training <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> cars[<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>i, ]</span>
<span id="cb2-4">    test <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> cars[i, ]</span>
<span id="cb2-5">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span>(type <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'lm'</span>) {</span>
<span id="cb2-6">      fm <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lm</span>(speed <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> dist, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> training)</span>
<span id="cb2-7">      pp <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">predict</span>(fm, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">newdata =</span> test)</span>
<span id="cb2-8">    } <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span> {</span>
<span id="cb2-9">      fm <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">neuralnet</span>(speed <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> dist, </span>
<span id="cb2-10">                      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linear.output =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> training, </span>
<span id="cb2-11">                      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">hidden =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>), </span>
<span id="cb2-12">                      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">stepmax =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1e+7</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">threshold =</span> .<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)</span>
<span id="cb2-13">      pp <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">predict</span>(fm, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">newdata =</span> test)[, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]</span>
<span id="cb2-14">    }</span>
<span id="cb2-15">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">return</span>(pp)</span>
<span id="cb2-16">  }, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">vectorize.args =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'i'</span>)</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1">fm_lm <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lm</span>(speed <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> dist, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> cars)</span>
<span id="cb3-2">fm_nn <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">neuralnet</span>(speed <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> dist, </span>
<span id="cb3-3">                   <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linear.output =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> cars, </span>
<span id="cb3-4">                   <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">hidden =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>), </span>
<span id="cb3-5">                   <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">stepmax =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1e+7</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">threshold =</span> .<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)</span>
<span id="cb3-6">data <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tibble</span>(</span>
<span id="cb3-7">  cars,</span>
<span id="cb3-8">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">p_lm_straight =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">predict</span>(fm_lm),</span>
<span id="cb3-9">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">p_nn_straight=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">predict</span>(fm_nn, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">newdata =</span> cars)[, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>],</span>
<span id="cb3-10">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">p_lm_looc =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">leave_one_out</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(cars), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'lm'</span>),</span>
<span id="cb3-11">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">p_nn_looc =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">leave_one_out</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(cars), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'nn'</span>)</span>
<span id="cb3-12">)</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1">data <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb4-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pivot_longer</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cols =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>dist) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb4-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(dist, value, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> name)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'speed'</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">''</span>)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://sbloggel.netlify.app/posts/2023-08-08-leave-one-out-cross-validation-in-r/2023-08-08-leave-one-out-cross-validation-in-r_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1">data_long <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> data <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb5-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pivot_longer</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cols =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(dist, speed)) </span>
<span id="cb5-3"></span>
<span id="cb5-4">data_long <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb5-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(dist, speed <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> value)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">facet_wrap</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">vars</span>(name)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb5-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Prediction error'</span>)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://sbloggel.netlify.app/posts/2023-08-08-leave-one-out-cross-validation-in-r/2023-08-08-leave-one-out-cross-validation-in-r_files/figure-html/unnamed-chunk-4-2.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1">data_long <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb6-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">error =</span> value <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> speed,</span>
<span id="cb6-3">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">squarred_error =</span> error<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">^</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb6-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rename</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Method =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'name'</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb6-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(Method) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb6-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarize</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Mean absolute error'</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abs</span>(error)),</span>
<span id="cb6-7">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Mean squarred error'</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(squarred_error)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb6-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">align =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'c'</span>)</span></code></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: center;">Method</th>
<th style="text-align: center;">Mean absolute error</th>
<th style="text-align: center;">Mean squarred error</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">p_lm_looc</td>
<td style="text-align: center;">2.633568</td>
<td style="text-align: center;">10.525331</td>
</tr>
<tr class="even">
<td style="text-align: center;">p_lm_straight</td>
<td style="text-align: center;">2.518286</td>
<td style="text-align: center;">9.560425</td>
</tr>
<tr class="odd">
<td style="text-align: center;">p_nn_looc</td>
<td style="text-align: center;">2.888501</td>
<td style="text-align: center;">11.961281</td>
</tr>
<tr class="even">
<td style="text-align: center;">p_nn_straight</td>
<td style="text-align: center;">1.948435</td>
<td style="text-align: center;">5.906101</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<ul>
<li>The neural net seems to overfit!</li>
</ul>


</section>

 ]]></description>
  <category>R</category>
  <guid>https://sbloggel.netlify.app/posts/2023-08-08-leave-one-out-cross-validation-in-r/2023-08-08-leave-one-out-cross-validation-in-r.html</guid>
  <pubDate>Mon, 07 Aug 2023 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Regularization in R</title>
  <dc:creator>Sebastian Gerdes</dc:creator>
  <link>https://sbloggel.netlify.app/posts/2023-08-05-regularization-in-r/2023-08-05-regularization-in-r.html</link>
  <description><![CDATA[ 



<ul>
<li>ridge regression</li>
<li>lasso regression</li>
<li>elastic net</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'tidyverse'</span>)</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.2     ✔ readr     2.1.4
✔ forcats   1.0.0     ✔ stringr   1.5.0
✔ ggplot2   3.4.2     ✔ tibble    3.2.1
✔ lubridate 1.9.2     ✔ tidyr     1.3.0
✔ purrr     1.0.1     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">set.seed</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span></code></pre></div>
</div>



 ]]></description>
  <category>R</category>
  <guid>https://sbloggel.netlify.app/posts/2023-08-05-regularization-in-r/2023-08-05-regularization-in-r.html</guid>
  <pubDate>Fri, 04 Aug 2023 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Getting to know mlr3</title>
  <dc:creator>Sebastian Gerdes</dc:creator>
  <link>https://sbloggel.netlify.app/posts/2023-08-04-getting-to-know-mlr3/2023-08-04-getting-to-know-mlr3.html</link>
  <description><![CDATA[ 



<p><a href="https://cran.r-project.org/package=mlr3">Link to package</a></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">set.seed</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'mlr3'</span>)</span></code></pre></div>
</div>



 ]]></description>
  <category>R</category>
  <guid>https://sbloggel.netlify.app/posts/2023-08-04-getting-to-know-mlr3/2023-08-04-getting-to-know-mlr3.html</guid>
  <pubDate>Thu, 03 Aug 2023 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Getting to know tidymodels</title>
  <dc:creator>Sebastian Gerdes</dc:creator>
  <link>https://sbloggel.netlify.app/posts/2023-08-04-getting-to-know-tidymodels/2023-08-04-getting-to-know-tidymodels.html</link>
  <description><![CDATA[ 



<ul>
<li>Tutorials by Julia Silge: <a href="https://www.youtube.com/@JuliaSilge/search">Link</a></li>
<li>Blog post criticising tidymodels: <a href="https://staffblogs.le.ac.uk/teachingr/2020/10/05/on-not-using-tidymodels/">Link</a>, written by <a href="https://github.com/thompson575">this person</a></li>
</ul>
<section id="tutorial-1---palmerpenguins-dataset" class="level2">
<h2 class="anchored" data-anchor-id="tutorial-1---palmerpenguins-dataset">Tutorial 1 - palmerpenguins dataset</h2>
<ul>
<li><a href="https://juliasilge.com/blog/palmer-penguins/">Link</a></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">set.seed</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'tidyverse'</span>)</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.2     ✔ readr     2.1.4
✔ forcats   1.0.0     ✔ stringr   1.5.0
✔ ggplot2   3.4.2     ✔ tibble    3.2.1
✔ lubridate 1.9.2     ✔ tidyr     1.3.0
✔ purrr     1.0.1     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'palmerpenguins'</span>)</span>
<span id="cb3-2"></span>
<span id="cb3-3">penguins_df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> penguins <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is.na</span>(sex)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>year, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>island)</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidymodels)</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching packages ────────────────────────────────────── tidymodels 1.1.0 ──</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✔ broom        1.0.4     ✔ rsample      1.1.1
✔ dials        1.2.0     ✔ tune         1.1.1
✔ infer        1.0.4     ✔ workflows    1.1.3
✔ modeldata    1.1.0     ✔ workflowsets 1.0.1
✔ parsnip      1.1.0     ✔ yardstick    1.2.0
✔ recipes      1.0.6     </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Conflicts ───────────────────────────────────────── tidymodels_conflicts() ──
✖ scales::discard() masks purrr::discard()
✖ dplyr::filter()   masks stats::filter()
✖ recipes::fixed()  masks stringr::fixed()
✖ dplyr::lag()      masks stats::lag()
✖ yardstick::spec() masks readr::spec()
✖ recipes::step()   masks stats::step()
• Use tidymodels_prefer() to resolve common conflicts.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">glimpse</span>(penguins_df)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 333
Columns: 6
$ species           &lt;fct&gt; Adelie, Adelie, Adelie, Adelie, Adelie, Adelie, Adel…
$ bill_length_mm    &lt;dbl&gt; 39.1, 39.5, 40.3, 36.7, 39.3, 38.9, 39.2, 41.1, 38.6…
$ bill_depth_mm     &lt;dbl&gt; 18.7, 17.4, 18.0, 19.3, 20.6, 17.8, 19.6, 17.6, 21.2…
$ flipper_length_mm &lt;int&gt; 181, 186, 195, 193, 190, 181, 195, 182, 191, 198, 18…
$ body_mass_g       &lt;int&gt; 3750, 3800, 3250, 3450, 3650, 3625, 4675, 3200, 3800…
$ sex               &lt;fct&gt; male, female, female, female, male, female, male, fe…</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1">penguin_split <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">initial_split</span>(penguins_df, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">strata =</span> sex)</span>
<span id="cb10-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str</span>(penguin_split)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>List of 4
 $ data  : tibble [333 × 6] (S3: tbl_df/tbl/data.frame)
  ..$ species          : Factor w/ 3 levels "Adelie","Chinstrap",..: 1 1 1 1 1 1 1 1 1 1 ...
  ..$ bill_length_mm   : num [1:333] 39.1 39.5 40.3 36.7 39.3 38.9 39.2 41.1 38.6 34.6 ...
  ..$ bill_depth_mm    : num [1:333] 18.7 17.4 18 19.3 20.6 17.8 19.6 17.6 21.2 21.1 ...
  ..$ flipper_length_mm: int [1:333] 181 186 195 193 190 181 195 182 191 198 ...
  ..$ body_mass_g      : int [1:333] 3750 3800 3250 3450 3650 3625 4675 3200 3800 4400 ...
  ..$ sex              : Factor w/ 2 levels "female","male": 2 1 1 1 2 1 2 1 2 2 ...
 $ in_id : int [1:249] 2 3 4 11 12 18 24 26 28 33 ...
 $ out_id: logi NA
 $ id    : tibble [1 × 1] (S3: tbl_df/tbl/data.frame)
  ..$ id: chr "Resample1"
 - attr(*, "class")= chr [1:3] "initial_split" "mc_split" "rsplit"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1">penguin_train <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">training</span>(penguin_split)</span>
<span id="cb12-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str</span>(penguin_train)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [249 × 6] (S3: tbl_df/tbl/data.frame)
 $ species          : Factor w/ 3 levels "Adelie","Chinstrap",..: 1 1 1 1 1 1 1 1 1 1 ...
 $ bill_length_mm   : num [1:249] 39.5 40.3 36.7 36.6 38.7 35.9 37.9 39.5 39.5 42.2 ...
 $ bill_depth_mm    : num [1:249] 17.4 18 19.3 17.8 19 19.2 18.6 16.7 17.8 18.5 ...
 $ flipper_length_mm: int [1:249] 186 195 193 185 195 189 172 178 188 180 ...
 $ body_mass_g      : int [1:249] 3800 3250 3450 3700 3450 3800 3150 3250 3300 3550 ...
 $ sex              : Factor w/ 2 levels "female","male": 1 1 1 1 1 1 1 1 1 1 ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1">penguin_test <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">testing</span>(penguin_split)</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">set.seed</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">123</span>)</span>
<span id="cb15-2">penguin_boot <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bootstraps</span>(penguin_train)</span>
<span id="cb15-3">penguin_boot</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Bootstrap sampling 
# A tibble: 25 × 2
   splits           id         
   &lt;list&gt;           &lt;chr&gt;      
 1 &lt;split [249/93]&gt; Bootstrap01
 2 &lt;split [249/91]&gt; Bootstrap02
 3 &lt;split [249/90]&gt; Bootstrap03
 4 &lt;split [249/91]&gt; Bootstrap04
 5 &lt;split [249/85]&gt; Bootstrap05
 6 &lt;split [249/87]&gt; Bootstrap06
 7 &lt;split [249/94]&gt; Bootstrap07
 8 &lt;split [249/88]&gt; Bootstrap08
 9 &lt;split [249/95]&gt; Bootstrap09
10 &lt;split [249/89]&gt; Bootstrap10
# ℹ 15 more rows</code></pre>
</div>
</div>
<section id="question" class="level3">
<h3 class="anchored" data-anchor-id="question">Question:</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># how can I extract a single bootstrap sample?</span></span>
<span id="cb17-2">x <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> penguin_boot <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb17-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(splits) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb17-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">slice</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb17-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pull</span>()</span>
<span id="cb17-6"></span>
<span id="cb17-7">x[[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>data</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 249 × 6
   species bill_length_mm bill_depth_mm flipper_length_mm body_mass_g sex   
   &lt;fct&gt;            &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt; &lt;fct&gt; 
 1 Adelie            39.5          17.4               186        3800 female
 2 Adelie            40.3          18                 195        3250 female
 3 Adelie            36.7          19.3               193        3450 female
 4 Adelie            36.6          17.8               185        3700 female
 5 Adelie            38.7          19                 195        3450 female
 6 Adelie            35.9          19.2               189        3800 female
 7 Adelie            37.9          18.6               172        3150 female
 8 Adelie            39.5          16.7               178        3250 female
 9 Adelie            39.5          17.8               188        3300 female
10 Adelie            42.2          18.5               180        3550 female
# ℹ 239 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1">x <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> penguin_boot <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb19-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(id <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Bootstrap01'</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb19-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(splits) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb19-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pull</span>()</span>
<span id="cb19-5"></span>
<span id="cb19-6">x[[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>data</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 249 × 6
   species bill_length_mm bill_depth_mm flipper_length_mm body_mass_g sex   
   &lt;fct&gt;            &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt; &lt;fct&gt; 
 1 Adelie            39.5          17.4               186        3800 female
 2 Adelie            40.3          18                 195        3250 female
 3 Adelie            36.7          19.3               193        3450 female
 4 Adelie            36.6          17.8               185        3700 female
 5 Adelie            38.7          19                 195        3450 female
 6 Adelie            35.9          19.2               189        3800 female
 7 Adelie            37.9          18.6               172        3150 female
 8 Adelie            39.5          16.7               178        3250 female
 9 Adelie            39.5          17.8               188        3300 female
10 Adelie            42.2          18.5               180        3550 female
# ℹ 239 more rows</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb21" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1">glm_spec <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">logistic_reg</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb21-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">set_engine</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"glm"</span>)</span>
<span id="cb21-3"></span>
<span id="cb21-4">glm_spec</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Logistic Regression Model Specification (classification)

Computational engine: glm </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb23" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1">rf_spec <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rand_forest</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb23-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">set_mode</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"classification"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb23-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">set_engine</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ranger"</span>)</span>
<span id="cb23-4"></span>
<span id="cb23-5">rf_spec</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Random Forest Model Specification (classification)

Computational engine: ranger </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb25" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1">penguin_wf <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">workflow</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb25-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">add_formula</span>(sex <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> .)</span>
<span id="cb25-3"></span>
<span id="cb25-4">penguin_wf</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>══ Workflow ════════════════════════════════════════════════════════════════════
Preprocessor: Formula
Model: None

── Preprocessor ────────────────────────────────────────────────────────────────
sex ~ .</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb27" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1">glm_rs <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> penguin_wf <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb27-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">add_model</span>(glm_spec) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb27-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fit_resamples</span>(</span>
<span id="cb27-4">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">resamples =</span> penguin_boot,</span>
<span id="cb27-5">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">control =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">control_resamples</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">save_pred =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span>
<span id="cb27-6">  )</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>→ A | warning: glm.fit: fitted probabilities numerically 0 or 1 occurred</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>There were issues with some computations   A: x1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>There were issues with some computations   A: x2</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code></code></pre>
</div>
<div class="sourceCode cell-code" id="cb32" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1">glm_rs</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Resampling results
# Bootstrap sampling 
# A tibble: 25 × 5
   splits           id          .metrics         .notes           .predictions
   &lt;list&gt;           &lt;chr&gt;       &lt;list&gt;           &lt;list&gt;           &lt;list&gt;      
 1 &lt;split [249/93]&gt; Bootstrap01 &lt;tibble [2 × 4]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
 2 &lt;split [249/91]&gt; Bootstrap02 &lt;tibble [2 × 4]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
 3 &lt;split [249/90]&gt; Bootstrap03 &lt;tibble [2 × 4]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
 4 &lt;split [249/91]&gt; Bootstrap04 &lt;tibble [2 × 4]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
 5 &lt;split [249/85]&gt; Bootstrap05 &lt;tibble [2 × 4]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
 6 &lt;split [249/87]&gt; Bootstrap06 &lt;tibble [2 × 4]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
 7 &lt;split [249/94]&gt; Bootstrap07 &lt;tibble [2 × 4]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
 8 &lt;split [249/88]&gt; Bootstrap08 &lt;tibble [2 × 4]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
 9 &lt;split [249/95]&gt; Bootstrap09 &lt;tibble [2 × 4]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
10 &lt;split [249/89]&gt; Bootstrap10 &lt;tibble [2 × 4]&gt; &lt;tibble [1 × 3]&gt; &lt;tibble&gt;    
# ℹ 15 more rows

There were issues with some computations:

  - Warning(s) x2: glm.fit: fitted probabilities numerically 0 or 1 occurred

Run `show_notes(.Last.tune.result)` for more information.</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb34" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1">rf_rs <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> penguin_wf <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb34-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">add_model</span>(rf_spec) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb34-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fit_resamples</span>(</span>
<span id="cb34-4">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">resamples =</span> penguin_boot,</span>
<span id="cb34-5">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">control =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">control_resamples</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">save_pred =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span>
<span id="cb34-6">  )</span>
<span id="cb34-7"></span>
<span id="cb34-8">rf_rs</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Resampling results
# Bootstrap sampling 
# A tibble: 25 × 5
   splits           id          .metrics         .notes           .predictions
   &lt;list&gt;           &lt;chr&gt;       &lt;list&gt;           &lt;list&gt;           &lt;list&gt;      
 1 &lt;split [249/93]&gt; Bootstrap01 &lt;tibble [2 × 4]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
 2 &lt;split [249/91]&gt; Bootstrap02 &lt;tibble [2 × 4]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
 3 &lt;split [249/90]&gt; Bootstrap03 &lt;tibble [2 × 4]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
 4 &lt;split [249/91]&gt; Bootstrap04 &lt;tibble [2 × 4]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
 5 &lt;split [249/85]&gt; Bootstrap05 &lt;tibble [2 × 4]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
 6 &lt;split [249/87]&gt; Bootstrap06 &lt;tibble [2 × 4]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
 7 &lt;split [249/94]&gt; Bootstrap07 &lt;tibble [2 × 4]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
 8 &lt;split [249/88]&gt; Bootstrap08 &lt;tibble [2 × 4]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
 9 &lt;split [249/95]&gt; Bootstrap09 &lt;tibble [2 × 4]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
10 &lt;split [249/89]&gt; Bootstrap10 &lt;tibble [2 × 4]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
# ℹ 15 more rows</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb36" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">collect_metrics</span>(rf_rs)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 6
  .metric  .estimator  mean     n std_err .config             
  &lt;chr&gt;    &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;               
1 accuracy binary     0.899    25 0.00704 Preprocessor1_Model1
2 roc_auc  binary     0.971    25 0.00307 Preprocessor1_Model1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb38" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">collect_metrics</span>(glm_rs)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 6
  .metric  .estimator  mean     n std_err .config             
  &lt;chr&gt;    &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;               
1 accuracy binary     0.919    25 0.00527 Preprocessor1_Model1
2 roc_auc  binary     0.977    25 0.00220 Preprocessor1_Model1</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb40" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1">glm_rs <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb40-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">conf_mat_resampled</span>()</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 3
  Prediction Truth   Freq
  &lt;fct&gt;      &lt;fct&gt;  &lt;dbl&gt;
1 female     female 41.8 
2 female     male    3.72
3 male       female  3.68
4 male       male   41.6 </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb42" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1">glm_rs <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb42-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">collect_predictions</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb42-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(id) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb42-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">roc_curve</span>(sex, .pred_female) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb42-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> specificity, sensitivity, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> id)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb42-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_abline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">lty =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gray80"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linewidth =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.5</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb42-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_path</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">show.legend =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.6</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linewidth =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.2</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb42-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">coord_equal</span>()</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://sbloggel.netlify.app/posts/2023-08-04-getting-to-know-tidymodels/2023-08-04-getting-to-know-tidymodels_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb43" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1">penguin_final <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> penguin_wf <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb43-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">add_model</span>(glm_spec) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb43-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">last_fit</span>(penguin_split)</span>
<span id="cb43-4"></span>
<span id="cb43-5">penguin_final</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Resampling results
# Manual resampling 
# A tibble: 1 × 6
  splits           id               .metrics .notes   .predictions .workflow 
  &lt;list&gt;           &lt;chr&gt;            &lt;list&gt;   &lt;list&gt;   &lt;list&gt;       &lt;list&gt;    
1 &lt;split [249/84]&gt; train/test split &lt;tibble&gt; &lt;tibble&gt; &lt;tibble&gt;     &lt;workflow&gt;</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb45" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">collect_metrics</span>(penguin_final)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 4
  .metric  .estimator .estimate .config             
  &lt;chr&gt;    &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;               
1 accuracy binary         0.905 Preprocessor1_Model1
2 roc_auc  binary         0.966 Preprocessor1_Model1</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb47" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">collect_predictions</span>(penguin_final) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb47-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">conf_mat</span>(sex, .pred_class)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          Truth
Prediction female male
    female     39    5
    male        3   37</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb49" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1">penguin_final<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>.workflow[[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]] <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb49-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tidy</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">exponentiate =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 5
  term              estimate std.error statistic     p.value
  &lt;chr&gt;                &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;
1 (Intercept)       2.35e-42  18.1        -5.30  0.000000115
2 speciesChinstrap  9.76e- 4   1.91       -3.62  0.000295   
3 speciesGentoo     1.96e- 4   3.25       -2.63  0.00866    
4 bill_length_mm    1.88e+ 0   0.159       4.00  0.0000639  
5 bill_depth_mm     7.50e+ 0   0.455       4.43  0.00000940 
6 flipper_length_mm 1.06e+ 0   0.0653      0.863 0.388      
7 body_mass_g       1.01e+ 0   0.00138     4.63  0.00000374 </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb51" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1">penguins <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb51-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is.na</span>(sex)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb51-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(bill_depth_mm, bill_length_mm, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> sex, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> body_mass_g)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb51-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb51-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">facet_wrap</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span>species)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://sbloggel.netlify.app/posts/2023-08-04-getting-to-know-tidymodels/2023-08-04-getting-to-know-tidymodels_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid" width="672"></p>
</div>
</div>


</section>
</section>

 ]]></description>
  <category>R</category>
  <guid>https://sbloggel.netlify.app/posts/2023-08-04-getting-to-know-tidymodels/2023-08-04-getting-to-know-tidymodels.html</guid>
  <pubDate>Thu, 03 Aug 2023 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Kaplan Meier plots</title>
  <dc:creator>Sebastian Gerdes</dc:creator>
  <link>https://sbloggel.netlify.app/posts/2023-08-03-kaplan-meier-plots/2023-08-03-kaplan-meier-plots.html</link>
  <description><![CDATA[ 



<p>Goal: draw facetted Kaplan-Meier-plots with p-value</p>
<section id="with-ggquickeda" class="level2">
<h2 class="anchored" data-anchor-id="with-ggquickeda">With ggquickeda</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'tidyverse'</span>)</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.2     ✔ readr     2.1.4
✔ forcats   1.0.0     ✔ stringr   1.5.0
✔ ggplot2   3.4.2     ✔ tibble    3.2.1
✔ lubridate 1.9.2     ✔ tidyr     1.3.0
✔ purrr     1.0.1     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'survival'</span>)</span>
<span id="cb3-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'ggquickeda'</span>)</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'ggquickeda'

The following object is masked from 'package:base':

    +</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1">text_to_add <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> </span>
<span id="cb5-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tribble</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> sex, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> text, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> x, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> y, </span>
<span id="cb5-3">          <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Male'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'p = 0.1'</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3000</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.95</span>,</span>
<span id="cb5-4">          <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Female'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'p = 0.03'</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3000</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.95</span>)</span>
<span id="cb5-5"></span>
<span id="cb5-6"></span>
<span id="cb5-7"></span>
<span id="cb5-8">colon <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb5-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sex =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">case_when</span>(</span>
<span id="cb5-10">    sex <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Male'</span>,</span>
<span id="cb5-11">    sex <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Female'</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb5-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">perfor =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(perfor)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb5-13">  </span>
<span id="cb5-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">time =</span> time, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">status =</span> status, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> perfor)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb5-15">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">facet_wrap</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">vars</span>(sex)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb5-16">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_km</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_kmticks</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb5-17">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_label</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mapping =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> text, </span>
<span id="cb5-18">                           <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> x, </span>
<span id="cb5-19">                           <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> y), </span>
<span id="cb5-20">             <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> text_to_add, </span>
<span id="cb5-21">             <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">inherit.aes =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb5-22">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Time'</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Estimated survival'</span>)</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The following aesthetics were dropped during statistical transformation: status
ℹ This can happen when ggplot fails to infer the correct grouping structure in
  the data.
ℹ Did you forget to specify a `group` aesthetic or to convert a numerical
  variable into a factor?
The following aesthetics were dropped during statistical transformation: status
ℹ This can happen when ggplot fails to infer the correct grouping structure in
  the data.
ℹ Did you forget to specify a `group` aesthetic or to convert a numerical
  variable into a factor?
The following aesthetics were dropped during statistical transformation: status
ℹ This can happen when ggplot fails to infer the correct grouping structure in
  the data.
ℹ Did you forget to specify a `group` aesthetic or to convert a numerical
  variable into a factor?
The following aesthetics were dropped during statistical transformation: status
ℹ This can happen when ggplot fails to infer the correct grouping structure in
  the data.
ℹ Did you forget to specify a `group` aesthetic or to convert a numerical
  variable into a factor?</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Using the `size` aesthetic with geom_path was deprecated in ggplot2 3.4.0.
ℹ Please use the `linewidth` aesthetic instead.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="https://sbloggel.netlify.app/posts/2023-08-03-kaplan-meier-plots/2023-08-03-kaplan-meier-plots_files/figure-html/unnamed-chunk-1-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="with-survminer" class="level2">
<h2 class="anchored" data-anchor-id="with-survminer">With survminer</h2>
<section id="do-faceting-with-survminer" class="level3">
<h3 class="anchored" data-anchor-id="do-faceting-with-survminer">Do faceting with survminer</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'survminer'</span>)</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: ggpubr</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'survminer'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:survival':

    myeloma</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1">fit <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">survfit</span>( <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Surv</span>(time, status) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> sex <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> rx, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> colon )</span>
<span id="cb12-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggsurvplot_facet</span>(fit, colon, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">facet.by =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'rx'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'perfor'</span>), </span>
<span id="cb12-3">                 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">pval =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ggtheme =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_grey</span>())</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: `as.tibble()` was deprecated in tibble 2.0.0.
ℹ Please use `as_tibble()` instead.
ℹ The signature and semantics have changed, see `?as_tibble`.
ℹ The deprecated feature was likely used in the survminer package.
  Please report the issue at &lt;https://github.com/kassambara/survminer/issues&gt;.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: `select_()` was deprecated in dplyr 0.7.0.
ℹ Please use `select()` instead.
ℹ The deprecated feature was likely used in the survminer package.
  Please report the issue at &lt;https://github.com/kassambara/survminer/issues&gt;.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="https://sbloggel.netlify.app/posts/2023-08-03-kaplan-meier-plots/2023-08-03-kaplan-meier-plots_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="extract-plot-object-so-it-can-be-modified-in-a-more-usual-ggplot2-style" class="level3">
<h3 class="anchored" data-anchor-id="extract-plot-object-so-it-can-be-modified-in-a-more-usual-ggplot2-style">Extract plot object so it can be modified in a more usual ggplot2 style</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1">fit <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">survfit</span>( <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Surv</span>(time, status) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> sex <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> rx <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> perfor, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> colon )</span>
<span id="cb15-2">gg <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggsurvplot</span>(fit, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> colon, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'perfor'</span>)</span>
<span id="cb15-3">gg<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>plot <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_grey</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'perfor'</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Time [days]'</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">facet_wrap</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> sex <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> rx, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">labeller =</span> label_both)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://sbloggel.netlify.app/posts/2023-08-03-kaplan-meier-plots/2023-08-03-kaplan-meier-plots_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1">fit <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">survfit</span>( <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Surv</span>(time, status) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> sex <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> perfor, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> colon )</span>
<span id="cb16-2">gg <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggsurvplot</span>(fit, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> colon, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'perfor'</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">pval =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">facet.by =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'sex'</span>)</span></code></pre></div>
</div>
</section>
<section id="show-possible-problem-in-survminer" class="level3">
<h3 class="anchored" data-anchor-id="show-possible-problem-in-survminer">Show possible problem in survminer</h3>
<ul>
<li>After facetting, the p-values seem not be correct anymore</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1">fit <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">survfit</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Surv</span>(time, status) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> sex <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> rx, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> colon)</span>
<span id="cb17-2">gg <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggsurvplot</span>(fit, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">pval =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span>
<span id="cb17-3">gg</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://sbloggel.netlify.app/posts/2023-08-03-kaplan-meier-plots/2023-08-03-kaplan-meier-plots_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1">gg<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>plot <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">facet_wrap</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">vars</span>(rx))</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://sbloggel.netlify.app/posts/2023-08-03-kaplan-meier-plots/2023-08-03-kaplan-meier-plots_files/figure-html/unnamed-chunk-5-2.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1">gg<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>plot <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">facet_wrap</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">vars</span>(rx, sex))</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://sbloggel.netlify.app/posts/2023-08-03-kaplan-meier-plots/2023-08-03-kaplan-meier-plots_files/figure-html/unnamed-chunk-5-3.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="try-to-help-someone" class="level3">
<h3 class="anchored" data-anchor-id="try-to-help-someone">Try to help someone</h3>
<ul>
<li><a href="https://github.com/kassambara/survminer/issues/617">Link</a></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb20" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'survival'</span>)</span>
<span id="cb20-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'tidyverse'</span>)</span>
<span id="cb20-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'survminer'</span>)</span>
<span id="cb20-4"></span>
<span id="cb20-5">text_to_add <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> </span>
<span id="cb20-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tribble</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> sex, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> text, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> x, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> y, </span>
<span id="cb20-7">          <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Some text'</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.1</span>,</span>
<span id="cb20-8">          <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Some other text'</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.1</span>)</span>
<span id="cb20-9"></span>
<span id="cb20-10">fit <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">survfit</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Surv</span>(time, status) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> sex, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> colon)</span>
<span id="cb20-11">gg <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggsurvplot</span>(fit)</span>
<span id="cb20-12">gg<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>plot <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">facet_wrap</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">vars</span>(sex)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_gray</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb20-13">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_label</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> x, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> y, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> text),</span>
<span id="cb20-14">             text_to_add, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">inherit.aes =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://sbloggel.netlify.app/posts/2023-08-03-kaplan-meier-plots/2023-08-03-kaplan-meier-plots_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb21" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1">gg <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggsurvplot</span>(fit, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">palette =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'black'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'black'</span>))</span>
<span id="cb21-2">gg<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>plot <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">facet_wrap</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">vars</span>(sex)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_gray</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb21-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_label</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> x, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> y, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> text),</span>
<span id="cb21-4">             text_to_add, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">inherit.aes =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb21-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.position =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"none"</span>)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://sbloggel.netlify.app/posts/2023-08-03-kaplan-meier-plots/2023-08-03-kaplan-meier-plots_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672"></p>
</div>
</div>


</section>
</section>

 ]]></description>
  <category>R</category>
  <guid>https://sbloggel.netlify.app/posts/2023-08-03-kaplan-meier-plots/2023-08-03-kaplan-meier-plots.html</guid>
  <pubDate>Wed, 02 Aug 2023 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Reducing image file size with ImageMagick</title>
  <dc:creator>Sebastian Gerdes</dc:creator>
  <link>https://sbloggel.netlify.app/posts/2023-08-03-reducing-image-file-size-with-imagemagick/2023-08-03-reducing-image-file-size-with-imagemagick.html</link>
  <description><![CDATA[ 



<section id="links" class="level2">
<h2 class="anchored" data-anchor-id="links">Links</h2>
<ul>
<li><a href="https://stackoverflow.com/questions/7261855/recommendation-for-compressing-jpg-files-with-imagemagick">stackoverflow post recommandations for compressing</a></li>
<li><a href="https://stackoverflow.com/questions/6917219/imagemagick-scale-jpeg-image-with-a-maximum-file-size">stackoverflow maximum file size</a></li>
<li><a href="https://www.smashingmagazine.com/2015/06/efficient-image-resizing-with-imagemagick/">Extensive analysis of imagemagick options</a></li>
</ul>
</section>
<section id="initial-analysis" class="level2">
<h2 class="anchored" data-anchor-id="initial-analysis">Initial analysis</h2>
<p><img src="https://sbloggel.netlify.app/posts/2023-08-03-reducing-image-file-size-with-imagemagick/koga_original.jpg" class="img-fluid" style="width:32.0%" data-fig-align="center" alt="Koga Original"> <img src="https://sbloggel.netlify.app/posts/2023-08-03-reducing-image-file-size-with-imagemagick/koga_signal.jpeg" class="img-fluid" style="width:32.0%" data-fig-align="center" alt="Koga Signal version"> <img src="https://sbloggel.netlify.app/posts/2023-08-03-reducing-image-file-size-with-imagemagick/koga_edited.jpg" class="img-fluid" style="width:32.0%" data-fig-align="center" alt="Koga ImageMagick"></p>
<p><img src="https://sbloggel.netlify.app/posts/2023-08-03-reducing-image-file-size-with-imagemagick/koga_original.jpg" class="img-fluid" style="width:99.0%" data-fig-align="center" alt="Koga Original"> <img src="https://sbloggel.netlify.app/posts/2023-08-03-reducing-image-file-size-with-imagemagick/koga_signal.jpeg" class="img-fluid" style="width:99.0%" data-fig-align="center" alt="Koga Signal version"> <img src="https://sbloggel.netlify.app/posts/2023-08-03-reducing-image-file-size-with-imagemagick/koga_edited.jpg" class="img-fluid" style="width:99.0%" data-fig-align="center" alt="Koga ImageMagick"></p>
</section>
<section id="currently-best-version" class="level2">
<h2 class="anchored" data-anchor-id="currently-best-version">Currently best version</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">system</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'convert koga_original.jpg -quality 50 -resize 2048 low_quality_3.jpg'</span>)</span></code></pre></div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://sbloggel.netlify.app/posts/2023-08-03-reducing-image-file-size-with-imagemagick/low_quality_3.jpg" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Currently best version</figcaption>
</figure>
</div>
</section>
<section id="even-a-lot-smaller" class="level2">
<h2 class="anchored" data-anchor-id="even-a-lot-smaller">Even a lot smaller</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">system</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'convert koga_original.jpg -quality 50 -resize 1024 low_quality_4.jpg'</span>)</span>
<span id="cb2-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">system</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'convert koga_original.jpg -quality 50 -resize 512 low_quality_5.jpg'</span>)</span></code></pre></div>
</div>
<p><img src="https://sbloggel.netlify.app/posts/2023-08-03-reducing-image-file-size-with-imagemagick/low_quality_4.jpg" class="img-fluid" alt="Even a lot smaller"> <img src="https://sbloggel.netlify.app/posts/2023-08-03-reducing-image-file-size-with-imagemagick/low_quality_5.jpg" class="img-fluid" alt="Even a lot smaller"></p>
</section>
<section id="file-sizes" class="level2">
<h2 class="anchored" data-anchor-id="file-sizes">File sizes</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'fs'</span>)</span>
<span id="cb3-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'knitr'</span>)</span>
<span id="cb3-3"></span>
<span id="cb3-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tibble</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">filenames =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dir_ls</span>(), </span>
<span id="cb3-5">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">filesizes =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">file_size</span>(filenames)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb3-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">align =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'c'</span>)</span></code></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 85%">
<col style="width: 14%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">filenames</th>
<th style="text-align: center;">filesizes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">2023-08-03-reducing-image-file-size-with-imagemagick.qmd</td>
<td style="text-align: center;">2.18K</td>
</tr>
<tr class="even">
<td style="text-align: center;">2023-08-03-reducing-image-file-size-with-imagemagick.rmarkdown</td>
<td style="text-align: center;">2.19K</td>
</tr>
<tr class="odd">
<td style="text-align: center;">koga_edited.jpg</td>
<td style="text-align: center;">193.93K</td>
</tr>
<tr class="even">
<td style="text-align: center;">koga_original.jpg</td>
<td style="text-align: center;">2.5M</td>
</tr>
<tr class="odd">
<td style="text-align: center;">koga_signal.jpeg</td>
<td style="text-align: center;">505.13K</td>
</tr>
<tr class="even">
<td style="text-align: center;">low_quality_1.jpg</td>
<td style="text-align: center;">206.18K</td>
</tr>
<tr class="odd">
<td style="text-align: center;">low_quality_2.jpg</td>
<td style="text-align: center;">516.7K</td>
</tr>
<tr class="even">
<td style="text-align: center;">low_quality_3.jpg</td>
<td style="text-align: center;">387.38K</td>
</tr>
<tr class="odd">
<td style="text-align: center;">low_quality_4.jpg</td>
<td style="text-align: center;">206.18K</td>
</tr>
<tr class="even">
<td style="text-align: center;">low_quality_5.jpg</td>
<td style="text-align: center;">146.79K</td>
</tr>
</tbody>
</table>
</div>
</div>


</section>

 ]]></description>
  <category>R</category>
  <category>Mishmash</category>
  <guid>https://sbloggel.netlify.app/posts/2023-08-03-reducing-image-file-size-with-imagemagick/2023-08-03-reducing-image-file-size-with-imagemagick.html</guid>
  <pubDate>Wed, 02 Aug 2023 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Approximating Pi</title>
  <dc:creator>Sebastian Gerdes</dc:creator>
  <link>https://sbloggel.netlify.app/posts/2023-07-23-approximating-pi/2023-07-23-approximating-pi.html</link>
  <description><![CDATA[ 



<p>This is a really pointless post about approximating <img src="https://latex.codecogs.com/png.latex?%5Cpi">, inspired by <a href="https://www.r-bloggers.com/2023/07/happy-pi-approximation-day/">this</a> post.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1">current_min_error <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abs</span>(pi <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">22</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>)</span>
<span id="cb1-2">current_best_numerator <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">22</span></span>
<span id="cb1-3">current_best_denominator <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span></span>
<span id="cb1-4"></span>
<span id="cb1-5"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span>(denominator <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1e7</span>) {</span>
<span id="cb1-6">  numerator <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(denominator <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> pi)</span>
<span id="cb1-7">  pi_approx <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> numerator <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> denominator</span>
<span id="cb1-8">  pi_error <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abs</span>(pi <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> pi_approx)</span>
<span id="cb1-9">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span>(pi_error <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span> current_min_error) {</span>
<span id="cb1-10">    current_min_error <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> pi_error</span>
<span id="cb1-11">    current_best_numerator <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> numerator</span>
<span id="cb1-12">    current_best_denominator <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> denominator</span>
<span id="cb1-13">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'numerator:'</span>, numerator, </span>
<span id="cb1-14">                  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">', denominator:'</span>, denominator, </span>
<span id="cb1-15">                  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">', pi_approx: '</span>, numerator <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> denominator, </span>
<span id="cb1-16">                  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">', absolute error'</span>, pi_error, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span>)))</span>
<span id="cb1-17">  }</span>
<span id="cb1-18">}</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>numerator: 179 , denominator: 57 , pi_approx:  3.14035087719298 , absolute error 0.00124177639681067 
numerator: 201 , denominator: 64 , pi_approx:  3.140625 , absolute error 0.000967653589793116 
numerator: 223 , denominator: 71 , pi_approx:  3.14084507042254 , absolute error 0.000747583167258092 
numerator: 245 , denominator: 78 , pi_approx:  3.14102564102564 , absolute error 0.000567012564152147 
numerator: 267 , denominator: 85 , pi_approx:  3.14117647058824 , absolute error 0.000416183001557879 
numerator: 289 , denominator: 92 , pi_approx:  3.14130434782609 , absolute error 0.000288305763706198 
numerator: 311 , denominator: 99 , pi_approx:  3.14141414141414 , absolute error 0.000178512175651679 
numerator: 333 , denominator: 106 , pi_approx:  3.14150943396226 , absolute error 8.32196275291075e-05 
numerator: 355 , denominator: 113 , pi_approx:  3.14159292035398 , absolute error 2.66764189404967e-07 
numerator: 52163 , denominator: 16604 , pi_approx:  3.14159238737654 , absolute error 2.66213257216208e-07 
numerator: 52518 , denominator: 16717 , pi_approx:  3.14159239097924 , absolute error 2.62610550638698e-07 
numerator: 52873 , denominator: 16830 , pi_approx:  3.14159239453357 , absolute error 2.5905622225153e-07 
numerator: 53228 , denominator: 16943 , pi_approx:  3.14159239804049 , absolute error 2.55549304384317e-07 
numerator: 53583 , denominator: 17056 , pi_approx:  3.14159240150094 , absolute error 2.52088855123844e-07 
numerator: 53938 , denominator: 17169 , pi_approx:  3.14159240491584 , absolute error 2.48673956537715e-07 
numerator: 54293 , denominator: 17282 , pi_approx:  3.14159240828608 , absolute error 2.45303715118439e-07 
numerator: 54648 , denominator: 17395 , pi_approx:  3.14159241161253 , absolute error 2.41977260895254e-07 
numerator: 55003 , denominator: 17508 , pi_approx:  3.14159241489605 , absolute error 2.3869374565777e-07 
numerator: 55358 , denominator: 17621 , pi_approx:  3.14159241813745 , absolute error 2.35452343400055e-07 
numerator: 55713 , denominator: 17734 , pi_approx:  3.14159242133754 , absolute error 2.32252249432463e-07 
numerator: 56068 , denominator: 17847 , pi_approx:  3.14159242449711 , absolute error 2.29092678605269e-07 
numerator: 56423 , denominator: 17960 , pi_approx:  3.14159242761693 , absolute error 2.25972866640944e-07 
numerator: 56778 , denominator: 18073 , pi_approx:  3.14159243069773 , absolute error 2.22892067025526e-07 
numerator: 57133 , denominator: 18186 , pi_approx:  3.14159243374024 , absolute error 2.19849553229068e-07 
numerator: 57488 , denominator: 18299 , pi_approx:  3.14159243674518 , absolute error 2.16844615597012e-07 
numerator: 57843 , denominator: 18412 , pi_approx:  3.14159243971323 , absolute error 2.13876562682458e-07 
numerator: 58198 , denominator: 18525 , pi_approx:  3.14159244264507 , absolute error 2.10944719025719e-07 
numerator: 58553 , denominator: 18638 , pi_approx:  3.14159244554137 , absolute error 2.08048426042495e-07 
numerator: 58908 , denominator: 18751 , pi_approx:  3.14159244840275 , absolute error 2.05187041135702e-07 
numerator: 59263 , denominator: 18864 , pi_approx:  3.14159245122986 , absolute error 2.02359937251373e-07 
numerator: 59618 , denominator: 18977 , pi_approx:  3.14159245402329 , absolute error 1.995665015464e-07 
numerator: 59973 , denominator: 19090 , pi_approx:  3.14159245678366 , absolute error 1.96806136720795e-07 
numerator: 60328 , denominator: 19203 , pi_approx:  3.14159245951153 , absolute error 1.94078258353159e-07 
numerator: 60683 , denominator: 19316 , pi_approx:  3.1415924622075 , absolute error 1.91382296677034e-07 
numerator: 61038 , denominator: 19429 , pi_approx:  3.1415924648721 , absolute error 1.88717694804552e-07 
numerator: 61393 , denominator: 19542 , pi_approx:  3.14159246750588 , absolute error 1.86083908282342e-07 
numerator: 61748 , denominator: 19655 , pi_approx:  3.14159247010939 , absolute error 1.83480405979708e-07 
numerator: 62103 , denominator: 19768 , pi_approx:  3.14159247268312 , absolute error 1.80906668756364e-07 
numerator: 62458 , denominator: 19881 , pi_approx:  3.1415924752276 , absolute error 1.78362189018344e-07 
numerator: 62813 , denominator: 19994 , pi_approx:  3.14159247774332 , absolute error 1.7584647027391e-07 
numerator: 63168 , denominator: 20107 , pi_approx:  3.14159248023077 , absolute error 1.73359027577646e-07 
numerator: 63523 , denominator: 20220 , pi_approx:  3.14159248269041 , absolute error 1.70899387530454e-07 
numerator: 63878 , denominator: 20333 , pi_approx:  3.14159248512271 , absolute error 1.6846708605911e-07 
numerator: 64233 , denominator: 20446 , pi_approx:  3.14159248752812 , absolute error 1.66061670192619e-07 
numerator: 64588 , denominator: 20559 , pi_approx:  3.1415924899071 , absolute error 1.63682696285861e-07 
numerator: 64943 , denominator: 20672 , pi_approx:  3.14159249226006 , absolute error 1.61329731351856e-07 
numerator: 65298 , denominator: 20785 , pi_approx:  3.14159249458744 , absolute error 1.5900235039723e-07 
numerator: 65653 , denominator: 20898 , pi_approx:  3.14159249688965 , absolute error 1.56700138642663e-07 
numerator: 66008 , denominator: 21011 , pi_approx:  3.1415924991671 , absolute error 1.54422690190614e-07 
numerator: 66363 , denominator: 21124 , pi_approx:  3.14159250142019 , absolute error 1.52169607581243e-07 
numerator: 66718 , denominator: 21237 , pi_approx:  3.14159250364929 , absolute error 1.499405017924e-07 
numerator: 67073 , denominator: 21350 , pi_approx:  3.1415925058548 , absolute error 1.47734992239634e-07 
numerator: 67428 , denominator: 21463 , pi_approx:  3.14159250803709 , absolute error 1.45552705888008e-07 
numerator: 67783 , denominator: 21576 , pi_approx:  3.14159251019651 , absolute error 1.43393278584369e-07 
numerator: 68138 , denominator: 21689 , pi_approx:  3.14159251233344 , absolute error 1.41256352392816e-07 
numerator: 68493 , denominator: 21802 , pi_approx:  3.14159251444822 , absolute error 1.39141577371049e-07 
numerator: 68848 , denominator: 21915 , pi_approx:  3.14159251654118 , absolute error 1.37048611126289e-07 
numerator: 69203 , denominator: 22028 , pi_approx:  3.14159251861267 , absolute error 1.34977118371182e-07 
numerator: 69558 , denominator: 22141 , pi_approx:  3.14159252066302 , absolute error 1.32926769591535e-07 
numerator: 69913 , denominator: 22254 , pi_approx:  3.14159252269255 , absolute error 1.30897243266759e-07 
numerator: 70268 , denominator: 22367 , pi_approx:  3.14159252470157 , absolute error 1.28888223649426e-07 
numerator: 70623 , denominator: 22480 , pi_approx:  3.14159252669039 , absolute error 1.26899401653446e-07 
numerator: 70978 , denominator: 22593 , pi_approx:  3.14159252865932 , absolute error 1.2493047396589e-07 
numerator: 71333 , denominator: 22706 , pi_approx:  3.14159253060865 , absolute error 1.22981143491074e-07 
numerator: 71688 , denominator: 22819 , pi_approx:  3.14159253253867 , absolute error 1.21051119350568e-07 
numerator: 72043 , denominator: 22932 , pi_approx:  3.14159253444968 , absolute error 1.19140115995009e-07 
numerator: 72398 , denominator: 23045 , pi_approx:  3.14159253634194 , absolute error 1.17247853648195e-07 
numerator: 72753 , denominator: 23158 , pi_approx:  3.14159253821574 , absolute error 1.15374057862994e-07 
numerator: 73108 , denominator: 23271 , pi_approx:  3.14159254007133 , absolute error 1.13518459521345e-07 
numerator: 73463 , denominator: 23384 , pi_approx:  3.141592541909 , absolute error 1.11680795722435e-07 
numerator: 73818 , denominator: 23497 , pi_approx:  3.14159254372899 , absolute error 1.09860806229989e-07 
numerator: 74173 , denominator: 23610 , pi_approx:  3.14159254553155 , absolute error 1.08058238801334e-07 
numerator: 74528 , denominator: 23723 , pi_approx:  3.14159254731695 , absolute error 1.06272843414246e-07 
numerator: 74883 , denominator: 23836 , pi_approx:  3.14159254908542 , absolute error 1.04504376263748e-07 
numerator: 75238 , denominator: 23949 , pi_approx:  3.1415925508372 , absolute error 1.02752597541667e-07 
numerator: 75593 , denominator: 24062 , pi_approx:  3.14159255257252 , absolute error 1.0101727232481e-07 
numerator: 75948 , denominator: 24175 , pi_approx:  3.14159255429162 , absolute error 9.92981696867901e-08 
numerator: 76303 , denominator: 24288 , pi_approx:  3.14159255599473 , absolute error 9.75950631421085e-08 
numerator: 76658 , denominator: 24401 , pi_approx:  3.14159255768206 , absolute error 9.59077310902501e-08 
numerator: 77013 , denominator: 24514 , pi_approx:  3.14159255935384 , absolute error 9.42359545952343e-08 
numerator: 77368 , denominator: 24627 , pi_approx:  3.14159256101027 , absolute error 9.25795200501511e-08 
numerator: 77723 , denominator: 24740 , pi_approx:  3.14159256265158 , absolute error 9.0938216512626e-08 
numerator: 78078 , denominator: 24853 , pi_approx:  3.14159256427795 , absolute error 8.9311838813444e-08 
numerator: 78433 , denominator: 24966 , pi_approx:  3.14159256588961 , absolute error 8.77001831156576e-08 
numerator: 78788 , denominator: 25079 , pi_approx:  3.14159256748674 , absolute error 8.61030513554795e-08 
numerator: 79143 , denominator: 25192 , pi_approx:  3.14159256906955 , absolute error 8.45202472454787e-08 
numerator: 79498 , denominator: 25305 , pi_approx:  3.14159257063821 , absolute error 8.29515793832059e-08 
numerator: 79853 , denominator: 25418 , pi_approx:  3.14159257219293 , absolute error 8.13968590307468e-08 
numerator: 80208 , denominator: 25531 , pi_approx:  3.14159257373389 , absolute error 7.9855901002901e-08 
numerator: 80563 , denominator: 25644 , pi_approx:  3.14159257526127 , absolute error 7.83285232230924e-08 
numerator: 80918 , denominator: 25757 , pi_approx:  3.14159257677525 , absolute error 7.68145476115478e-08 
numerator: 81273 , denominator: 25870 , pi_approx:  3.141592578276 , absolute error 7.5313797864851e-08 
numerator: 81628 , denominator: 25983 , pi_approx:  3.14159257976369 , absolute error 7.38261016763886e-08 
numerator: 81983 , denominator: 26096 , pi_approx:  3.1415925812385 , absolute error 7.23512889599931e-08 
numerator: 82338 , denominator: 26209 , pi_approx:  3.1415925827006 , absolute error 7.08891940703893e-08 
numerator: 82693 , denominator: 26322 , pi_approx:  3.14159258415014 , absolute error 6.94396526945695e-08 
numerator: 83048 , denominator: 26435 , pi_approx:  3.14159258558729 , absolute error 6.80025036281506e-08 
numerator: 83403 , denominator: 26548 , pi_approx:  3.1415925870122 , absolute error 6.65775887753739e-08 
numerator: 83758 , denominator: 26661 , pi_approx:  3.14159258842504 , absolute error 6.51647527050159e-08 
numerator: 84113 , denominator: 26774 , pi_approx:  3.14159258982595 , absolute error 6.37638426503884e-08 
numerator: 84468 , denominator: 26887 , pi_approx:  3.14159259121509 , absolute error 6.237470762116e-08 
numerator: 84823 , denominator: 27000 , pi_approx:  3.14159259259259 , absolute error 6.09972006238024e-08 
numerator: 85178 , denominator: 27113 , pi_approx:  3.14159259395862 , absolute error 5.96311755529655e-08 
numerator: 85533 , denominator: 27226 , pi_approx:  3.1415925953133 , absolute error 5.82764898560129e-08 
numerator: 85888 , denominator: 27339 , pi_approx:  3.14159259665679 , absolute error 5.69330023125758e-08 
numerator: 86243 , denominator: 27452 , pi_approx:  3.14159259798922 , absolute error 5.56005756990885e-08 
numerator: 86598 , denominator: 27565 , pi_approx:  3.14159259931072 , absolute error 5.42790727919851e-08 
numerator: 86953 , denominator: 27678 , pi_approx:  3.14159260062143 , absolute error 5.29683608085918e-08 
numerator: 87308 , denominator: 27791 , pi_approx:  3.14159260192149 , absolute error 5.16683078544133e-08 
numerator: 87663 , denominator: 27904 , pi_approx:  3.14159260321101 , absolute error 5.03787838113112e-08 
numerator: 88018 , denominator: 28017 , pi_approx:  3.14159260449013 , absolute error 4.90996621138606e-08 
numerator: 88373 , denominator: 28130 , pi_approx:  3.14159260575898 , absolute error 4.78308170848152e-08 
numerator: 88728 , denominator: 28243 , pi_approx:  3.14159260701767 , absolute error 4.65721248232853e-08 
numerator: 89083 , denominator: 28356 , pi_approx:  3.14159260826633 , absolute error 4.53234649810952e-08 
numerator: 89438 , denominator: 28469 , pi_approx:  3.14159260950508 , absolute error 4.40847172100689e-08 
numerator: 89793 , denominator: 28582 , pi_approx:  3.14159261073403 , absolute error 4.28557647147443e-08 
numerator: 90148 , denominator: 28695 , pi_approx:  3.1415926119533 , absolute error 4.16364911437483e-08 
numerator: 90503 , denominator: 28808 , pi_approx:  3.14159261316301 , absolute error 4.04267828102434e-08 
numerator: 90858 , denominator: 28921 , pi_approx:  3.14159261436327 , absolute error 3.92265278037485e-08 
numerator: 91213 , denominator: 29034 , pi_approx:  3.14159261555418 , absolute error 3.80356151019612e-08 
numerator: 91568 , denominator: 29147 , pi_approx:  3.14159261673586 , absolute error 3.68539367912035e-08 
numerator: 91923 , denominator: 29260 , pi_approx:  3.14159261790841 , absolute error 3.56813858459759e-08 
numerator: 92278 , denominator: 29373 , pi_approx:  3.14159261907194 , absolute error 3.45178561289572e-08 
numerator: 92633 , denominator: 29486 , pi_approx:  3.14159262022655 , absolute error 3.33632450555399e-08 
numerator: 92988 , denominator: 29599 , pi_approx:  3.14159262137234 , absolute error 3.22174495970273e-08 
numerator: 93343 , denominator: 29712 , pi_approx:  3.14159262250942 , absolute error 3.10803693892581e-08 
numerator: 93698 , denominator: 29825 , pi_approx:  3.14159262363789 , absolute error 2.99519054003383e-08 
numerator: 94053 , denominator: 29938 , pi_approx:  3.14159262475783 , absolute error 2.88319603747311e-08 
numerator: 94408 , denominator: 30051 , pi_approx:  3.14159262586936 , absolute error 2.77204375009887e-08 
numerator: 94763 , denominator: 30164 , pi_approx:  3.14159262697255 , absolute error 2.66172430762879e-08 
numerator: 95118 , denominator: 30277 , pi_approx:  3.14159262806751 , absolute error 2.55222829537161e-08 
numerator: 95473 , denominator: 30390 , pi_approx:  3.14159262915433 , absolute error 2.44354660949853e-08 
numerator: 95828 , denominator: 30503 , pi_approx:  3.14159263023309 , absolute error 2.33567014618075e-08 
numerator: 96183 , denominator: 30616 , pi_approx:  3.14159263130389 , absolute error 2.22858997922515e-08 
numerator: 96538 , denominator: 30729 , pi_approx:  3.14159263236682 , absolute error 2.1222973600743e-08 
numerator: 96893 , denominator: 30842 , pi_approx:  3.14159263342196 , absolute error 2.01678358457968e-08 
numerator: 97248 , denominator: 30955 , pi_approx:  3.14159263446939 , absolute error 1.91204021504632e-08 
numerator: 97603 , denominator: 31068 , pi_approx:  3.14159263550921 , absolute error 1.80805876937029e-08 
numerator: 97958 , denominator: 31181 , pi_approx:  3.14159263654148 , absolute error 1.70483094308338e-08 
numerator: 98313 , denominator: 31294 , pi_approx:  3.14159263756631 , absolute error 1.60234865376196e-08 
numerator: 98668 , denominator: 31407 , pi_approx:  3.14159263858376 , absolute error 1.50060377457351e-08 
numerator: 99023 , denominator: 31520 , pi_approx:  3.14159263959391 , absolute error 1.39958844513899e-08 
numerator: 99378 , denominator: 31633 , pi_approx:  3.14159264059685 , absolute error 1.2992948050794e-08 
numerator: 99733 , denominator: 31746 , pi_approx:  3.14159264159264 , absolute error 1.19971517165141e-08 
numerator: 100088 , denominator: 31859 , pi_approx:  3.14159264258137 , absolute error 1.1008419065206e-08 
numerator: 100443 , denominator: 31972 , pi_approx:  3.14159264356312 , absolute error 1.00266754898826e-08 
numerator: 100798 , denominator: 32085 , pi_approx:  3.14159264453795 , absolute error 9.0518468276457e-09 
numerator: 101153 , denominator: 32198 , pi_approx:  3.14159264550593 , absolute error 8.08386113604342e-09 
numerator: 101508 , denominator: 32311 , pi_approx:  3.14159264646715 , absolute error 7.12264558444531e-09 
numerator: 101863 , denominator: 32424 , pi_approx:  3.14159264742166 , absolute error 6.1681300067562e-09 
numerator: 102218 , denominator: 32537 , pi_approx:  3.14159264836955 , absolute error 5.22024468097015e-09 
numerator: 102573 , denominator: 32650 , pi_approx:  3.14159264931087 , absolute error 4.27892032917043e-09 
numerator: 102928 , denominator: 32763 , pi_approx:  3.1415926502457 , absolute error 3.34408900570793e-09 
numerator: 103283 , denominator: 32876 , pi_approx:  3.14159265117411 , absolute error 2.41568454129037e-09 
numerator: 103638 , denominator: 32989 , pi_approx:  3.14159265209615 , absolute error 1.49363987844708e-09 
numerator: 103993 , denominator: 33102 , pi_approx:  3.1415926530119 , absolute error 5.77890624242627e-10 
numerator: 104348 , denominator: 33215 , pi_approx:  3.14159265392142 , absolute error 3.31628058347633e-10 
numerator: 208341 , denominator: 66317 , pi_approx:  3.14159265346744 , absolute error 1.22356347276309e-10 
numerator: 312689 , denominator: 99532 , pi_approx:  3.14159265361894 , absolute error 2.91433543964104e-11 
numerator: 833719 , denominator: 265381 , pi_approx:  3.14159265358108 , absolute error 8.71525074330748e-12 
numerator: 1146408 , denominator: 364913 , pi_approx:  3.1415926535914 , absolute error 1.61071156412618e-12 
numerator: 3126535 , denominator: 995207 , pi_approx:  3.14159265358865 , absolute error 1.14264153694421e-12 
numerator: 4272943 , denominator: 1360120 , pi_approx:  3.14159265358939 , absolute error 4.04121180963557e-13 
numerator: 5419351 , denominator: 1725033 , pi_approx:  3.14159265358982 , absolute error 2.22044604925031e-14 </code></pre>
</div>
</div>



 ]]></description>
  <category>R</category>
  <guid>https://sbloggel.netlify.app/posts/2023-07-23-approximating-pi/2023-07-23-approximating-pi.html</guid>
  <pubDate>Sat, 22 Jul 2023 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Bicycle comparison</title>
  <dc:creator>Sebastian Gerdes</dc:creator>
  <link>https://sbloggel.netlify.app/posts/2023-07-23-bicycle-comparison/2023-07-23-bicycle-comparison.html</link>
  <description><![CDATA[ 



<p><img src="https://sbloggel.netlify.app/posts/2023-07-23-bicycle-comparison/koga_old.jpeg" class="img-fluid" style="width:32.0%" data-fig-align="center"> <img src="https://sbloggel.netlify.app/posts/2023-07-23-bicycle-comparison/koga_new.jpeg" class="img-fluid" style="width:32.0%" data-fig-align="center"> <img src="https://sbloggel.netlify.app/posts/2023-07-23-bicycle-comparison/hammerbacher.jpeg" class="img-fluid" style="width:32.0%" data-fig-align="center"></p>



 ]]></description>
  <category>R</category>
  <guid>https://sbloggel.netlify.app/posts/2023-07-23-bicycle-comparison/2023-07-23-bicycle-comparison.html</guid>
  <pubDate>Sat, 22 Jul 2023 22:00:00 GMT</pubDate>
</item>
<item>
  <title>First pytorch tutorial</title>
  <dc:creator>Sebastian Gerdes</dc:creator>
  <link>https://sbloggel.netlify.app/posts/2023-07-21-first-pytorch-tutorial/2023-07-21-first-pytorch-tutorial.html</link>
  <description><![CDATA[ 



<ul>
<li><a href="https://pytorch.org/tutorials/beginner/basics/quickstart_tutorial.html">Link to tutorial</a></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'tidyverse'</span>)</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.2     ✔ readr     2.1.4
✔ forcats   1.0.0     ✔ stringr   1.5.0
✔ ggplot2   3.4.2     ✔ tibble    3.2.1
✔ lubridate 1.9.2     ✔ tidyr     1.3.0
✔ purrr     1.0.1     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">set.seed</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb3-2"></span>
<span id="cb3-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'reticulate'</span>)</span>
<span id="cb3-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">use_condaenv</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'machine_learning'</span>)</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> torch</span>
<span id="cb4-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> torch <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> nn</span>
<span id="cb4-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> torch.utils.data <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> DataLoader</span>
<span id="cb4-4"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> torchvision <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> datasets</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>/Users/seb/Library/r-miniconda-arm64/envs/machine_learning/lib/python3.9/site-packages/torchvision/io/image.py:13: UserWarning: Failed to load image Python extension: 'dlopen(/Users/seb/Library/r-miniconda-arm64/envs/machine_learning/lib/python3.9/site-packages/torchvision/image.so, 0x0006): Symbol not found: (__ZN3c106detail19maybe_wrap_dim_slowIxEET_S2_S2_b)
  Referenced from: '/Users/seb/Library/r-miniconda-arm64/envs/machine_learning/lib/python3.9/site-packages/torchvision/image.so'
  Expected in: '/Users/seb/Library/r-miniconda-arm64/envs/machine_learning/lib/python3.9/site-packages/torch/lib/libc10.dylib''If you don't plan on using image functionality from `torchvision.io`, you can ignore this warning. Otherwise, there might be something wrong with your environment. Did you have `libjpeg` or `libpng` installed before building `torchvision` from source?
  warn(</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> torchvision.transforms <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> ToTensor</span>
<span id="cb6-2"></span>
<span id="cb6-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Download training data from open datasets.</span></span>
<span id="cb6-4">training_data <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> datasets.FashionMNIST(</span>
<span id="cb6-5">    root<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data"</span>,</span>
<span id="cb6-6">    train<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>,</span>
<span id="cb6-7">    download<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>,</span>
<span id="cb6-8">    transform<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ToTensor(),</span>
<span id="cb6-9">)</span>
<span id="cb6-10"></span>
<span id="cb6-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Download test data from open datasets.</span></span>
<span id="cb6-12">test_data <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> datasets.FashionMNIST(</span>
<span id="cb6-13">    root<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data"</span>,</span>
<span id="cb6-14">    train<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span>,</span>
<span id="cb6-15">    download<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>,</span>
<span id="cb6-16">    transform<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ToTensor(),</span>
<span id="cb6-17">)</span>
<span id="cb6-18"></span>
<span id="cb6-19"></span>
<span id="cb6-20">training_data.data.shape</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>torch.Size([60000, 28, 28])</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1">test_data.data.shape</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>torch.Size([10000, 28, 28])</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1">batch_size <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">64</span></span>
<span id="cb10-2"></span>
<span id="cb10-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create data loaders.</span></span>
<span id="cb10-4">train_dataloader <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> DataLoader(training_data, batch_size<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>batch_size)</span>
<span id="cb10-5">test_dataloader <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> DataLoader(test_data, batch_size<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>batch_size)</span>
<span id="cb10-6"></span>
<span id="cb10-7"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> X, y <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> test_dataloader:</span>
<span id="cb10-8">    <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"Shape of X [N, C, H, W]: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>X<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span>shape<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb10-9">    <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"Shape of y: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>y<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span>shape<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;"> </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>y<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span>dtype<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb10-10">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">break</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Shape of X [N, C, H, W]: torch.Size([64, 1, 28, 28])
Shape of y: torch.Size([64]) torch.int64</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Get cpu, gpu or mps device for training.</span></span>
<span id="cb12-2">device <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> (</span>
<span id="cb12-3">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"cuda"</span></span>
<span id="cb12-4">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> torch.cuda.is_available()</span>
<span id="cb12-5">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mps"</span></span>
<span id="cb12-6">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> torch.backends.mps.is_available()</span>
<span id="cb12-7">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"cpu"</span></span>
<span id="cb12-8">)</span>
<span id="cb12-9"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"Using </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>device<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;"> device"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Using mps device</code></pre>
</div>
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Define model</span></span>
<span id="cb14-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">class</span> NeuralNetwork(nn.Module):</span>
<span id="cb14-3">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">__init__</span>(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>):</span>
<span id="cb14-4">        <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">super</span>().<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">__init__</span>()</span>
<span id="cb14-5">        <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.flatten <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> nn.Flatten()</span>
<span id="cb14-6">        <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.linear_relu_stack <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> nn.Sequential(</span>
<span id="cb14-7">            nn.Linear(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">28</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">28</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">512</span>),</span>
<span id="cb14-8">            nn.ReLU(),</span>
<span id="cb14-9">            nn.Linear(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">512</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">512</span>),</span>
<span id="cb14-10">            nn.ReLU(),</span>
<span id="cb14-11">            nn.Linear(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">512</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>)</span>
<span id="cb14-12">        )</span>
<span id="cb14-13"></span>
<span id="cb14-14">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> forward(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>, x):</span>
<span id="cb14-15">        x <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.flatten(x)</span>
<span id="cb14-16">        logits <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.linear_relu_stack(x)</span>
<span id="cb14-17">        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> logits</span>
<span id="cb14-18"></span>
<span id="cb14-19">model <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> NeuralNetwork().to(device)</span>
<span id="cb14-20"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(model)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>NeuralNetwork(
  (flatten): Flatten(start_dim=1, end_dim=-1)
  (linear_relu_stack): Sequential(
    (0): Linear(in_features=784, out_features=512, bias=True)
    (1): ReLU()
    (2): Linear(in_features=512, out_features=512, bias=True)
    (3): ReLU()
    (4): Linear(in_features=512, out_features=10, bias=True)
  )
)</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1">loss_fn <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> nn.CrossEntropyLoss()</span>
<span id="cb16-2">optimizer <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> torch.optim.SGD(model.parameters(), lr<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1e-3</span>)</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> train(dataloader, model, loss_fn, optimizer):</span>
<span id="cb17-2">    size <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">len</span>(dataloader.dataset)</span>
<span id="cb17-3">    model.train()</span>
<span id="cb17-4">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> batch, (X, y) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">enumerate</span>(dataloader):</span>
<span id="cb17-5">        X, y <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> X.to(device), y.to(device)</span>
<span id="cb17-6"></span>
<span id="cb17-7">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Compute prediction error</span></span>
<span id="cb17-8">        pred <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> model(X)</span>
<span id="cb17-9">        loss <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> loss_fn(pred, y)</span>
<span id="cb17-10"></span>
<span id="cb17-11">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Backpropagation</span></span>
<span id="cb17-12">        loss.backward()</span>
<span id="cb17-13">        optimizer.step()</span>
<span id="cb17-14">        optimizer.zero_grad()</span>
<span id="cb17-15"></span>
<span id="cb17-16">        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> batch <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>:</span>
<span id="cb17-17">            loss, current <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> loss.item(), (batch <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">len</span>(X)</span>
<span id="cb17-18">            <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"loss: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>loss<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:&gt;7f}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">  [</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>current<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:&gt;5d}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">/</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>size<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:&gt;5d}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">]"</span>)</span>
<span id="cb17-19">            </span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> test(dataloader, model, loss_fn):</span>
<span id="cb18-2">    size <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">len</span>(dataloader.dataset)</span>
<span id="cb18-3">    num_batches <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">len</span>(dataloader)</span>
<span id="cb18-4">    model.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">eval</span>()</span>
<span id="cb18-5">    test_loss, correct <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb18-6">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">with</span> torch.no_grad():</span>
<span id="cb18-7">        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> X, y <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> dataloader:</span>
<span id="cb18-8">            X, y <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> X.to(device), y.to(device)</span>
<span id="cb18-9">            pred <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> model(X)</span>
<span id="cb18-10">            test_loss <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+=</span> loss_fn(pred, y).item()</span>
<span id="cb18-11">            correct <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+=</span> (pred.argmax(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> y).<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">type</span>(torch.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">float</span>).<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>().item()</span>
<span id="cb18-12">    test_loss <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/=</span> num_batches</span>
<span id="cb18-13">    correct <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/=</span> size</span>
<span id="cb18-14">    <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"Test Error: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;"> Accuracy: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>correct)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:&gt;0.1f}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">%, Avg loss: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>test_loss<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:&gt;8f}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;"> </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1">epochs <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span></span>
<span id="cb19-2"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> t <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">range</span>(epochs):</span>
<span id="cb19-3">    <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"Epoch </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>t<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">-------------------------------"</span>)</span>
<span id="cb19-4">    train(train_dataloader, model, loss_fn, optimizer)</span>
<span id="cb19-5">    test(test_dataloader, model, loss_fn)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Epoch 1
-------------------------------
loss: 2.308264  [   64/60000]
loss: 2.293125  [ 6464/60000]
loss: 2.272566  [12864/60000]
loss: 2.268989  [19264/60000]
loss: 2.242235  [25664/60000]
loss: 2.217603  [32064/60000]
loss: 2.219540  [38464/60000]
loss: 2.189466  [44864/60000]
loss: 2.201402  [51264/60000]
loss: 2.155387  [57664/60000]
Test Error: 
 Accuracy: 55.3%, Avg loss: 2.152392 

Epoch 2
-------------------------------
loss: 2.166718  [   64/60000]
loss: 2.151713  [ 6464/60000]
loss: 2.091146  [12864/60000]
loss: 2.113186  [19264/60000]
loss: 2.042603  [25664/60000]
loss: 1.990383  [32064/60000]
loss: 2.011725  [38464/60000]
loss: 1.935344  [44864/60000]
loss: 1.955811  [51264/60000]
loss: 1.868298  [57664/60000]
Test Error: 
 Accuracy: 60.2%, Avg loss: 1.868228 

Epoch 3
-------------------------------
loss: 1.902832  [   64/60000]
loss: 1.868233  [ 6464/60000]
loss: 1.745899  [12864/60000]
loss: 1.795774  [19264/60000]
loss: 1.664541  [25664/60000]
loss: 1.621758  [32064/60000]
loss: 1.637972  [38464/60000]
loss: 1.547655  [44864/60000]
loss: 1.581732  [51264/60000]
loss: 1.463945  [57664/60000]
Test Error: 
 Accuracy: 62.1%, Avg loss: 1.486784 

Epoch 4
-------------------------------
loss: 1.553752  [   64/60000]
loss: 1.521968  [ 6464/60000]
loss: 1.363211  [12864/60000]
loss: 1.443876  [19264/60000]
loss: 1.313316  [25664/60000]
loss: 1.310792  [32064/60000]
loss: 1.326083  [38464/60000]
loss: 1.257503  [44864/60000]
loss: 1.302350  [51264/60000]
loss: 1.196620  [57664/60000]
Test Error: 
 Accuracy: 63.9%, Avg loss: 1.223636 

Epoch 5
-------------------------------
loss: 1.296221  [   64/60000]
loss: 1.287105  [ 6464/60000]
loss: 1.111054  [12864/60000]
loss: 1.227450  [19264/60000]
loss: 1.095856  [25664/60000]
loss: 1.115949  [32064/60000]
loss: 1.144591  [38464/60000]
loss: 1.083400  [44864/60000]
loss: 1.135926  [51264/60000]
loss: 1.047703  [57664/60000]
Test Error: 
 Accuracy: 65.0%, Avg loss: 1.067398 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb21" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Done!"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Done!</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb23" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1">torch.save(model.state_dict(), <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"model.pth"</span>)</span>
<span id="cb23-2"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Saved PyTorch Model State to model.pth"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Saved PyTorch Model State to model.pth</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb25" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1">model <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> NeuralNetwork().to(device)</span>
<span id="cb25-2">model.load_state_dict(torch.load(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"model.pth"</span>))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;All keys matched successfully&gt;</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb27" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1">classes <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [</span>
<span id="cb27-2">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"T-shirt/top"</span>,</span>
<span id="cb27-3">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Trouser"</span>,</span>
<span id="cb27-4">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Pullover"</span>,</span>
<span id="cb27-5">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Dress"</span>,</span>
<span id="cb27-6">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coat"</span>,</span>
<span id="cb27-7">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Sandal"</span>,</span>
<span id="cb27-8">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Shirt"</span>,</span>
<span id="cb27-9">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Sneaker"</span>,</span>
<span id="cb27-10">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Bag"</span>,</span>
<span id="cb27-11">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Ankle boot"</span>,</span>
<span id="cb27-12">]</span>
<span id="cb27-13"></span>
<span id="cb27-14">model.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">eval</span>()</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>NeuralNetwork(
  (flatten): Flatten(start_dim=1, end_dim=-1)
  (linear_relu_stack): Sequential(
    (0): Linear(in_features=784, out_features=512, bias=True)
    (1): ReLU()
    (2): Linear(in_features=512, out_features=512, bias=True)
    (3): ReLU()
    (4): Linear(in_features=512, out_features=10, bias=True)
  )
)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1">x, y <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> test_data[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>][<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>], test_data[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>][<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]</span>
<span id="cb29-2"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">with</span> torch.no_grad():</span>
<span id="cb29-3">    x <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> x.to(device)</span>
<span id="cb29-4">    pred <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> model(x)</span>
<span id="cb29-5">    predicted, actual <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> classes[pred[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>].argmax(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)], classes[y]</span>
<span id="cb29-6">    <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f'Predicted: "</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>predicted<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">", Actual: "</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>actual<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"'</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Predicted: "Ankle boot", Actual: "Ankle boot"</code></pre>
</div>
</div>



 ]]></description>
  <category>Python</category>
  <guid>https://sbloggel.netlify.app/posts/2023-07-21-first-pytorch-tutorial/2023-07-21-first-pytorch-tutorial.html</guid>
  <pubDate>Thu, 20 Jul 2023 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Starting with fastai</title>
  <dc:creator>Sebastian Gerdes</dc:creator>
  <link>https://sbloggel.netlify.app/posts/2023-07-20-starting-with-fastai/2023-07-20-starting-with-fastai.html</link>
  <description><![CDATA[ 



<ul>
<li><a href="https://course.fast.ai/Resources/book.html">Link to the book</a></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'tidyverse'</span>)</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.2     ✔ readr     2.1.4
✔ forcats   1.0.0     ✔ stringr   1.5.0
✔ ggplot2   3.4.2     ✔ tibble    3.2.1
✔ lubridate 1.9.2     ✔ tidyr     1.3.0
✔ purrr     1.0.1     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">set.seed</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb3-2"></span>
<span id="cb3-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'reticulate'</span>)</span>
<span id="cb3-4"></span>
<span id="cb3-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># conda_create('machine_learning')</span></span>
<span id="cb3-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">use_condaenv</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'machine_learning'</span>)</span>
<span id="cb3-7"></span>
<span id="cb3-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># conda_install('machine_learning', 'fastai')</span></span>
<span id="cb3-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># conda_install('machine_learning', 'torchvision')</span></span>
<span id="cb3-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># conda_install('machine_learning', 'pytorch')</span></span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#id first_training</span></span>
<span id="cb4-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#caption Results from the first training</span></span>
<span id="cb4-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># CLICK ME</span></span>
<span id="cb4-4"></span>
<span id="cb4-5"></span>
<span id="cb4-6"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> torch</span>
<span id="cb4-7">x <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> torch.rand(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)</span>
<span id="cb4-8"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(x)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>tensor([[0.6049, 0.7627, 0.0083],
        [0.5420, 0.0231, 0.7970],
        [0.9335, 0.4393, 0.2625],
        [0.7199, 0.0066, 0.1776],
        [0.9718, 0.5141, 0.1373]])</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> fastai.vision.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">all</span> <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>/Users/seb/Library/r-miniconda-arm64/envs/machine_learning/lib/python3.9/site-packages/torchvision/io/image.py:13: UserWarning: Failed to load image Python extension: 'dlopen(/Users/seb/Library/r-miniconda-arm64/envs/machine_learning/lib/python3.9/site-packages/torchvision/image.so, 0x0006): Symbol not found: (__ZN3c106detail19maybe_wrap_dim_slowIxEET_S2_S2_b)
  Referenced from: '/Users/seb/Library/r-miniconda-arm64/envs/machine_learning/lib/python3.9/site-packages/torchvision/image.so'
  Expected in: '/Users/seb/Library/r-miniconda-arm64/envs/machine_learning/lib/python3.9/site-packages/torch/lib/libc10.dylib''If you don't plan on using image functionality from `torchvision.io`, you can ignore this warning. Otherwise, there might be something wrong with your environment. Did you have `libjpeg` or `libpng` installed before building `torchvision` from source?
  warn(</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1">path <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> untar_data(URLs.PETS)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'images'</span></span>
<span id="cb8-2"></span>
<span id="cb8-3"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> is_cat(x): <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> x[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>].isupper()</span>
<span id="cb8-4">dls <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> ImageDataLoaders.from_name_func(</span>
<span id="cb8-5">    path, get_image_files(path), valid_pct<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.2</span>, seed<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">42</span>,</span>
<span id="cb8-6">    label_func<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>is_cat, item_tfms<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>Resize(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">224</span>))</span>
<span id="cb8-7"></span>
<span id="cb8-8">learn <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> vision_learner(dls, resnet34, metrics<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>error_rate)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>/Users/seb/Library/r-miniconda-arm64/envs/machine_learning/lib/python3.9/site-packages/torchvision/models/_utils.py:208: UserWarning: The parameter 'pretrained' is deprecated since 0.13 and may be removed in the future, please use 'weights' instead.
  warnings.warn(
/Users/seb/Library/r-miniconda-arm64/envs/machine_learning/lib/python3.9/site-packages/torchvision/models/_utils.py:223: UserWarning: Arguments other than a weight enum or `None` for 'weights' are deprecated since 0.13 and may be removed in the future. The current behavior is equivalent to passing `weights=ResNet34_Weights.IMAGENET1K_V1`. You can also use `weights=ResNet34_Weights.DEFAULT` to get the most up-to-date weights.
  warnings.warn(msg)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1">learn.fine_tune(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>█
epoch     train_loss  valid_loss  error_rate  time    
█

Epoch 1/1 : |----------------------------------------| 0.00% [0/92 00:00&lt;?]

Epoch 1/1 : |----------------------------------------| 1.09% [1/92 00:00&lt;01:11]

Epoch 1/1 : |----------------------------------------| 2.17% [2/92 00:01&lt;01:03 1.8910]

Epoch 1/1 : |█---------------------------------------| 3.26% [3/92 00:02&lt;01:00 1.9657]

Epoch 1/1 : |█---------------------------------------| 4.35% [4/92 00:02&lt;00:58 1.7734]

Epoch 1/1 : |██--------------------------------------| 5.43% [5/92 00:03&lt;00:56 1.6578]

Epoch 1/1 : |██--------------------------------------| 6.52% [6/92 00:03&lt;00:55 1.6069]

Epoch 1/1 : |███-------------------------------------| 7.61% [7/92 00:04&lt;00:54 1.5560]

Epoch 1/1 : |███-------------------------------------| 8.70% [8/92 00:05&lt;00:54 1.5045]

Epoch 1/1 : |███-------------------------------------| 9.78% [9/92 00:05&lt;00:53 1.4761]

Epoch 1/1 : |████------------------------------------| 10.87% [10/92 00:06&lt;00:53 1.4145]

Epoch 1/1 : |████------------------------------------| 11.96% [11/92 00:07&lt;00:52 1.3537]

Epoch 1/1 : |█████-----------------------------------| 13.04% [12/92 00:07&lt;00:51 1.3306]

Epoch 1/1 : |█████-----------------------------------| 14.13% [13/92 00:08&lt;00:51 1.2733]

Epoch 1/1 : |██████----------------------------------| 15.22% [14/92 00:09&lt;00:50 1.2394]

Epoch 1/1 : |██████----------------------------------| 16.30% [15/92 00:09&lt;00:49 1.2001]

Epoch 1/1 : |██████----------------------------------| 17.39% [16/92 00:10&lt;00:48 1.1647]

Epoch 1/1 : |███████---------------------------------| 18.48% [17/92 00:10&lt;00:48 1.1171]

Epoch 1/1 : |███████---------------------------------| 19.57% [18/92 00:11&lt;00:47 1.0695]

Epoch 1/1 : |████████--------------------------------| 20.65% [19/92 00:12&lt;00:47 1.0127]

Epoch 1/1 : |████████--------------------------------| 21.74% [20/92 00:12&lt;00:46 0.9695]

Epoch 1/1 : |█████████-------------------------------| 22.83% [21/92 00:13&lt;00:45 0.9318]

Epoch 1/1 : |█████████-------------------------------| 23.91% [22/92 00:14&lt;00:45 0.8980]

Epoch 1/1 : |██████████------------------------------| 25.00% [23/92 00:14&lt;00:44 0.8586]

Epoch 1/1 : |██████████------------------------------| 26.09% [24/92 00:15&lt;00:44 0.8289]

Epoch 1/1 : |██████████------------------------------| 27.17% [25/92 00:16&lt;00:43 0.8003]

Epoch 1/1 : |███████████-----------------------------| 28.26% [26/92 00:16&lt;00:42 0.7684]

Epoch 1/1 : |███████████-----------------------------| 29.35% [27/92 00:17&lt;00:41 0.7496]

Epoch 1/1 : |████████████----------------------------| 30.43% [28/92 00:18&lt;00:41 0.7307]

Epoch 1/1 : |████████████----------------------------| 31.52% [29/92 00:18&lt;00:40 0.7151]

Epoch 1/1 : |█████████████---------------------------| 32.61% [30/92 00:19&lt;00:39 0.7171]

Epoch 1/1 : |█████████████---------------------------| 33.70% [31/92 00:19&lt;00:39 0.6873]

Epoch 1/1 : |█████████████---------------------------| 34.78% [32/92 00:20&lt;00:38 0.6628]

Epoch 1/1 : |██████████████--------------------------| 35.87% [33/92 00:21&lt;00:37 0.6490]

Epoch 1/1 : |██████████████--------------------------| 36.96% [34/92 00:21&lt;00:37 0.6238]

Epoch 1/1 : |███████████████-------------------------| 38.04% [35/92 00:22&lt;00:36 0.6011]

Epoch 1/1 : |███████████████-------------------------| 39.13% [36/92 00:22&lt;00:35 0.5817]

Epoch 1/1 : |████████████████------------------------| 40.22% [37/92 00:23&lt;00:35 0.5627]

Epoch 1/1 : |████████████████------------------------| 41.30% [38/92 00:24&lt;00:34 0.5436]

Epoch 1/1 : |████████████████------------------------| 42.39% [39/92 00:24&lt;00:33 0.5236]

Epoch 1/1 : |█████████████████-----------------------| 43.48% [40/92 00:25&lt;00:33 0.5079]

Epoch 1/1 : |█████████████████-----------------------| 44.57% [41/92 00:26&lt;00:32 0.4935]

Epoch 1/1 : |██████████████████----------------------| 45.65% [42/92 00:26&lt;00:31 0.4778]

Epoch 1/1 : |██████████████████----------------------| 46.74% [43/92 00:27&lt;00:31 0.4650]

Epoch 1/1 : |███████████████████---------------------| 47.83% [44/92 00:28&lt;00:30 0.4598]

Epoch 1/1 : |███████████████████---------------------| 48.91% [45/92 00:28&lt;00:29 0.4534]

Epoch 1/1 : |████████████████████--------------------| 50.00% [46/92 00:29&lt;00:29 0.4393]

Epoch 1/1 : |████████████████████--------------------| 51.09% [47/92 00:29&lt;00:28 0.4275]

Epoch 1/1 : |████████████████████--------------------| 52.17% [48/92 00:30&lt;00:27 0.4147]

Epoch 1/1 : |█████████████████████-------------------| 53.26% [49/92 00:31&lt;00:27 0.4136]

Epoch 1/1 : |█████████████████████-------------------| 54.35% [50/92 00:31&lt;00:26 0.4013]

Epoch 1/1 : |██████████████████████------------------| 55.43% [51/92 00:32&lt;00:26 0.3913]

Epoch 1/1 : |██████████████████████------------------| 56.52% [52/92 00:33&lt;00:25 0.3847]

Epoch 1/1 : |███████████████████████-----------------| 57.61% [53/92 00:33&lt;00:24 0.3770]

Epoch 1/1 : |███████████████████████-----------------| 58.70% [54/92 00:34&lt;00:24 0.3667]

Epoch 1/1 : |███████████████████████-----------------| 59.78% [55/92 00:34&lt;00:23 0.3560]

Epoch 1/1 : |████████████████████████----------------| 60.87% [56/92 00:35&lt;00:22 0.3456]

Epoch 1/1 : |████████████████████████----------------| 61.96% [57/92 00:36&lt;00:22 0.3383]

Epoch 1/1 : |█████████████████████████---------------| 63.04% [58/92 00:36&lt;00:21 0.3351]

Epoch 1/1 : |█████████████████████████---------------| 64.13% [59/92 00:37&lt;00:21 0.3261]

Epoch 1/1 : |██████████████████████████--------------| 65.22% [60/92 00:38&lt;00:20 0.3226]

Epoch 1/1 : |██████████████████████████--------------| 66.30% [61/92 00:38&lt;00:19 0.3138]

Epoch 1/1 : |██████████████████████████--------------| 67.39% [62/92 00:39&lt;00:19 0.3054]

Epoch 1/1 : |███████████████████████████-------------| 68.48% [63/92 00:40&lt;00:18 0.3015]

Epoch 1/1 : |███████████████████████████-------------| 69.57% [64/92 00:40&lt;00:17 0.2947]

Epoch 1/1 : |████████████████████████████------------| 70.65% [65/92 00:41&lt;00:17 0.2881]

Epoch 1/1 : |████████████████████████████------------| 71.74% [66/92 00:42&lt;00:16 0.2826]

Epoch 1/1 : |█████████████████████████████-----------| 72.83% [67/92 00:42&lt;00:15 0.2753]

Epoch 1/1 : |█████████████████████████████-----------| 73.91% [68/92 00:43&lt;00:15 0.2681]

Epoch 1/1 : |██████████████████████████████----------| 75.00% [69/92 00:43&lt;00:14 0.2675]

Epoch 1/1 : |██████████████████████████████----------| 76.09% [70/92 00:44&lt;00:14 0.2628]

Epoch 1/1 : |██████████████████████████████----------| 77.17% [71/92 00:45&lt;00:13 0.2567]

Epoch 1/1 : |███████████████████████████████---------| 78.26% [72/92 00:45&lt;00:12 0.2502]

Epoch 1/1 : |███████████████████████████████---------| 79.35% [73/92 00:46&lt;00:12 0.2438]

Epoch 1/1 : |████████████████████████████████--------| 80.43% [74/92 00:47&lt;00:11 0.2404]

Epoch 1/1 : |████████████████████████████████--------| 81.52% [75/92 00:47&lt;00:10 0.2346]

Epoch 1/1 : |█████████████████████████████████-------| 82.61% [76/92 00:48&lt;00:10 0.2311]

Epoch 1/1 : |█████████████████████████████████-------| 83.70% [77/92 00:49&lt;00:09 0.2401]

Epoch 1/1 : |█████████████████████████████████-------| 84.78% [78/92 00:49&lt;00:08 0.2367]

Epoch 1/1 : |██████████████████████████████████------| 85.87% [79/92 00:50&lt;00:08 0.2309]

Epoch 1/1 : |██████████████████████████████████------| 86.96% [80/92 00:50&lt;00:07 0.2287]

Epoch 1/1 : |███████████████████████████████████-----| 88.04% [81/92 00:51&lt;00:07 0.2279]

Epoch 1/1 : |███████████████████████████████████-----| 89.13% [82/92 00:52&lt;00:06 0.2228]

Epoch 1/1 : |████████████████████████████████████----| 90.22% [83/92 00:52&lt;00:05 0.2185]

Epoch 1/1 : |████████████████████████████████████----| 91.30% [84/92 00:53&lt;00:05 0.2132]

Epoch 1/1 : |████████████████████████████████████----| 92.39% [85/92 00:54&lt;00:04 0.2105]

Epoch 1/1 : |█████████████████████████████████████---| 93.48% [86/92 00:54&lt;00:03 0.2075]

Epoch 1/1 : |█████████████████████████████████████---| 94.57% [87/92 00:55&lt;00:03 0.2025]

Epoch 1/1 : |██████████████████████████████████████--| 95.65% [88/92 00:55&lt;00:02 0.1978]

Epoch 1/1 : |██████████████████████████████████████--| 96.74% [89/92 00:56&lt;00:01 0.1954]

Epoch 1/1 : |███████████████████████████████████████-| 97.83% [90/92 00:57&lt;00:01 0.1915]

Epoch 1/1 : |███████████████████████████████████████-| 98.91% [91/92 00:57&lt;00:00 0.1897]

Epoch 1/1 : |████████████████████████████████████████| 100.00% [92/92 00:58&lt;00:00 0.1865]

Epoch 1/1 :                                                                              

Epoch 1/1 :                                                                              
█

Epoch 1/1 : |----------------------------------------| 0.00% [0/24 00:00&lt;?]

Epoch 1/1 : |█---------------------------------------| 4.17% [1/24 00:00&lt;00:08]

Epoch 1/1 : |███-------------------------------------| 8.33% [2/24 00:00&lt;00:07 0.1867]

Epoch 1/1 : |█████-----------------------------------| 12.50% [3/24 00:01&lt;00:07 0.1867]

Epoch 1/1 : |██████----------------------------------| 16.67% [4/24 00:01&lt;00:07 0.1867]

Epoch 1/1 : |████████--------------------------------| 20.83% [5/24 00:01&lt;00:06 0.1867]

Epoch 1/1 : |██████████------------------------------| 25.00% [6/24 00:02&lt;00:06 0.1867]

Epoch 1/1 : |███████████-----------------------------| 29.17% [7/24 00:02&lt;00:05 0.1867]

Epoch 1/1 : |█████████████---------------------------| 33.33% [8/24 00:02&lt;00:05 0.1867]

Epoch 1/1 : |███████████████-------------------------| 37.50% [9/24 00:03&lt;00:05 0.1867]

Epoch 1/1 : |████████████████------------------------| 41.67% [10/24 00:03&lt;00:04 0.1867]

Epoch 1/1 : |██████████████████----------------------| 45.83% [11/24 00:03&lt;00:04 0.1867]

Epoch 1/1 : |████████████████████--------------------| 50.00% [12/24 00:04&lt;00:04 0.1867]

Epoch 1/1 : |█████████████████████-------------------| 54.17% [13/24 00:04&lt;00:03 0.1867]

Epoch 1/1 : |███████████████████████-----------------| 58.33% [14/24 00:04&lt;00:03 0.1867]

Epoch 1/1 : |█████████████████████████---------------| 62.50% [15/24 00:05&lt;00:03 0.1867]

Epoch 1/1 : |██████████████████████████--------------| 66.67% [16/24 00:05&lt;00:02 0.1867]

Epoch 1/1 : |████████████████████████████------------| 70.83% [17/24 00:05&lt;00:02 0.1867]

Epoch 1/1 : |██████████████████████████████----------| 75.00% [18/24 00:06&lt;00:02 0.1867]

Epoch 1/1 : |███████████████████████████████---------| 79.17% [19/24 00:06&lt;00:01 0.1867]

Epoch 1/1 : |█████████████████████████████████-------| 83.33% [20/24 00:07&lt;00:01 0.1867]

Epoch 1/1 : |███████████████████████████████████-----| 87.50% [21/24 00:07&lt;00:01 0.1867]

Epoch 1/1 : |████████████████████████████████████----| 91.67% [22/24 00:07&lt;00:00 0.1867]

Epoch 1/1 : |██████████████████████████████████████--| 95.83% [23/24 00:08&lt;00:00 0.1867]

Epoch 1/1 : |████████████████████████████████████████| 100.00% [24/24 00:08&lt;00:00 0.1867]

Epoch 1/1 :                                                                              

Epoch 1/1 :                                                                              
0         0.186726    0.036176    0.012855    01:06     
█
epoch     train_loss  valid_loss  error_rate  time    
█

Epoch 1/1 : |----------------------------------------| 0.00% [0/92 00:00&lt;?]

Epoch 1/1 : |----------------------------------------| 1.09% [1/92 00:00&lt;01:27]

Epoch 1/1 : |----------------------------------------| 2.17% [2/92 00:01&lt;01:28 0.0047]

Epoch 1/1 : |█---------------------------------------| 3.26% [3/92 00:02&lt;01:23 0.0539]

Epoch 1/1 : |█---------------------------------------| 4.35% [4/92 00:03&lt;01:21 0.0895]

Epoch 1/1 : |██--------------------------------------| 5.43% [5/92 00:04&lt;01:19 0.0868]

Epoch 1/1 : |██--------------------------------------| 6.52% [6/92 00:05&lt;01:17 0.0715]

Epoch 1/1 : |███-------------------------------------| 7.61% [7/92 00:06&lt;01:16 0.0628]

Epoch 1/1 : |███-------------------------------------| 8.70% [8/92 00:07&lt;01:14 0.0534]

Epoch 1/1 : |███-------------------------------------| 9.78% [9/92 00:07&lt;01:13 0.0703]

Epoch 1/1 : |████------------------------------------| 10.87% [10/92 00:08&lt;01:12 0.0871]

Epoch 1/1 : |████------------------------------------| 11.96% [11/92 00:09&lt;01:11 0.0879]

Epoch 1/1 : |█████-----------------------------------| 13.04% [12/92 00:10&lt;01:10 0.0861]

Epoch 1/1 : |█████-----------------------------------| 14.13% [13/92 00:11&lt;01:09 0.0784]

Epoch 1/1 : |██████----------------------------------| 15.22% [14/92 00:12&lt;01:08 0.0719]

Epoch 1/1 : |██████----------------------------------| 16.30% [15/92 00:13&lt;01:07 0.0676]

Epoch 1/1 : |██████----------------------------------| 17.39% [16/92 00:13&lt;01:06 0.0661]

Epoch 1/1 : |███████---------------------------------| 18.48% [17/92 00:14&lt;01:05 0.0617]

Epoch 1/1 : |███████---------------------------------| 19.57% [18/92 00:15&lt;01:04 0.0673]

Epoch 1/1 : |████████--------------------------------| 20.65% [19/92 00:16&lt;01:03 0.0693]

Epoch 1/1 : |████████--------------------------------| 21.74% [20/92 00:17&lt;01:03 0.0792]

Epoch 1/1 : |█████████-------------------------------| 22.83% [21/92 00:18&lt;01:02 0.0770]

Epoch 1/1 : |█████████-------------------------------| 23.91% [22/92 00:19&lt;01:01 0.0729]

Epoch 1/1 : |██████████------------------------------| 25.00% [23/92 00:20&lt;01:00 0.0710]

Epoch 1/1 : |██████████------------------------------| 26.09% [24/92 00:20&lt;00:59 0.0779]

Epoch 1/1 : |██████████------------------------------| 27.17% [25/92 00:21&lt;00:58 0.0787]

Epoch 1/1 : |███████████-----------------------------| 28.26% [26/92 00:22&lt;00:57 0.0870]

Epoch 1/1 : |███████████-----------------------------| 29.35% [27/92 00:23&lt;00:56 0.0936]

Epoch 1/1 : |████████████----------------------------| 30.43% [28/92 00:24&lt;00:55 0.0901]

Epoch 1/1 : |████████████----------------------------| 31.52% [29/92 00:25&lt;00:55 0.0877]

Epoch 1/1 : |█████████████---------------------------| 32.61% [30/92 00:26&lt;00:54 0.0858]

Epoch 1/1 : |█████████████---------------------------| 33.70% [31/92 00:27&lt;00:53 0.0862]

Epoch 1/1 : |█████████████---------------------------| 34.78% [32/92 00:27&lt;00:52 0.0846]

Epoch 1/1 : |██████████████--------------------------| 35.87% [33/92 00:28&lt;00:51 0.0834]

Epoch 1/1 : |██████████████--------------------------| 36.96% [34/92 00:29&lt;00:50 0.0800]

Epoch 1/1 : |███████████████-------------------------| 38.04% [35/92 00:30&lt;00:49 0.0775]

Epoch 1/1 : |███████████████-------------------------| 39.13% [36/92 00:31&lt;00:49 0.0776]

Epoch 1/1 : |████████████████------------------------| 40.22% [37/92 00:32&lt;00:48 0.0774]

Epoch 1/1 : |████████████████------------------------| 41.30% [38/92 00:33&lt;00:47 0.0746]

Epoch 1/1 : |████████████████------------------------| 42.39% [39/92 00:34&lt;00:46 0.0730]

Epoch 1/1 : |█████████████████-----------------------| 43.48% [40/92 00:34&lt;00:45 0.0724]

Epoch 1/1 : |█████████████████-----------------------| 44.57% [41/92 00:35&lt;00:44 0.0707]

Epoch 1/1 : |██████████████████----------------------| 45.65% [42/92 00:36&lt;00:43 0.0715]

Epoch 1/1 : |██████████████████----------------------| 46.74% [43/92 00:37&lt;00:42 0.0758]

Epoch 1/1 : |███████████████████---------------------| 47.83% [44/92 00:38&lt;00:41 0.0735]

Epoch 1/1 : |███████████████████---------------------| 48.91% [45/92 00:39&lt;00:41 0.0711]

Epoch 1/1 : |████████████████████--------------------| 50.00% [46/92 00:40&lt;00:40 0.0746]

Epoch 1/1 : |████████████████████--------------------| 51.09% [47/92 00:41&lt;00:39 0.0724]

Epoch 1/1 : |████████████████████--------------------| 52.17% [48/92 00:41&lt;00:38 0.0704]

Epoch 1/1 : |█████████████████████-------------------| 53.26% [49/92 00:42&lt;00:37 0.0706]

Epoch 1/1 : |█████████████████████-------------------| 54.35% [50/92 00:43&lt;00:36 0.0730]

Epoch 1/1 : |██████████████████████------------------| 55.43% [51/92 00:44&lt;00:35 0.0755]

Epoch 1/1 : |██████████████████████------------------| 56.52% [52/92 00:45&lt;00:34 0.0802]

Epoch 1/1 : |███████████████████████-----------------| 57.61% [53/92 00:46&lt;00:34 0.0778]

Epoch 1/1 : |███████████████████████-----------------| 58.70% [54/92 00:47&lt;00:33 0.0767]

Epoch 1/1 : |███████████████████████-----------------| 59.78% [55/92 00:47&lt;00:32 0.0770]

Epoch 1/1 : |████████████████████████----------------| 60.87% [56/92 00:48&lt;00:31 0.0766]

Epoch 1/1 : |████████████████████████----------------| 61.96% [57/92 00:49&lt;00:30 0.0767]

Epoch 1/1 : |█████████████████████████---------------| 63.04% [58/92 00:50&lt;00:29 0.0755]

Epoch 1/1 : |█████████████████████████---------------| 64.13% [59/92 00:51&lt;00:28 0.0766]

Epoch 1/1 : |██████████████████████████--------------| 65.22% [60/92 00:52&lt;00:27 0.0758]

Epoch 1/1 : |██████████████████████████--------------| 66.30% [61/92 00:53&lt;00:27 0.0740]

Epoch 1/1 : |██████████████████████████--------------| 67.39% [62/92 00:54&lt;00:26 0.0789]

Epoch 1/1 : |███████████████████████████-------------| 68.48% [63/92 00:54&lt;00:25 0.0845]

Epoch 1/1 : |███████████████████████████-------------| 69.57% [64/92 00:55&lt;00:24 0.0822]

Epoch 1/1 : |████████████████████████████------------| 70.65% [65/92 00:56&lt;00:23 0.0806]

Epoch 1/1 : |████████████████████████████------------| 71.74% [66/92 00:57&lt;00:22 0.0784]

Epoch 1/1 : |█████████████████████████████-----------| 72.83% [67/92 00:58&lt;00:21 0.0771]

Epoch 1/1 : |█████████████████████████████-----------| 73.91% [68/92 00:59&lt;00:20 0.0766]

Epoch 1/1 : |██████████████████████████████----------| 75.00% [69/92 01:00&lt;00:20 0.0803]

Epoch 1/1 : |██████████████████████████████----------| 76.09% [70/92 01:01&lt;00:19 0.0800]

Epoch 1/1 : |██████████████████████████████----------| 77.17% [71/92 01:01&lt;00:18 0.0779]

Epoch 1/1 : |███████████████████████████████---------| 78.26% [72/92 01:02&lt;00:17 0.0839]

Epoch 1/1 : |███████████████████████████████---------| 79.35% [73/92 01:03&lt;00:16 0.0837]

Epoch 1/1 : |████████████████████████████████--------| 80.43% [74/92 01:04&lt;00:15 0.0815]

Epoch 1/1 : |████████████████████████████████--------| 81.52% [75/92 01:05&lt;00:14 0.0805]

Epoch 1/1 : |█████████████████████████████████-------| 82.61% [76/92 01:06&lt;00:13 0.0793]

Epoch 1/1 : |█████████████████████████████████-------| 83.70% [77/92 01:07&lt;00:13 0.0773]

Epoch 1/1 : |█████████████████████████████████-------| 84.78% [78/92 01:08&lt;00:12 0.0775]

Epoch 1/1 : |██████████████████████████████████------| 85.87% [79/92 01:09&lt;00:11 0.0756]

Epoch 1/1 : |██████████████████████████████████------| 86.96% [80/92 01:09&lt;00:10 0.0740]

Epoch 1/1 : |███████████████████████████████████-----| 88.04% [81/92 01:10&lt;00:09 0.0726]

Epoch 1/1 : |███████████████████████████████████-----| 89.13% [82/92 01:11&lt;00:08 0.0709]

Epoch 1/1 : |████████████████████████████████████----| 90.22% [83/92 01:12&lt;00:07 0.0699]

Epoch 1/1 : |████████████████████████████████████----| 91.30% [84/92 01:13&lt;00:06 0.0703]

Epoch 1/1 : |████████████████████████████████████----| 92.39% [85/92 01:14&lt;00:06 0.0687]

Epoch 1/1 : |█████████████████████████████████████---| 93.48% [86/92 01:15&lt;00:05 0.0732]

Epoch 1/1 : |█████████████████████████████████████---| 94.57% [87/92 01:16&lt;00:04 0.0714]

Epoch 1/1 : |██████████████████████████████████████--| 95.65% [88/92 01:16&lt;00:03 0.0697]

Epoch 1/1 : |██████████████████████████████████████--| 96.74% [89/92 01:17&lt;00:02 0.0682]

Epoch 1/1 : |███████████████████████████████████████-| 97.83% [90/92 01:18&lt;00:01 0.0682]

Epoch 1/1 : |███████████████████████████████████████-| 98.91% [91/92 01:19&lt;00:00 0.0782]

Epoch 1/1 : |████████████████████████████████████████| 100.00% [92/92 01:20&lt;00:00 0.0786]

Epoch 1/1 :                                                                              

Epoch 1/1 :                                                                              
█

Epoch 1/1 : |----------------------------------------| 0.00% [0/24 00:00&lt;?]

Epoch 1/1 : |█---------------------------------------| 4.17% [1/24 00:00&lt;00:08]

Epoch 1/1 : |███-------------------------------------| 8.33% [2/24 00:00&lt;00:07 0.0767]

Epoch 1/1 : |█████-----------------------------------| 12.50% [3/24 00:01&lt;00:07 0.0767]

Epoch 1/1 : |██████----------------------------------| 16.67% [4/24 00:01&lt;00:07 0.0767]

Epoch 1/1 : |████████--------------------------------| 20.83% [5/24 00:01&lt;00:06 0.0767]

Epoch 1/1 : |██████████------------------------------| 25.00% [6/24 00:02&lt;00:06 0.0767]

Epoch 1/1 : |███████████-----------------------------| 29.17% [7/24 00:02&lt;00:05 0.0767]

Epoch 1/1 : |█████████████---------------------------| 33.33% [8/24 00:02&lt;00:05 0.0767]

Epoch 1/1 : |███████████████-------------------------| 37.50% [9/24 00:03&lt;00:05 0.0767]

Epoch 1/1 : |████████████████------------------------| 41.67% [10/24 00:03&lt;00:04 0.0767]

Epoch 1/1 : |██████████████████----------------------| 45.83% [11/24 00:03&lt;00:04 0.0767]

Epoch 1/1 : |████████████████████--------------------| 50.00% [12/24 00:04&lt;00:04 0.0767]

Epoch 1/1 : |█████████████████████-------------------| 54.17% [13/24 00:04&lt;00:03 0.0767]

Epoch 1/1 : |███████████████████████-----------------| 58.33% [14/24 00:04&lt;00:03 0.0767]

Epoch 1/1 : |█████████████████████████---------------| 62.50% [15/24 00:05&lt;00:03 0.0767]

Epoch 1/1 : |██████████████████████████--------------| 66.67% [16/24 00:05&lt;00:02 0.0767]

Epoch 1/1 : |████████████████████████████------------| 70.83% [17/24 00:06&lt;00:02 0.0767]

Epoch 1/1 : |██████████████████████████████----------| 75.00% [18/24 00:06&lt;00:02 0.0767]

Epoch 1/1 : |███████████████████████████████---------| 79.17% [19/24 00:06&lt;00:01 0.0767]

Epoch 1/1 : |█████████████████████████████████-------| 83.33% [20/24 00:07&lt;00:01 0.0767]

Epoch 1/1 : |███████████████████████████████████-----| 87.50% [21/24 00:07&lt;00:01 0.0767]

Epoch 1/1 : |████████████████████████████████████----| 91.67% [22/24 00:07&lt;00:00 0.0767]

Epoch 1/1 : |██████████████████████████████████████--| 95.83% [23/24 00:08&lt;00:00 0.0767]

Epoch 1/1 : |████████████████████████████████████████| 100.00% [24/24 00:08&lt;00:00 0.0767]

Epoch 1/1 :                                                                              

Epoch 1/1 :                                                                              
0         0.076747    0.034090    0.011502    01:28     </code></pre>
</div>
</div>



 ]]></description>
  <category>Python</category>
  <guid>https://sbloggel.netlify.app/posts/2023-07-20-starting-with-fastai/2023-07-20-starting-with-fastai.html</guid>
  <pubDate>Wed, 19 Jul 2023 22:00:00 GMT</pubDate>
</item>
<item>
  <title>The iris dataset</title>
  <dc:creator>Sebastian Gerdes</dc:creator>
  <link>https://sbloggel.netlify.app/posts/2023-07-12-the-iris-dataset/2023-07-12-the-iris-dataset.html</link>
  <description><![CDATA[ 



<section id="init" class="level2">
<h2 class="anchored" data-anchor-id="init">Init</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'tidyverse'</span>)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'lme4'</span>)</span></code></pre></div>
</div>
</section>
<section id="data-preparation" class="level2">
<h2 class="anchored" data-anchor-id="data-preparation">Data preparation</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1">iris_long <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> iris <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb2-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">id =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(iris)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb2-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pivot_longer</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cols =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(Species, id), </span>
<span id="cb2-4">               <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">names_to =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Variable'</span>, </span>
<span id="cb2-5">               <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values_to =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Value'</span>)</span></code></pre></div>
</div>
</section>
<section id="plots" class="level2">
<h2 class="anchored" data-anchor-id="plots">Plots</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1">iris_long <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb3-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(Variable, Value, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> Species)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb3-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_boxplot</span>()</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://sbloggel.netlify.app/posts/2023-07-12-the-iris-dataset/2023-07-12-the-iris-dataset_files/figure-html/iris_plots-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">last_plot</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_y_log10</span>() </span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://sbloggel.netlify.app/posts/2023-07-12-the-iris-dataset/2023-07-12-the-iris-dataset_files/figure-html/iris_plots-2.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1">iris_long <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb5-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(Variable, Value, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> Species)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb5-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_jitter</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">height =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://sbloggel.netlify.app/posts/2023-07-12-the-iris-dataset/2023-07-12-the-iris-dataset_files/figure-html/iris_plots-3.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">last_plot</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_y_log10</span>() </span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://sbloggel.netlify.app/posts/2023-07-12-the-iris-dataset/2023-07-12-the-iris-dataset_files/figure-html/iris_plots-4.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="models" class="level2">
<h2 class="anchored" data-anchor-id="models">Models</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1">fitted_model <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> </span>
<span id="cb7-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lm</span>(Value <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> Species <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> Variable, </span>
<span id="cb7-3">     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> iris_long)</span>
<span id="cb7-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">anova</span>(fitted_model)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Analysis of Variance Table

Response: Value
                  Df  Sum Sq Mean Sq F value    Pr(&gt;F)    
Species            2  309.61  154.80 1019.34 &lt; 2.2e-16 ***
Variable           3 1656.26  552.09 3635.35 &lt; 2.2e-16 ***
Species:Variable   6  282.47   47.08  309.99 &lt; 2.2e-16 ***
Residuals        588   89.30    0.15                      
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot</span>(fitted_model, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> iris_long<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Species)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://sbloggel.netlify.app/posts/2023-07-12-the-iris-dataset/2023-07-12-the-iris-dataset_files/figure-html/iris_models-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="https://sbloggel.netlify.app/posts/2023-07-12-the-iris-dataset/2023-07-12-the-iris-dataset_files/figure-html/iris_models-2.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="https://sbloggel.netlify.app/posts/2023-07-12-the-iris-dataset/2023-07-12-the-iris-dataset_files/figure-html/iris_models-3.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="https://sbloggel.netlify.app/posts/2023-07-12-the-iris-dataset/2023-07-12-the-iris-dataset_files/figure-html/iris_models-4.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1">fitted_model <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> </span>
<span id="cb10-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lm</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">log</span>(Value) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> Species <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> Variable, </span>
<span id="cb10-3">     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> iris_long)</span>
<span id="cb10-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">anova</span>(fitted_model)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Analysis of Variance Table

Response: log(Value)
                  Df  Sum Sq Mean Sq F value    Pr(&gt;F)    
Species            2  90.843  45.421 1772.90 &lt; 2.2e-16 ***
Variable           3 297.393  99.131 3869.31 &lt; 2.2e-16 ***
Species:Variable   6  95.977  15.996  624.37 &lt; 2.2e-16 ***
Residuals        588  15.064   0.026                      
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot</span>(fitted_model, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> iris_long<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Species)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://sbloggel.netlify.app/posts/2023-07-12-the-iris-dataset/2023-07-12-the-iris-dataset_files/figure-html/iris_models-5.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="https://sbloggel.netlify.app/posts/2023-07-12-the-iris-dataset/2023-07-12-the-iris-dataset_files/figure-html/iris_models-6.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="https://sbloggel.netlify.app/posts/2023-07-12-the-iris-dataset/2023-07-12-the-iris-dataset_files/figure-html/iris_models-7.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="https://sbloggel.netlify.app/posts/2023-07-12-the-iris-dataset/2023-07-12-the-iris-dataset_files/figure-html/iris_models-8.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1">fitted_model <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> </span>
<span id="cb13-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lmer</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">log</span>(Value) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> Species <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> Variable <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|</span> id),</span>
<span id="cb13-3">     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> iris_long)</span>
<span id="cb13-4">fitted_model</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Linear mixed model fit by REML ['lmerMod']
Formula: log(Value) ~ Species * Variable + (1 | id)
   Data: iris_long
REML criterion at convergence: -496.6563
Random effects:
 Groups   Name        Std.Dev.
 id       (Intercept) 0.08565 
 Residual             0.13522 
Number of obs: 600, groups:  id, 150
Fixed Effects:
                           (Intercept)                       Speciesversicolor  
                                0.3728                                  1.0702  
                      Speciesvirginica                     VariablePetal.Width  
                                1.3367                                 -1.8574  
                  VariableSepal.Length                     VariableSepal.Width  
                                1.2354                                  0.8531  
 Speciesversicolor:VariablePetal.Width    Speciesvirginica:VariablePetal.Width  
                                0.6854                                  0.8447  
Speciesversicolor:VariableSepal.Length   Speciesvirginica:VariableSepal.Length  
                               -0.9011                                 -1.0642  
 Speciesversicolor:VariableSepal.Width    Speciesvirginica:VariableSepal.Width  
                               -1.2837                                 -1.4783  </code></pre>
</div>
</div>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<ul>
<li>In general, I like the log scale modeling - however there is a problem with the model on log scale
<ul>
<li>Effects can be given as fold-changes - this seems to make sense to me</li>
<li>Species “setosa” is not fitted adequately on log scale - probably measurement error is not adequately modeled on log scale - higher variance of error on log scale</li>
</ul></li>
<li>Dependence on individual level is not considered in the plain linear model
<ul>
<li>Linear mixed model should be considered!!!</li>
</ul></li>
</ul>


</section>

 ]]></description>
  <category>R</category>
  <guid>https://sbloggel.netlify.app/posts/2023-07-12-the-iris-dataset/2023-07-12-the-iris-dataset.html</guid>
  <pubDate>Tue, 11 Jul 2023 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Easier publishing</title>
  <dc:creator>Sebastian Gerdes</dc:creator>
  <link>https://sbloggel.netlify.app/posts/2023-07-12-easier-publishing/2023-07-12-easier-publishing.html</link>
  <description><![CDATA[ 



<ul>
<li>File “/usr/local/bin/pq”:</li>
</ul>
<pre><code>#!   /bin/bash -e
quarto render
git add .
git commit -m "some changes"
git push</code></pre>
<ul>
<li>chmod +x /usr/local/bin/pq</li>
</ul>



 ]]></description>
  <category>R</category>
  <guid>https://sbloggel.netlify.app/posts/2023-07-12-easier-publishing/2023-07-12-easier-publishing.html</guid>
  <pubDate>Tue, 11 Jul 2023 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Model diagnostics for logistic regression</title>
  <dc:creator>Sebastian Gerdes</dc:creator>
  <link>https://sbloggel.netlify.app/posts/2023-07-12-model-diagnostics-for-logistic-regression/2023-07-12-model-diagnostics-for-logistic-regression.html</link>
  <description><![CDATA[ 



<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'tidyverse'</span>)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'faraway'</span>)</span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">set.seed</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1">n <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span></span>
<span id="cb2-2">dat <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tibble</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x1 =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rnorm</span>(n), </span>
<span id="cb2-3">              <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x2 =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rnorm</span>(n),</span>
<span id="cb2-4">              <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x3 =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rnorm</span>(n),)</span>
<span id="cb2-5"></span>
<span id="cb2-6">X <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">model.matrix</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> ., <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> dat)</span>
<span id="cb2-7">beta <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rnorm</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ncol</span>(X))</span>
<span id="cb2-8"></span>
<span id="cb2-9"></span>
<span id="cb2-10"></span>
<span id="cb2-11">dat <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> dat <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb2-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mu =</span> X <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%*%</span> beta,</span>
<span id="cb2-13">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">p =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plogis</span>(mu),</span>
<span id="cb2-14">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">result =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rbinom</span>(n, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, p))</span>
<span id="cb2-15"></span>
<span id="cb2-16">fitted_model <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">glm</span>(result <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> x1 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> x2 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> x3, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> dat, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">binomial</span>())</span>
<span id="cb2-17"></span>
<span id="cb2-18"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot</span>(fitted_model)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://sbloggel.netlify.app/posts/2023-07-12-model-diagnostics-for-logistic-regression/2023-07-12-model-diagnostics-for-logistic-regression_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="https://sbloggel.netlify.app/posts/2023-07-12-model-diagnostics-for-logistic-regression/2023-07-12-model-diagnostics-for-logistic-regression_files/figure-html/unnamed-chunk-2-2.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="https://sbloggel.netlify.app/posts/2023-07-12-model-diagnostics-for-logistic-regression/2023-07-12-model-diagnostics-for-logistic-regression_files/figure-html/unnamed-chunk-2-3.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="https://sbloggel.netlify.app/posts/2023-07-12-model-diagnostics-for-logistic-regression/2023-07-12-model-diagnostics-for-logistic-regression_files/figure-html/unnamed-chunk-2-4.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">prplot</span>(fitted_model, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://sbloggel.netlify.app/posts/2023-07-12-model-diagnostics-for-logistic-regression/2023-07-12-model-diagnostics-for-logistic-regression_files/figure-html/unnamed-chunk-2-5.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">prplot</span>(fitted_model, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://sbloggel.netlify.app/posts/2023-07-12-model-diagnostics-for-logistic-regression/2023-07-12-model-diagnostics-for-logistic-regression_files/figure-html/unnamed-chunk-2-6.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">prplot</span>(fitted_model, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://sbloggel.netlify.app/posts/2023-07-12-model-diagnostics-for-logistic-regression/2023-07-12-model-diagnostics-for-logistic-regression_files/figure-html/unnamed-chunk-2-7.png" class="img-fluid" width="672"></p>
</div>
</div>



 ]]></description>
  <category>R</category>
  <guid>https://sbloggel.netlify.app/posts/2023-07-12-model-diagnostics-for-logistic-regression/2023-07-12-model-diagnostics-for-logistic-regression.html</guid>
  <pubDate>Tue, 11 Jul 2023 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Pie chart</title>
  <dc:creator>Sebastian Gerdes</dc:creator>
  <link>https://sbloggel.netlify.app/posts/2023-07-12-pie-chart/2023-07-12-pie-chart.html</link>
  <description><![CDATA[ 



<p>To build a simple pie chart:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'tidyverse'</span>)</span>
<span id="cb1-2"></span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(ggplot2)</span>
<span id="cb1-4"></span>
<span id="cb1-5">df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">value =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">23</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">15</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">18</span>),</span>
<span id="cb1-6">                 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Group =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"G"</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>))</span>
<span id="cb1-7"></span>
<span id="cb1-8"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(df, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> value, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> Group)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb1-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_col</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"black"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb1-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ylab</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">''</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb1-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_text</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> value),</span>
<span id="cb1-12">            <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">position =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">position_stack</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">vjust =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb1-13">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">coord_polar</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">theta =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"y"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb1-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.text =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>(),</span>
<span id="cb1-15">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.ticks =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>(),</span>
<span id="cb1-16">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">panel.grid  =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>())</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://sbloggel.netlify.app/posts/2023-07-12-pie-chart/2023-07-12-pie-chart_files/figure-html/init-1.png" class="img-fluid" width="672"></p>
</div>
</div>



 ]]></description>
  <category>R</category>
  <guid>https://sbloggel.netlify.app/posts/2023-07-12-pie-chart/2023-07-12-pie-chart.html</guid>
  <pubDate>Tue, 11 Jul 2023 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Managing python versions in RStudio</title>
  <dc:creator>Sebastian Gerdes</dc:creator>
  <link>https://sbloggel.netlify.app/posts/2023-07-06-python-versions-environments/2023-07-06-python-versions-environments.html</link>
  <description><![CDATA[ 



<section id="ressources" class="level2">
<h2 class="anchored" data-anchor-id="ressources">Ressources</h2>
<ul>
<li>Good resources are found in the {reticulate} vignettes: <a href="https://cran.r-project.org/web/packages/reticulate/index.html">Link</a>, in particular <a href="https://cran.r-project.org/web/packages/reticulate/vignettes/versions.html">this</a></li>
<li>Link to question on stackoverflow - <a href="https://stackoverflow.com/questions/76745347/how-to-make-quarto-use-the-same-python-environment-that-was-specified-in-rstudio">Link</a></li>
</ul>
</section>
<section id="managing-python-installation" class="level1">
<h1>Managing python installation</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'reticulate'</span>)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">py_discover_config</span>()</span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">py_config</span>()</span>
<span id="cb1-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">conda_list</span>()</span>
<span id="cb1-5"></span>
<span id="cb1-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">conda_version</span>()</span>
<span id="cb1-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">configure_environment</span>()</span>
<span id="cb1-8"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">conda_create</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'sbloggel'</span>)</span>
<span id="cb1-9"></span>
<span id="cb1-10"></span>
<span id="cb1-11"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">conda_install</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'sbloggel'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'pandas'</span>)</span>
<span id="cb1-12"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">miniconda_update</span>()</span>
<span id="cb1-13"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">use_condaenv</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'sbloggel'</span>)</span>
<span id="cb1-14"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">conda_install</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'sbloggel'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'plotly'</span>)</span>
<span id="cb1-15"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">use_condaenv</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'base'</span>)</span></code></pre></div>
</div>
</section>
<section id="install-virtual-environments-to-jupyter" class="level1">
<h1>Install virtual environments to jupyter</h1>
<ul>
<li><a href="https://janakiev.com/blog/jupyter-virtual-envs/">Link</a></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Prepare python to enable installation of virtual environments in Jupyter:</span></span>
<span id="cb2-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">pip</span> install <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--user</span> ipykernel</span>
<span id="cb2-3"></span>
<span id="cb2-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Show conda environments and activate:</span></span>
<span id="cb2-5"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">conda</span> info <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--envs</span>  </span>
<span id="cb2-6"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">conda</span> activate sbloggel</span>
<span id="cb2-7"></span>
<span id="cb2-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Install virtual environment into jupyter:</span></span>
<span id="cb2-9"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">python</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-m</span> ipykernel install <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--user</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>sbloggel</span>
<span id="cb2-10"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">conda</span> activate /Users/seb/Library/r-miniconda-arm64/envs/sbloggel  </span></code></pre></div>
</div>
<p>Start Jupyter from terminal:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">jupyter</span> notebook</span></code></pre></div>
</div>


</section>

 ]]></description>
  <category>Python</category>
  <guid>https://sbloggel.netlify.app/posts/2023-07-06-python-versions-environments/2023-07-06-python-versions-environments.html</guid>
  <pubDate>Tue, 04 Jul 2023 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Python graphics</title>
  <dc:creator>Sebastian Gerdes</dc:creator>
  <link>https://sbloggel.netlify.app/posts/2023-07-05-python-graphics/2023-07-05-python-graphics.html</link>
  <description><![CDATA[ 



<section id="init" class="level1">
<h1>Init</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> pandas <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> pd</span>
<span id="cb1-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> matplotlib.pyplot <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> plt</span>
<span id="cb1-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> seaborn <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> sns</span>
<span id="cb1-4"></span>
<span id="cb1-5">sns.get_dataset_names()</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>['anagrams', 'anscombe', 'attention', 'brain_networks', 'car_crashes', 'diamonds', 'dots', 'dowjones', 'exercise', 'flights', 'fmri', 'geyser', 'glue', 'healthexp', 'iris', 'mpg', 'penguins', 'planets', 'seaice', 'taxis', 'tips', 'titanic']</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1">iris <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> sns.load_dataset(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'iris'</span>)</span></code></pre></div>
</div>
</section>
<section id="setting-figure-sizes" class="level1">
<h1>Setting figure sizes</h1>
<section id="matplotlib" class="level2">
<h2 class="anchored" data-anchor-id="matplotlib">Matplotlib</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'figure.figsize'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>]</span>
<span id="cb4-2">fig, ax <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> plt.subplots()</span>
<span id="cb4-3">ax.set_xlabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Sepal length'</span>)</span>
<span id="cb4-4">ax.set_ylabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Sepal width'</span>)</span>
<span id="cb4-5">ax.set_title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Iris dataset'</span>)</span>
<span id="cb4-6">ax.scatter(iris[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'sepal_length'</span>], iris[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'sepal_width'</span>])</span>
<span id="cb4-7">plt.show()</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://sbloggel.netlify.app/posts/2023-07-05-python-graphics/2023-07-05-python-graphics_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
</section>
<section id="seaborn" class="level2">
<h2 class="anchored" data-anchor-id="seaborn">Seaborn</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1">g <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> sns.FacetGrid(iris, col <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'species'</span>, col_wrap <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, height <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, aspect <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)</span>
<span id="cb5-2">g <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> g.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">map</span>(plt.scatter, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'sepal_length'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'sepal_width'</span>)</span>
<span id="cb5-3">plt.show()</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://sbloggel.netlify.app/posts/2023-07-05-python-graphics/2023-07-05-python-graphics_files/figure-html/unnamed-chunk-4-3.png" class="img-fluid figure-img" width="384"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1">plt.close()</span></code></pre></div>
</div>
</section>
</section>
<section id="seaborn-examples" class="level1">
<h1>Seaborn examples</h1>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1">plt.figure(figsize<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>))</span>
<span id="cb7-2">g <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> sns.scatterplot(data <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> iris, </span>
<span id="cb7-3">                    x <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'sepal_length'</span>, </span>
<span id="cb7-4">                    y <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'petal_width'</span>, </span>
<span id="cb7-5">                    hue <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'species'</span>)</span>
<span id="cb7-6">plt.show()</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://sbloggel.netlify.app/posts/2023-07-05-python-graphics/2023-07-05-python-graphics_files/figure-html/unnamed-chunk-5-5.png" class="img-fluid figure-img" width="576"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1">plt.close()</span></code></pre></div>
</div>
</section>
<section id="plotly-examples" class="level1">
<h1>Plotly examples</h1>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># x and y given as array_like objects</span></span>
<span id="cb9-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> plotly.express <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> px</span>
<span id="cb9-3">fig <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> px.scatter(x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>], y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">9</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">25</span>], width <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">800</span>, height <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">800</span>)</span>
<span id="cb9-4">fig.show()</span></code></pre></div>
<div class="cell-output-display">

<div>                        <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script charset="utf-8" src="https://cdn.plot.ly/plotly-2.24.1.min.js"></script>                <div id="1f0ab6ed-1a98-4c1a-b172-3c7ed3bae678" class="plotly-graph-div" style="height:800px; width:800px;"></div>            <script type="text/javascript">                                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("1f0ab6ed-1a98-4c1a-b172-3c7ed3bae678")) {                    Plotly.newPlot(                        "1f0ab6ed-1a98-4c1a-b172-3c7ed3bae678",                        [{"hovertemplate":"x=%{x}\u003cbr\u003ey=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"","marker":{"color":"#636efa","symbol":"circle"},"mode":"markers","name":"","orientation":"v","showlegend":false,"x":[0,1,2,3,4],"xaxis":"x","y":[0,1,4,9,25],"yaxis":"y","type":"scatter"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"x"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"y"}},"legend":{"tracegroupgap":0},"margin":{"t":60},"height":800,"width":800},                        {"responsive": true}                    )                };                            </script>        </div>
</div>
</div>


</section>

 ]]></description>
  <category>Python</category>
  <guid>https://sbloggel.netlify.app/posts/2023-07-05-python-graphics/2023-07-05-python-graphics.html</guid>
  <pubDate>Tue, 04 Jul 2023 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Exploring the Python library statsmodels</title>
  <dc:creator>Sebastian Gerdes</dc:creator>
  <link>https://sbloggel.netlify.app/posts/2023-07-04-python-statsmodels/2023-07-04-python-statsmodels.html</link>
  <description><![CDATA[ 



<section id="plot_fit" class="level2">
<h2 class="anchored" data-anchor-id="plot_fit">plot_fit</h2>
<ul>
<li><a href="https://www.statsmodels.org/dev/generated/statsmodels.graphics.regressionplots.plot_fit.html">Link</a></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> matplotlib.pyplot <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> plt</span>
<span id="cb1-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> numpy <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> np</span>
<span id="cb1-3"></span>
<span id="cb1-4"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> statsmodels.api <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> sm</span>
<span id="cb1-5"></span>
<span id="cb1-6">data <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> sm.datasets.statecrime.load_pandas().data</span>
<span id="cb1-7">murder <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> data[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'murder'</span>]</span>
<span id="cb1-8">X <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> data[[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'poverty'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'hs_grad'</span>]].copy()</span>
<span id="cb1-9">X[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'constant'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb1-10"></span>
<span id="cb1-11">y <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> murder</span>
<span id="cb1-12">model <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> sm.OLS(y, X)</span>
<span id="cb1-13">results <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> model.fit()</span>
<span id="cb1-14"></span>
<span id="cb1-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create a plot just for the variable 'Poverty':</span></span>
<span id="cb1-16"></span>
<span id="cb1-17">fig, ax <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> plt.subplots()</span>
<span id="cb1-18">fig <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> sm.graphics.plot_fit(results, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax)</span>
<span id="cb1-19">ax.set_ylabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Murder Rate"</span>)</span>
<span id="cb1-20">ax.set_xlabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Poverty Level"</span>)</span>
<span id="cb1-21">ax.set_title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Linear Regression"</span>)</span>
<span id="cb1-22"></span>
<span id="cb1-23">plt.show()</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://sbloggel.netlify.app/posts/2023-07-04-python-statsmodels/2023-07-04-python-statsmodels_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="plot_regress_exog" class="level2">
<h2 class="anchored" data-anchor-id="plot_regress_exog">plot_regress_exog</h2>
<ul>
<li><a href="https://www.statsmodels.org/dev/generated/statsmodels.graphics.regressionplots.plot_regress_exog.html#">Link</a></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> statsmodels.api <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> sm</span>
<span id="cb2-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> matplotlib.pyplot <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> plt</span>
<span id="cb2-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> statsmodels.formula.api <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> smf</span>
<span id="cb2-4"></span>
<span id="cb2-5"></span>
<span id="cb2-6">fig <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> plt.figure(figsize<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>))</span>
<span id="cb2-7">crime_data <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> sm.datasets.statecrime.load_pandas()</span>
<span id="cb2-8">results <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> smf.ols(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'murder ~ hs_grad + urban + poverty + single'</span>,</span>
<span id="cb2-9">                   data<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>crime_data.data).fit()</span>
<span id="cb2-10">sm.graphics.plot_regress_exog(results, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'poverty'</span>, fig<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>fig)</span>
<span id="cb2-11">plt.show()</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://sbloggel.netlify.app/posts/2023-07-04-python-statsmodels/2023-07-04-python-statsmodels_files/figure-html/unnamed-chunk-3-3.png" class="img-fluid" width="768"></p>
</div>
</div>
</section>
<section id="plot_partregress" class="level2">
<h2 class="anchored" data-anchor-id="plot_partregress">plot_partregress</h2>
<ul>
<li><a href="https://www.statsmodels.org/dev/generated/statsmodels.graphics.regressionplots.plot_partregress.html">Link</a></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1">crime_data <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> sm.datasets.statecrime.load_pandas()</span>
<span id="cb3-2">sm.graphics.plot_partregress(endog<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'murder'</span>, exog_i<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'hs_grad'</span>,</span>
<span id="cb3-3">                              exog_others<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'urban'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'poverty'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'single'</span>],</span>
<span id="cb3-4">                              data<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>crime_data.data, obs_labels<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span>)</span>
<span id="cb3-5">plt.show()</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://sbloggel.netlify.app/posts/2023-07-04-python-statsmodels/2023-07-04-python-statsmodels_files/figure-html/unnamed-chunk-4-5.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="plot_partregress_grid" class="level2">
<h2 class="anchored" data-anchor-id="plot_partregress_grid">plot_partregress_grid</h2>
<ul>
<li><a href="https://www.statsmodels.org/dev/generated/statsmodels.graphics.regressionplots.plot_partregress_grid.html">Link</a></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> matplotlib.pyplot <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> plt</span>
<span id="cb4-2"></span>
<span id="cb4-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> statsmodels.api <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> sm</span>
<span id="cb4-4"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> statsmodels.formula.api <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> smf</span>
<span id="cb4-5"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> statsmodels.graphics.regressionplots <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> plot_partregress_grid</span>
<span id="cb4-6"></span>
<span id="cb4-7">fig <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> plt.figure(figsize<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>))</span>
<span id="cb4-8">crime_data <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> sm.datasets.statecrime.load_pandas()</span>
<span id="cb4-9">results <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> smf.ols(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'murder ~ hs_grad + urban + poverty + single'</span>,</span>
<span id="cb4-10">                  data<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>crime_data.data).fit()</span>
<span id="cb4-11">plot_partregress_grid(results, fig<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>fig)</span>
<span id="cb4-12">plt.show()</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://sbloggel.netlify.app/posts/2023-07-04-python-statsmodels/2023-07-04-python-statsmodels_files/figure-html/unnamed-chunk-5-7.png" class="img-fluid" width="768"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> statsmodels.api <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> sm</span>
<span id="cb5-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> pandas</span>
<span id="cb5-3">df <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> sm.datasets.get_rdataset(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Guerry"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"HistData"</span>).data</span>
<span id="cb5-4"></span>
<span id="cb5-5">fm <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> sm.formula.ols(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Lottery ~ Literacy + Wealth + C(Region)'</span>, data <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df).fit()</span>
<span id="cb5-6"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(fm.summary())</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                            OLS Regression Results                            
==============================================================================
Dep. Variable:                Lottery   R-squared:                       0.338
Model:                            OLS   Adj. R-squared:                  0.287
Method:                 Least Squares   F-statistic:                     6.636
Date:                Mon, 10 Jul 2023   Prob (F-statistic):           1.07e-05
Time:                        10:37:19   Log-Likelihood:                -375.30
No. Observations:                  85   AIC:                             764.6
Df Residuals:                      78   BIC:                             781.7
Df Model:                           6                                         
Covariance Type:            nonrobust                                         
==================================================================================
                     coef    std err          t      P&gt;|t|      [0.025      0.975]
----------------------------------------------------------------------------------
Intercept         38.6517      9.456      4.087      0.000      19.826      57.478
C(Region)[T.E]   -15.4278      9.727     -1.586      0.117     -34.793       3.938
C(Region)[T.N]   -10.0170      9.260     -1.082      0.283     -28.453       8.419
C(Region)[T.S]    -4.5483      7.279     -0.625      0.534     -19.039       9.943
C(Region)[T.W]   -10.0913      7.196     -1.402      0.165     -24.418       4.235
Literacy          -0.1858      0.210     -0.886      0.378      -0.603       0.232
Wealth             0.4515      0.103      4.390      0.000       0.247       0.656
==============================================================================
Omnibus:                        3.049   Durbin-Watson:                   1.785
Prob(Omnibus):                  0.218   Jarque-Bera (JB):                2.694
Skew:                          -0.340   Prob(JB):                        0.260
Kurtosis:                       2.454   Cond. No.                         371.
==============================================================================

Notes:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"></span>
<span id="cb7-2">fig <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> sm.graphics.influence_plot(fm, criterion<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"cooks"</span>)</span>
<span id="cb7-3">fig.show()</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> seaborn <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> sns</span>
<span id="cb8-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> matplotlib.pyplot <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> plt</span>
<span id="cb8-3">sns.set_theme(style<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"whitegrid"</span>)</span>
<span id="cb8-4"></span>
<span id="cb8-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Load the example diamonds dataset</span></span>
<span id="cb8-6">diamonds <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> sns.load_dataset(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"diamonds"</span>)</span>
<span id="cb8-7"></span>
<span id="cb8-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Draw a scatter plot while assigning point colors and sizes to different</span></span>
<span id="cb8-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># variables in the dataset</span></span>
<span id="cb8-10">f, ax <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> plt.subplots(figsize<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">6.5</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">6.5</span>))</span>
<span id="cb8-11">sns.despine(f, left<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>, bottom<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb8-12">clarity_ranking <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"I1"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"SI2"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"SI1"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"VS2"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"VS1"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"VVS2"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"VVS1"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"IF"</span>]</span>
<span id="cb8-13">sns.scatterplot(x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"carat"</span>, y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"price"</span>,</span>
<span id="cb8-14">                hue<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"clarity"</span>, size<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"depth"</span>,</span>
<span id="cb8-15">                palette<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ch:r=-.2,d=.3_r"</span>,</span>
<span id="cb8-16">                hue_order<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>clarity_ranking,</span>
<span id="cb8-17">                sizes<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>), linewidth<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,</span>
<span id="cb8-18">                data<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>diamonds, ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://sbloggel.netlify.app/posts/2023-07-04-python-statsmodels/2023-07-04-python-statsmodels_files/figure-html/unnamed-chunk-7-9.png" class="img-fluid" width="624"></p>
</div>
</div>


</section>

 ]]></description>
  <category>Python</category>
  <guid>https://sbloggel.netlify.app/posts/2023-07-04-python-statsmodels/2023-07-04-python-statsmodels.html</guid>
  <pubDate>Mon, 03 Jul 2023 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Python pandas</title>
  <dc:creator>Sebastian Gerdes</dc:creator>
  <link>https://sbloggel.netlify.app/posts/2023-07-03-python-pandas/2023-07-03-python-pandas.html</link>
  <description><![CDATA[ 



<ul>
<li>pandas - <a href="https://pandas.pydata.org/docs/getting_started/intro_tutorials/">Tutorials</a></li>
<li>Access R in Python chunk:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1">r[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mtcars"</span>]</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                      mpg  cyl   disp     hp  drat  ...   qsec   vs   am  gear  carb
Mazda RX4            21.0  6.0  160.0  110.0  3.90  ...  16.46  0.0  1.0   4.0   4.0
Mazda RX4 Wag        21.0  6.0  160.0  110.0  3.90  ...  17.02  0.0  1.0   4.0   4.0
Datsun 710           22.8  4.0  108.0   93.0  3.85  ...  18.61  1.0  1.0   4.0   1.0
Hornet 4 Drive       21.4  6.0  258.0  110.0  3.08  ...  19.44  1.0  0.0   3.0   1.0
Hornet Sportabout    18.7  8.0  360.0  175.0  3.15  ...  17.02  0.0  0.0   3.0   2.0
Valiant              18.1  6.0  225.0  105.0  2.76  ...  20.22  1.0  0.0   3.0   1.0
Duster 360           14.3  8.0  360.0  245.0  3.21  ...  15.84  0.0  0.0   3.0   4.0
Merc 240D            24.4  4.0  146.7   62.0  3.69  ...  20.00  1.0  0.0   4.0   2.0
Merc 230             22.8  4.0  140.8   95.0  3.92  ...  22.90  1.0  0.0   4.0   2.0
Merc 280             19.2  6.0  167.6  123.0  3.92  ...  18.30  1.0  0.0   4.0   4.0
Merc 280C            17.8  6.0  167.6  123.0  3.92  ...  18.90  1.0  0.0   4.0   4.0
Merc 450SE           16.4  8.0  275.8  180.0  3.07  ...  17.40  0.0  0.0   3.0   3.0
Merc 450SL           17.3  8.0  275.8  180.0  3.07  ...  17.60  0.0  0.0   3.0   3.0
Merc 450SLC          15.2  8.0  275.8  180.0  3.07  ...  18.00  0.0  0.0   3.0   3.0
Cadillac Fleetwood   10.4  8.0  472.0  205.0  2.93  ...  17.98  0.0  0.0   3.0   4.0
Lincoln Continental  10.4  8.0  460.0  215.0  3.00  ...  17.82  0.0  0.0   3.0   4.0
Chrysler Imperial    14.7  8.0  440.0  230.0  3.23  ...  17.42  0.0  0.0   3.0   4.0
Fiat 128             32.4  4.0   78.7   66.0  4.08  ...  19.47  1.0  1.0   4.0   1.0
Honda Civic          30.4  4.0   75.7   52.0  4.93  ...  18.52  1.0  1.0   4.0   2.0
Toyota Corolla       33.9  4.0   71.1   65.0  4.22  ...  19.90  1.0  1.0   4.0   1.0
Toyota Corona        21.5  4.0  120.1   97.0  3.70  ...  20.01  1.0  0.0   3.0   1.0
Dodge Challenger     15.5  8.0  318.0  150.0  2.76  ...  16.87  0.0  0.0   3.0   2.0
AMC Javelin          15.2  8.0  304.0  150.0  3.15  ...  17.30  0.0  0.0   3.0   2.0
Camaro Z28           13.3  8.0  350.0  245.0  3.73  ...  15.41  0.0  0.0   3.0   4.0
Pontiac Firebird     19.2  8.0  400.0  175.0  3.08  ...  17.05  0.0  0.0   3.0   2.0
Fiat X1-9            27.3  4.0   79.0   66.0  4.08  ...  18.90  1.0  1.0   4.0   1.0
Porsche 914-2        26.0  4.0  120.3   91.0  4.43  ...  16.70  0.0  1.0   5.0   2.0
Lotus Europa         30.4  4.0   95.1  113.0  3.77  ...  16.90  1.0  1.0   5.0   2.0
Ford Pantera L       15.8  8.0  351.0  264.0  4.22  ...  14.50  0.0  1.0   5.0   4.0
Ferrari Dino         19.7  6.0  145.0  175.0  3.62  ...  15.50  0.0  1.0   5.0   6.0
Maserati Bora        15.0  8.0  301.0  335.0  3.54  ...  14.60  0.0  1.0   5.0   8.0
Volvo 142E           21.4  4.0  121.0  109.0  4.11  ...  18.60  1.0  1.0   4.0   2.0

[32 rows x 11 columns]</code></pre>
</div>
</div>
<ul>
<li>Access Python object in R chunk</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1">xyz <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span></span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(reticulate)</span>
<span id="cb4-2">py<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>xyz</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 10</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> pandas <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> pd</span>
<span id="cb6-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> matplotlib.pyplot <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> plt</span>
<span id="cb6-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> seaborn <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> sns</span>
<span id="cb6-4"></span>
<span id="cb6-5">iris <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.read_csv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'iris.csv'</span>)</span>
<span id="cb6-6">iris[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Sepal.Length'</span>].describe()</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>count    150.000000
mean       5.843333
std        0.828066
min        4.300000
25%        5.100000
50%        5.800000
75%        6.400000
max        7.900000
Name: Sepal.Length, dtype: float64</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1">iris[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Sepal.Width'</span>].describe()</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>count    150.000000
mean       3.057333
std        0.435866
min        2.000000
25%        2.800000
50%        3.000000
75%        3.300000
max        4.400000
Name: Sepal.Width, dtype: float64</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1">iris[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'total_length'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> iris[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Sepal.Length'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> iris[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Sepal.Width'</span>]</span>
<span id="cb10-2">iris[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'total_length'</span>].describe()</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>count    150.000000
mean       8.900667
std        0.889272
min        6.800000
25%        8.300000
50%        8.850000
75%        9.575000
max       11.700000
Name: total_length, dtype: float64</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># two identical results:</span></span>
<span id="cb12-2">iris.loc[iris[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'total_length'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'total_length'</span>]</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>15     10.1
50     10.2
102    10.1
105    10.6
107    10.2
109    10.8
117    11.5
118    10.3
120    10.1
122    10.5
125    10.4
129    10.2
130    10.2
131    11.7
135    10.7
Name: total_length, dtype: float64</code></pre>
</div>
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1">iris[iris[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'total_length'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>][<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'total_length'</span>]</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>15     10.1
50     10.2
102    10.1
105    10.6
107    10.2
109    10.8
117    11.5
118    10.3
120    10.1
122    10.5
125    10.4
129    10.2
130    10.2
131    11.7
135    10.7
Name: total_length, dtype: float64</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"></span>
<span id="cb16-2">iris.loc[iris[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'total_length'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'total_length'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span></span></code></pre></div>
</div>



 ]]></description>
  <category>Python</category>
  <guid>https://sbloggel.netlify.app/posts/2023-07-03-python-pandas/2023-07-03-python-pandas.html</guid>
  <pubDate>Sun, 02 Jul 2023 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Specifying mixed effects in lme4</title>
  <dc:creator>Sebastian Gerdes</dc:creator>
  <link>https://sbloggel.netlify.app/posts/2023-06-08-specifying-mixed-effects-models/2023-06-08-specifying-mixed-effects-models.html</link>
  <description><![CDATA[ 



<section id="description-of-trial" class="level2">
<h2 class="anchored" data-anchor-id="description-of-trial">Description of trial</h2>
<ul>
<li><img src="https://latex.codecogs.com/png.latex?n"> individuals (<img src="https://latex.codecogs.com/png.latex?i%20=%201,%202,%20..,%20n">) are measured <img src="https://latex.codecogs.com/png.latex?m"> times (<img src="https://latex.codecogs.com/png.latex?j%20=%201,%202,%20...,%20m">) pre-intervention (denoted <img src="https://latex.codecogs.com/png.latex?y_%7Bij%7D%5E%7Bpre%7D">) and post-intervention (denoted <img src="https://latex.codecogs.com/png.latex?y_%7Bij%7D%5E%7Bpost%7D">)</li>
</ul>
</section>
<section id="underlying-probability-model" class="level2">
<h2 class="anchored" data-anchor-id="underlying-probability-model">Underlying probability model</h2>
<section id="notation" class="level3">
<h3 class="anchored" data-anchor-id="notation">Notation</h3>
<ul>
<li><img src="https://latex.codecogs.com/png.latex?%5Cbeta_0"> fixed effect intercept</li>
<li><img src="https://latex.codecogs.com/png.latex?%5Cbeta_1"> fixed effect of intervention</li>
<li><img src="https://latex.codecogs.com/png.latex?%5Cepsilon%20%5Csim%20%5Cmathcal%7BN%7D(%5Cmu%20=%200,%20sd%20=%20%5Csigma_0)">, for reasons of better legibility sub- and superscript are omitted here</li>
<li><img src="https://latex.codecogs.com/png.latex?b_%7B1,i%7D"> random effect baseline, <img src="https://latex.codecogs.com/png.latex?b_%7B1,i%7D%20%5Csim%20%5Cmathcal%7BN%7D(%5Cmu%20=%200,%20sd%20=%20%5Csigma_1)"></li>
<li><img src="https://latex.codecogs.com/png.latex?b_%7B2,i%7D"> random effect of intervention, <img src="https://latex.codecogs.com/png.latex?b_%7B2,i%7D%20%5Csim%20%5Cmathcal%7BN%7D(%5Cmu%20=%200,%20sd%20=%20%5Csigma_2)"></li>
</ul>
</section>
<section id="parameters-of-the-model-to-be-estimated" class="level3">
<h3 class="anchored" data-anchor-id="parameters-of-the-model-to-be-estimated">Parameters of the model to be estimated</h3>
<ul>
<li><img src="https://latex.codecogs.com/png.latex?%5Cbeta_0">, <img src="https://latex.codecogs.com/png.latex?%5Cbeta_1">, <img src="https://latex.codecogs.com/png.latex?%5Csigma_0">, <img src="https://latex.codecogs.com/png.latex?%5Csigma_1"> and <img src="https://latex.codecogs.com/png.latex?%5Csigma_2"></li>
</ul>
</section>
<section id="model-equations" class="level3">
<h3 class="anchored" data-anchor-id="model-equations">Model equations</h3>
<ul>
<li>Measurement pre intervention: <img src="https://latex.codecogs.com/png.latex?%5Cbegin%7Balign%7D%0Ay_%7Bij%7D%5E%7Bpre%7D%20=%20%5Cbeta_0%20+%20b_i%20+%20%5Cepsilon_%7Bij%7D%5E%7Bpre%7D%0A%5Cend%7Balign%7D"></li>
<li>Measurement post-intervention: <img src="https://latex.codecogs.com/png.latex?%5Cbegin%7Balign%7D%0Ay_%7Bij%7D%5E%7Bpost%7D%20=%20%5Cbeta_0%20+%20%5Cbeta_1%20+%20b_%7B1,i%7D%20+%20b_%7B2,i%7D%20+%20%5Cepsilon_%7Bij%7D%5E%7Bpost%7D%0A%5Cend%7Balign%7D"></li>
</ul>
</section>
<section id="simulate-data" class="level3">
<h3 class="anchored" data-anchor-id="simulate-data">Simulate data</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># size of sample:</span></span>
<span id="cb1-2">n <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span></span>
<span id="cb1-3">m <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span></span>
<span id="cb1-4"></span>
<span id="cb1-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># model parameters:</span></span>
<span id="cb1-6">beta_0 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb1-7">beta_1 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb1-8">sigma_0 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span></span>
<span id="cb1-9">sigma_1 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb1-10">sigma_2 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span></span>
<span id="cb1-11"></span>
<span id="cb1-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># construct data:</span></span>
<span id="cb1-13">patients <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tibble</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">patient_id =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>n, </span>
<span id="cb1-14">                   <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">patient_re =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rnorm</span>(n, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, sigma_1),</span>
<span id="cb1-15">                   <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">treatment_re =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rnorm</span>(n, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, sigma_2))</span>
<span id="cb1-16"></span>
<span id="cb1-17">dat <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expand_grid</span>(patients,</span>
<span id="cb1-18">                   <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">replicate =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>m,</span>
<span id="cb1-19">                   <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">timepoint =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'pre'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'post'</span>))</span>
<span id="cb1-20"></span>
<span id="cb1-21">dat <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> dat <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb1-22">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> beta_0 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb1-23">           patient_re <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb1-24">           <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(timepoint <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'post'</span>, treatment_re <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> beta_1, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb1-25">           <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rnorm</span>(n <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> m <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, sigma_0))</span>
<span id="cb1-26"></span>
<span id="cb1-27"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># make timepoint a factor to get order in plots right:</span></span>
<span id="cb1-28">dat <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> dat <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb1-29">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">timepoint =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(timepoint, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">levels =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'pre'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'post'</span>)))</span></code></pre></div>
</div>
</section>
<section id="tabular-characteristics" class="level3">
<h3 class="anchored" data-anchor-id="tabular-characteristics">Tabular characteristics</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1">dat <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb2-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(timepoint) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb2-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarize</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(y)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb2-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable</span>()</span></code></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">timepoint</th>
<th style="text-align: right;">mean</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">pre</td>
<td style="text-align: right;">0.1868025</td>
</tr>
<tr class="even">
<td style="text-align: left;">post</td>
<td style="text-align: right;">1.1930561</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="visualize-data" class="level3">
<h3 class="anchored" data-anchor-id="visualize-data">Visualize data</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span>(n <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1e2</span>) {</span>
<span id="cb3-2">  dat <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb3-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(timepoint, y, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(patient_id))) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb3-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_jitter</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">width =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">height =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Patient ID'</span>)</span>
<span id="cb3-5">}</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://sbloggel.netlify.app/posts/2023-06-08-specifying-mixed-effects-models/2023-06-08-specifying-mixed-effects-models_files/figure-html/visualize-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="fit-model" class="level3">
<h3 class="anchored" data-anchor-id="fit-model">Fit model</h3>
<section id="linear-model" class="level4">
<h4 class="anchored" data-anchor-id="linear-model">Linear model</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># linear model to get beta_1 and beta_2 </span></span>
<span id="cb4-2">(fm_lm <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lm</span>(y <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> timepoint, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> dat)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summary</span>()</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = y ~ timepoint, data = dat)

Residuals:
     Min       1Q   Median       3Q      Max 
-10.4127  -1.5931   0.0072   2.0727  10.4653 

Coefficients:
              Estimate Std. Error t value Pr(&gt;|t|)  
(Intercept)     0.1868     0.3489   0.535   0.5930  
timepointpost   1.0063     0.4934   2.039   0.0427 *
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 3.489 on 198 degrees of freedom
Multiple R-squared:  0.02057,   Adjusted R-squared:  0.01563 
F-statistic: 4.159 on 1 and 198 DF,  p-value: 0.04274</code></pre>
</div>
</div>
</section>
<section id="mixed-effects-model-with-correlation-between-intercept-and-timepointpost" class="level4">
<h4 class="anchored" data-anchor-id="mixed-effects-model-with-correlation-between-intercept-and-timepointpost">Mixed effects model <strong>with</strong> correlation between <code>(Intercept)</code> and <code>timepointpost</code></h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1">(fm_lmer <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lmer</span>(y <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> timepoint <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> (timepoint <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|</span> patient_id), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> dat))</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>boundary (singular) fit: see help('isSingular')</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Linear mixed model fit by REML ['lmerMod']
Formula: y ~ timepoint + (timepoint | patient_id)
   Data: dat
REML criterion at convergence: 888.5308
Random effects:
 Groups     Name          Std.Dev. Corr 
 patient_id (Intercept)   0.3268        
            timepointpost 4.5307   -1.00
 Residual                 1.9086        
Number of obs: 200, groups:  patient_id, 20
Fixed Effects:
  (Intercept)  timepointpost  
       0.1868         1.0063  
optimizer (nloptwrap) convergence code: 0 (OK) ; 0 optimizer warnings; 1 lme4 warnings </code></pre>
</div>
</div>
</section>
<section id="mixed-effects-model-without-correlation-between-intercept-and-timepointpost" class="level4">
<h4 class="anchored" data-anchor-id="mixed-effects-model-without-correlation-between-intercept-and-timepointpost">Mixed effects model <strong>without</strong> correlation between <code>(Intercept)</code> and <code>timepointpost</code></h4>
<ul>
<li>The specifications I tried seem almost right, but not quite:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1">(fm_lmer <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lmer</span>(y <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> timepoint <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> (timepoint <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">||</span> patient_id), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> dat))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Linear mixed model fit by REML ['lmerMod']
Formula: y ~ timepoint + ((0 + timepoint | patient_id))
   Data: dat
REML criterion at convergence: 888.5308
Random effects:
 Groups     Name          Std.Dev. Corr 
 patient_id timepointpre  0.3268        
            timepointpost 4.2038   -1.00
 Residual                 1.9086        
Number of obs: 200, groups:  patient_id, 20
Fixed Effects:
  (Intercept)  timepointpost  
       0.1868         1.0063  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1">(fm_lmer <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lmer</span>(y <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> timepoint <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> (timepoint <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|</span> patient_id), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> dat))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Linear mixed model fit by REML ['lmerMod']
Formula: y ~ timepoint + (timepoint - 1 | patient_id)
   Data: dat
REML criterion at convergence: 888.5308
Random effects:
 Groups     Name          Std.Dev. Corr 
 patient_id timepointpre  0.3268        
            timepointpost 4.2038   -1.00
 Residual                 1.9086        
Number of obs: 200, groups:  patient_id, 20
Fixed Effects:
  (Intercept)  timepointpost  
       0.1868         1.0063  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1">(fm_lmer <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lmer</span>(y <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> timepoint <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|</span> patient_id) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> (timepoint <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|</span> patient_id), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> dat))</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>boundary (singular) fit: see help('isSingular')</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Linear mixed model fit by REML ['lmerMod']
Formula: y ~ timepoint + (1 | patient_id) + (timepoint - 1 | patient_id)
   Data: dat
REML criterion at convergence: 888.5308
Random effects:
 Groups       Name          Std.Dev. Corr 
 patient_id   (Intercept)   0.0000        
 patient_id.1 timepointpre  0.3268        
              timepointpost 4.2039   -1.00
 Residual                   1.9086        
Number of obs: 200, groups:  patient_id, 20
Fixed Effects:
  (Intercept)  timepointpost  
       0.1868         1.0063  
optimizer (nloptwrap) convergence code: 0 (OK) ; 0 optimizer warnings; 1 lme4 warnings </code></pre>
</div>
<div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1">(fm_lmer <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lmer</span>(y <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> timepoint <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|</span> patient_id) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> (timepoint <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|</span> patient_id), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> dat))</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>boundary (singular) fit: see help('isSingular')</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Linear mixed model fit by REML ['lmerMod']
Formula: y ~ timepoint + (1 | patient_id) + (timepoint + 0 | patient_id)
   Data: dat
REML criterion at convergence: 888.5308
Random effects:
 Groups       Name          Std.Dev. Corr 
 patient_id   (Intercept)   0.0000        
 patient_id.1 timepointpre  0.3268        
              timepointpost 4.2039   -1.00
 Residual                   1.9086        
Number of obs: 200, groups:  patient_id, 20
Fixed Effects:
  (Intercept)  timepointpost  
       0.1868         1.0063  
optimizer (nloptwrap) convergence code: 0 (OK) ; 0 optimizer warnings; 1 lme4 warnings </code></pre>
</div>
</div>


</section>
</section>
</section>

 ]]></description>
  <category>R</category>
  <guid>https://sbloggel.netlify.app/posts/2023-06-08-specifying-mixed-effects-models/2023-06-08-specifying-mixed-effects-models.html</guid>
  <pubDate>Wed, 07 Jun 2023 22:00:00 GMT</pubDate>
</item>
</channel>
</rss>
